                                                                      Page 1
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
Command Line: C:\GHS\V800.V2014.1.7\comp_201417\ease850.exe -w -elf -b0 -I../../../../../app/common/dhd -I../../../../../app/gfx_apps/simple_draw/src -I../../../../../app/gfx_apps/simple_draw/lib -I../../../../../bsp/board//config -I../../../../../bsp/board//src/gfx -I../../../../../bsp/board//src/hmi -I../../../../../bsp/board//src/stdio -I../../../../../bsp/board/d1mx_mango/config -I../../../../../bsp/board/d1mx_mango/src -I../../../../../bsp/board/d1mx_mango/src/gfx -I../../../../../bsp/board/d1mx_mango/src/hmi -I../../../../../bsp/board/d1mx_mango/src/stdio -I../../../../../bsp/gfx/lib -I../../../../../bsp/gfx/src -I../../../../../bsp/hmi/lib -I../../../../../bsp/hmi/src -I../../../../../bsp/lib -I../../../../../bsp/stdio/lib -I../../../../../bsp/stdio/src -I../../../../../cdi/lib -I../../../../../cdi/src -I../../../../../compiler/rh850_ghs/inc -I../../../../../device/d1mx/lib -I../../../../../device/d1mx/macro_cfg -I../../../../../device/d1mx/macro_cfg/csisw -I../../../../../device/d1mx/macro_cfg/davehd -I../../../../../device/d1mx/macro_cfg/ddb -I../../../../../device/d1mx/macro_cfg/drw2d -I../../../../../device/d1mx/macro_cfg/gfxbus -I../../../../../device/d1mx/macro_cfg/gpio -I../../../../../device/d1mx/macro_cfg/hypb -I../../../../../device/d1mx/macro_cfg/hypdb -I../../../../../device/d1mx/macro_cfg/jcua -I../../../../../device/d1mx/macro_cfg/nfmabare -I../../../../../device/d1mx/macro_cfg/octa -I../../../../../device/d1mx/macro_cfg/octacdb -I../../../../../device/d1mx/macro_cfg/ostm -I../../../../../device/d1mx/macro_cfg/pbg -I../../../../../device/d1mx/macro_cfg/riic -I../../../../../device/d1mx/macro_cfg/sfcdb -I../../../../../device/d1mx/macro_cfg/sfma -I../../../../../device/d1mx/macro_cfg/spea -I../../../../../device/d1mx/macro_cfg/tauj -I../../../../../device/d1mx/macro_cfg/tick -I../../../../../device/d1mx/macro_cfg/vdce -I../../../../../device/d1mx/macro_cfg/vowe -I../../../../../device/d1mx/macro_cfg/wm -I../../../../../device/d1mx/macro_cfg/xbus -I../../../../../device/d1mx/src/dev -I../../../../../device/d1mx/src/dhd -I../../../../../device/d1mx/src/hypb -I../../../../../device/d1mx/src/jcua -I../../../../../device/d1mx/src/nfmabare -I../../../../../device/d1mx/src/octa -I../../../../../device/d1mx/src/rh850_ghs -I../../../../../device/d1mx/src/vowe -I../../../../../device/d1x_common/macro_cfg -I../../../../../device/d1x_common/macro_cfg/csisw -I../../../../../device/d1x_common/macro_cfg/davehd -I../../../../../device/d1x_common/macro_cfg/ddb -I../../../../../device/d1x_common/macro_cfg/drw2d -I../../../../../device/d1x_common/macro_cfg/gfxbus -I../../../../../device/d1x_common/macro_cfg/gpio -I../../../../../device/d1x_common/macro_cfg/hypb -I../../../../../device/d1x_common/macro_cfg/hypdb -I../../../../../device/d1x_common/macro_cfg/jcua -I../../../../../device/d1x_common/macro_cfg/nfmabare -I../../../../../device/d1x_common/macro_cfg/octa -I../../../../../device/d1x_common/macro_cfg/octacdb -I../../../../../device/d1x_common/macro_cfg/ostm -I../../../../../device/d1x_common/macro_cfg/pbg -I../../../../../device/d1x_common/macro_cfg/riic -I../../../../../device/d1x_common/macro_cfg/sfcdb -I../../../../../device/d1x_common/macro_cfg/sfma -I../../../../../device/d1x_common/macro_cfg/spea -I../../../../../device/d1x_common/macro_cfg/tauj -I../../../../../device/d1x_common/macro_cfg/tick -I../../../../../device/d1x_common/macro_cfg/vdce -I../../../../../device/d1x_common/macro_cfg/vowe -I../../../../../device/d1x_common/macro_cfg/wm -I../../../../../device/d1x_common/macro_cfg/xbus -I../../../../../device/d1x_common/src/csisw -I../../../../../device/d1x_common/src/ddb -I../../../../../device/d1x_common/src/dev -I../../../../../device/d1x_common/src/gfxbus -I../../../../../device/d1x_common/src/gpio -I../../../../../device/d1x_common/src/ostm -I../../../../../device/d1x_common/src/pbg -I../../../../../device/d1x_common/src/riic -I../../../../../device/d1x_common/src/sfma -I../../../../../device/d1x_common/src/spea -I../../../../../device/d1x_common/src/tauj -I../../../../../device/d1x_common/src/tick -I../../../../../device/d1x_common/src/vdce -I../../../../../device/d1x_common/src/wm -I../../../../../device/d1x_common/src/xbus -I../../../../../device/lib -I../../../../../macro/bus/pbg/lib -I../../../../../macro/bus/pbg/src -I../../../../../macro/csi/csisw/lib -I../../../../../macro/csi/csisw/src -I../../../../../macro/drw2d/lib -I../../../../../macro/drw2d/platform/davehd -I../../../../../macro/drw2d/platform/os/no_os -I../../../../../macro/drw2d/src -I../../../../../macro/flashc/hypb/lib -I../../../../../macro/flashc/hypb/src -I../../../../../macro/flashc/hypdb/lib -I../../../../../macro/flashc/hypdb/src -I../../../../../macro/flashc/nfmabare/lib -I../../../../../macro/flashc/nfmabare/src -I../../../../../macro/flashc/octa/lib -I../../../../../macro/flashc/octa/src -I../../../../../macro/flashc/octacdb/lib -I../../../../../macro/flashc/octacdb/src -I../../../../../macro/flashc/sfcdb/lib -I../../../../../macro/flashc/sfcdb/src -I../../../../../macro/flashc/sfma/lib -I../../../../../macro/flashc/sfma/src -I../../../../../macro/gfxbus/lib -I../../../../../macro/gfxbus/src -I../../../../../macro/gfxbus/xbus/lib -I../../../../../macro/gfxbus/xbus/src -I../../../../../macro/gpio/lib -I../../../../../macro/gpio/src -I../../../../../macro/gpu/davehd/common/inc -I../../../../../macro/gpu/davehd/common/inc/platform -I../../../../../macro/gpu/davehd/common/inc/platform/d1mx -I../../../../../macro/gpu/davehd/docs -I../../../../../macro/gpu/davehd/kernel/inc -I../../../../../macro/gpu/davehd/kernel/platform/d1mx -I../../../../../macro/gpu/davehd/kernel/platform/d1mx/bridge -I../../../../../macro/gpu/davehd/kernel/platform/d1mx/non_threaded -I../../../../../macro/gpu/davehd/kernel/platform/ree -I../../../../../macro/gpu/davehd/kernel/src -I../../../../../macro/gpu/davehd/user/inc -I../../../../../macro/gpu/davehd/user/platform/d1mx/no_os -I../../../../../macro/gpu/davehd/user/src -I../../../../../macro/gpu/jcua/lib -I../../../../../macro/gpu/jcua/src -I../../../../../macro/i2c/riic/lib -I../../../../../macro/i2c/riic/src -I../../../../../macro/tick/lib -I../../../../../macro/tick/src -I../../../../../macro/timer/ostm/lib -I../../../../../macro/timer/ostm/src -I../../../../../macro/timer/tauj/lib -I../../../../../macro/timer/tauj/src -I../../../../../macro/vdce/lib -I../../../../../macro/vdce/src -I../../../../../macro/vo/ddb/lib -I../../../../../macro/vo/ddb/src -I../../../../../macro/vo/spea/lib -I../../../../../macro/vo/spea/src -I../../../../../macro/vo/vowe/lib -I../../../../../macro/vo/vowe/src -I../../../../../macro/wm/lib -I../../../../../macro/wm/src -I../../../../../macro/pwm/lib -I../../../../../macro/reset/lib -I../../../../../macro/rscan/lib -I../../../../../macro/uart/rlin3/lib -I../../../../../macro/uart/rlin3/src -I../../../../../device/d1x_common/macro_cfg/rlin3 -I../../../../../macro/stbc/lib -I../../../../../macro/adc/lib -I../../../../../device/d1x_common/macro_cfg/adc7010 -IC:\GHS\V800.V2014.1.7\comp_201417\lib\rh850_22 -cg_underscore -cpu=rh850g3m -no_v850_simd -rh850_fpsimd=none -nomacro -patch_dbo=C:\git\rh850\src\app\gfx_apps\simple_draw\target\d1mx_mango_ghs\obj\r_riic_main.dbo -source=r_riic_main.c -o .\obj\gh_0000pvc1.o -list=.\obj\r_riic_main.lst C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si 
Original File: C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
Source File: r_riic_main.c
Directory: C:\git\rh850\src\app\gfx_apps\simple_draw\target\d1mx_mango_ghs
Host OS: Windows
EASE: Copyright (C) 1983-2014 Green Hills Software.  All Rights Reversed.
Release: Compiler v2014.1.7
Build Directory: [Directory] BTOWINBOX:c:/build_2014_1_bto/2014-09-04.2200-2014_1_bto/win32-comp-ecom
Revision: [VCInfo] http://toolsvc/branches/release-branch-2014-1-bto/src@515859 (built by build)
Revision Date: Fri Sep 05 14:05:06 2014

Release Date: Fri Sep 05 14:43:29 2014

                           1 --Driver Command: ccv850 -c -MD -I../../../../../app/common/dhd
                           2 --		-I../../../../../app/gfx_apps/simple_draw/src
                           3 --		-I../../../../../app/gfx_apps/simple_draw/lib
                           4 --		-I../../../../../bsp/board//config
                           5 --		-I../../../../../bsp/board//src/gfx
                           6 --		-I../../../../../bsp/board//src/hmi
                           7 --		-I../../../../../bsp/board//src/stdio
                           8 --		-I../../../../../bsp/board/d1mx_mango/config
                           9 --		-I../../../../../bsp/board/d1mx_mango/src
                          10 --		-I../../../../../bsp/board/d1mx_mango/src/gfx
                          11 --		-I../../../../../bsp/board/d1mx_mango/src/hmi
                          12 --		-I../../../../../bsp/board/d1mx_mango/src/stdio
                          13 --		-I../../../../../bsp/gfx/lib -I../../../../../bsp/gfx/src
                          14 --		-I../../../../../bsp/hmi/lib -I../../../../../bsp/hmi/src
                          15 --		-I../../../../../bsp/lib -I../../../../../bsp/stdio/lib
                          16 --		-I../../../../../bsp/stdio/src -I../../../../../cdi/lib
                          17 --		-I../../../../../cdi/src -I../../../../../compiler/rh850_ghs/inc
                          18 --		-I../../../../../device/d1mx/lib
                          19 --		-I../../../../../device/d1mx/macro_cfg
                          20 --		-I../../../../../device/d1mx/macro_cfg/csisw
                          21 --		-I../../../../../device/d1mx/macro_cfg/davehd
                          22 --		-I../../../../../device/d1mx/macro_cfg/ddb
                          23 --		-I../../../../../device/d1mx/macro_cfg/drw2d
                          24 --		-I../../../../../device/d1mx/macro_cfg/gfxbus
                          25 --		-I../../../../../device/d1mx/macro_cfg/gpio
                          26 --		-I../../../../../device/d1mx/macro_cfg/hypb
                          27 --		-I../../../../../device/d1mx/macro_cfg/hypdb
                          28 --		-I../../../../../device/d1mx/macro_cfg/jcua
                          29 --		-I../../../../../device/d1mx/macro_cfg/nfmabare
                          30 --		-I../../../../../device/d1mx/macro_cfg/octa
                          31 --		-I../../../../../device/d1mx/macro_cfg/octacdb
                          32 --		-I../../../../../device/d1mx/macro_cfg/ostm
                          33 --		-I../../../../../device/d1mx/macro_cfg/pbg
                          34 --		-I../../../../../device/d1mx/macro_cfg/riic
                          35 --		-I../../../../../device/d1mx/macro_cfg/sfcdb
                          36 --		-I../../../../../device/d1mx/macro_cfg/sfma
                          37 --		-I../../../../../device/d1mx/macro_cfg/spea
                          38 --		-I../../../../../device/d1mx/macro_cfg/tauj
                          39 --		-I../../../../../device/d1mx/macro_cfg/tick
                          40 --		-I../../../../../device/d1mx/macro_cfg/vdce
                          41 --		-I../../../../../device/d1mx/macro_cfg/vowe
                          42 --		-I../../../../../device/d1mx/macro_cfg/wm
                          43 --		-I../../../../../device/d1mx/macro_cfg/xbus
                          44 --		-I../../../../../device/d1mx/src/dev
                          45 --		-I../../../../../device/d1mx/src/dhd
                          46 --		-I../../../../../device/d1mx/src/hypb
                          47 --		-I../../../../../device/d1mx/src/jcua
                          48 --		-I../../../../../device/d1mx/src/nfmabare
                          49 --		-I../../../../../device/d1mx/src/octa
                          50 --		-I../../../../../device/d1mx/src/rh850_ghs

                                                                      Page 2
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                          51 --		-I../../../../../device/d1mx/src/vowe
                          52 --		-I../../../../../device/d1x_common/macro_cfg
                          53 --		-I../../../../../device/d1x_common/macro_cfg/csisw
                          54 --		-I../../../../../device/d1x_common/macro_cfg/davehd
                          55 --		-I../../../../../device/d1x_common/macro_cfg/ddb
                          56 --		-I../../../../../device/d1x_common/macro_cfg/drw2d
                          57 --		-I../../../../../device/d1x_common/macro_cfg/gfxbus
                          58 --		-I../../../../../device/d1x_common/macro_cfg/gpio
                          59 --		-I../../../../../device/d1x_common/macro_cfg/hypb
                          60 --		-I../../../../../device/d1x_common/macro_cfg/hypdb
                          61 --		-I../../../../../device/d1x_common/macro_cfg/jcua
                          62 --		-I../../../../../device/d1x_common/macro_cfg/nfmabare
                          63 --		-I../../../../../device/d1x_common/macro_cfg/octa
                          64 --		-I../../../../../device/d1x_common/macro_cfg/octacdb
                          65 --		-I../../../../../device/d1x_common/macro_cfg/ostm
                          66 --		-I../../../../../device/d1x_common/macro_cfg/pbg
                          67 --		-I../../../../../device/d1x_common/macro_cfg/riic
                          68 --		-I../../../../../device/d1x_common/macro_cfg/sfcdb
                          69 --		-I../../../../../device/d1x_common/macro_cfg/sfma
                          70 --		-I../../../../../device/d1x_common/macro_cfg/spea
                          71 --		-I../../../../../device/d1x_common/macro_cfg/tauj
                          72 --		-I../../../../../device/d1x_common/macro_cfg/tick
                          73 --		-I../../../../../device/d1x_common/macro_cfg/vdce
                          74 --		-I../../../../../device/d1x_common/macro_cfg/vowe
                          75 --		-I../../../../../device/d1x_common/macro_cfg/wm
                          76 --		-I../../../../../device/d1x_common/macro_cfg/xbus
                          77 --		-I../../../../../device/d1x_common/src/csisw
                          78 --		-I../../../../../device/d1x_common/src/ddb
                          79 --		-I../../../../../device/d1x_common/src/dev
                          80 --		-I../../../../../device/d1x_common/src/gfxbus
                          81 --		-I../../../../../device/d1x_common/src/gpio
                          82 --		-I../../../../../device/d1x_common/src/ostm
                          83 --		-I../../../../../device/d1x_common/src/pbg
                          84 --		-I../../../../../device/d1x_common/src/riic
                          85 --		-I../../../../../device/d1x_common/src/sfma
                          86 --		-I../../../../../device/d1x_common/src/spea
                          87 --		-I../../../../../device/d1x_common/src/tauj
                          88 --		-I../../../../../device/d1x_common/src/tick
                          89 --		-I../../../../../device/d1x_common/src/vdce
                          90 --		-I../../../../../device/d1x_common/src/wm
                          91 --		-I../../../../../device/d1x_common/src/xbus
                          92 --		-I../../../../../device/lib -I../../../../../macro/bus/pbg/lib
                          93 --		-I../../../../../macro/bus/pbg/src
                          94 --		-I../../../../../macro/csi/csisw/lib
                          95 --		-I../../../../../macro/csi/csisw/src
                          96 --		-I../../../../../macro/drw2d/lib
                          97 --		-I../../../../../macro/drw2d/platform/davehd
                          98 --		-I../../../../../macro/drw2d/platform/os/no_os
                          99 --		-I../../../../../macro/drw2d/src
                         100 --		-I../../../../../macro/flashc/hypb/lib
                         101 --		-I../../../../../macro/flashc/hypb/src
                         102 --		-I../../../../../macro/flashc/hypdb/lib
                         103 --		-I../../../../../macro/flashc/hypdb/src
                         104 --		-I../../../../../macro/flashc/nfmabare/lib
                         105 --		-I../../../../../macro/flashc/nfmabare/src
                         106 --		-I../../../../../macro/flashc/octa/lib
                         107 --		-I../../../../../macro/flashc/octa/src
                         108 --		-I../../../../../macro/flashc/octacdb/lib
                         109 --		-I../../../../../macro/flashc/octacdb/src
                         110 --		-I../../../../../macro/flashc/sfcdb/lib
                         111 --		-I../../../../../macro/flashc/sfcdb/src

                                                                      Page 3
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         112 --		-I../../../../../macro/flashc/sfma/lib
                         113 --		-I../../../../../macro/flashc/sfma/src
                         114 --		-I../../../../../macro/gfxbus/lib
                         115 --		-I../../../../../macro/gfxbus/src
                         116 --		-I../../../../../macro/gfxbus/xbus/lib
                         117 --		-I../../../../../macro/gfxbus/xbus/src
                         118 --		-I../../../../../macro/gpio/lib -I../../../../../macro/gpio/src
                         119 --		-I../../../../../macro/gpu/davehd/common/inc
                         120 --		-I../../../../../macro/gpu/davehd/common/inc/platform
                         121 --		-I../../../../../macro/gpu/davehd/common/inc/platform/d1mx
                         122 --		-I../../../../../macro/gpu/davehd/docs
                         123 --		-I../../../../../macro/gpu/davehd/kernel/inc
                         124 --		-I../../../../../macro/gpu/davehd/kernel/platform/d1mx
                         125 --		-I../../../../../macro/gpu/davehd/kernel/platform/d1mx/bridge
                         126 --		-I../../../../../macro/gpu/davehd/kernel/platform/d1mx/non_threaded
                         127 --		-I../../../../../macro/gpu/davehd/kernel/platform/ree
                         128 --		-I../../../../../macro/gpu/davehd/kernel/src
                         129 --		-I../../../../../macro/gpu/davehd/user/inc
                         130 --		-I../../../../../macro/gpu/davehd/user/platform/d1mx/no_os
                         131 --		-I../../../../../macro/gpu/davehd/user/src
                         132 --		-I../../../../../macro/gpu/jcua/lib
                         133 --		-I../../../../../macro/gpu/jcua/src
                         134 --		-I../../../../../macro/i2c/riic/lib
                         135 --		-I../../../../../macro/i2c/riic/src
                         136 --		-I../../../../../macro/tick/lib -I../../../../../macro/tick/src
                         137 --		-I../../../../../macro/timer/ostm/lib
                         138 --		-I../../../../../macro/timer/ostm/src
                         139 --		-I../../../../../macro/timer/tauj/lib
                         140 --		-I../../../../../macro/timer/tauj/src
                         141 --		-I../../../../../macro/vdce/lib -I../../../../../macro/vdce/src
                         142 --		-I../../../../../macro/vo/ddb/lib
                         143 --		-I../../../../../macro/vo/ddb/src
                         144 --		-I../../../../../macro/vo/spea/lib
                         145 --		-I../../../../../macro/vo/spea/src
                         146 --		-I../../../../../macro/vo/vowe/lib
                         147 --		-I../../../../../macro/vo/vowe/src -I../../../../../macro/wm/lib
                         148 --		-I../../../../../macro/wm/src -I../../../../../macro/pwm/lib
                         149 --		-I../../../../../macro/i2c/riic/lib
                         150 --		-I../../../../../macro/reset/lib -I../../../../../macro/rscan/lib
                         151 --		-I../../../../../macro/uart/rlin3/lib
                         152 --		-I../../../../../macro/uart/rlin3/src
                         153 --		-I../../../../../device/d1x_common/macro_cfg/rlin3
                         154 --		-I../../../../../macro/stbc/lib
                         155 --		-I../../../../../app/gfx_apps/simple_draw/lib
                         156 --		-I../../../../../macro/adc/lib
                         157 --		-I../../../../../device/d1x_common/macro_cfg/adc7010 -G
                         158 --		--no_commons --no_implicit_include --prototype_errors
                         159 --		-DRENESAS_D1X -DR_DRW2D_OS_NO_OS -DR_DRW2D_SYS_DHD
                         160 --		-DUSED_CPU=RH850G3M -DUSE_BSP_GFX -DUSE_BSP_HMI -DUSE_BSP_STDIO
                         161 --		-DUSE_CDI -DUSE_CSISW -DUSE_DAVEHD -DUSE_DDB -DUSE_DRW2D
                         162 --		-DUSE_GFXBUS -DUSE_GPIO -DUSE_HYPB -DUSE_HYPDB -DUSE_JCUA
                         163 --		-DUSE_NFMABARE -DUSE_OCTA -DUSE_OCTACDB -DUSE_OSTM -DUSE_PBG
                         164 --		-DUSE_RIIC -DUSE_SFCDB -DUSE_SFMA -DUSE_SPEA -DUSE_TAUJ
                         165 --		-DUSE_TICK -DUSE_VDCE -DUSE_WM -DUSE_XBUS -DMAG -MD -Zuse1bit
                         166 --		-allocate_ep -cpu=rh850g3m -large_sda -list -no_callt -notda
                         167 --		-passsource -preprocess_assembly_files -registermode=22
                         168 --		-reserve_r2 --diag_warning 1 -object_dir=./obj -DUSE_VDCE_OPENLDI
                         169 --		-gnu99 -filetype.c
                         170 --		..\..\..\..\..\macro\i2c\riic\src\r_riic_main.c -o
                         171 --		.\obj\r_riic_main.o
                         172 --Source File:   ..\..\..\..\..\macro\i2c\riic\src\r_riic_main.c

                                                                      Page 4
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         173 --Directory:     
                         174 --		C:\git\rh850\src\app\gfx_apps\simple_draw\target\d1mx_mango_ghs
                         175 --Compile Date:  Tue Oct 16 19:48:54 2018
                         176 --Host OS:       Win32
                         177 --Version:       C-RH850 2014.1.7 RELEASE VERSION
                         178 --Release:       Compiler v2014.1.7
                         179 --Revision Date: Fri Sep 05 14:10:46 2014
                         180 --Release Date:  Fri Sep 05 14:44:23 2014
                         181 -- ecom  -g -w
                         182 
                         183 --1: /*
                         184 --2: ****************************************************************************
                         185 --3: PROJECT : RIIC driver
                         186 --4: FILE    : $Id: r_riic_main.c 6367 2015-10-20 08:25:02Z florian.zimmermann $
                         187 --5: ============================================================================ 
                         188 --6: DESCRIPTION
                         189 --7: Driver for RIIC macro
                         190 --9: ============================================================================
                         191 --10:                             C O P Y R I G H T                                    
                         192 --11: ============================================================================
                         193 --12:                            Copyright (c) 2014
                         194 --13:                                   by 
                         195 --14:                        Renesas Electronics (Europe) GmbH. 
                         196 --15:                            Arcadiastrasse 10
                         197 --16:                           D-40472 Duesseldorf
                         198 --17:                                Germany
                         199 --18:                           All rights reserved.
                         200 --19: ============================================================================
                         201 --20: Purpose: only for testing
                         202 --22: DISCLAIMER                                                                   
                         203 --23: This software is supplied by Renesas Electronics Corporation and is only     
                         204 --24: intended for use with Renesas products. No other uses are authorized. This   
                         205 --25: software is owned by Renesas Electronics Corporation and is protected under  
                         206 --26: all applicable laws, including copyright laws.                               
                         207 --27: THIS SOFTWARE IS PROVIDED "AS IS" AND RENESAS MAKES NO WARRANTIES REGARDING  
                         208 --28: THIS SOFTWARE, WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING BUT NOT      
                         209 --29: LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE   
                         210 --30: AND NON-INFRINGEMENT. ALL SUCH WARRANTIES ARE EXPRESSLY DISCLAIMED.          
                         211 --31: TO THE MAXIMUM EXTENT PERMITTED NOT PROHIBITED BY LAW, NEITHER RENESAS       
                         212 --32: ELECTRONICS CORPORATION NOR ANY OF ITS AFFILIATED COMPANIES SHALL BE LIABLE  
                         213 --33: FOR ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES FOR   
                         214 --34: ANY REASON RELATED TO THIS SOFTWARE, EVEN IF RENESAS OR ITS AFFILIATES HAVE  
                         215 --35: BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.                             
                         216 --36: Renesas reserves the right, without notice, to make changes to this software 
                         217 --37: and to discontinue the availability of this software. By using this software,
                         218 --38: you agree to the additional terms and conditions found by accessing the      
                         219 --39: following link:                                                              
                         220 --40: http://www.renesas.com/disclaimer *                                          
                         221 --41: Copyright (C) 2011 Renesas Electronics Corporation. All rights reserved.     
                         222 --43: ****************************************************************************
                         223 --45: ****************************************************************************
                         224 --46: */
                         225 --48: /*******************************************************************************
                         226 --49:   Title: Main Module
                         227 --51:   Implementation of the API and other global functions.
                         228 --52: */
                         229 --54: /*******************************************************************************
                         230 --55:   Section: Includes
                         231 --56: */
                         232 --58: #include "r_typedefs.h"
                         233 --59: #include "r_cdi_api.h"

                                                                      Page 5
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         234 --60: #include "r_config_riic.h"
                         235 --61: #include "r_riic_regs.h"
                         236 --62: #include "r_riic_api.h"
                         237 --63: #define RIIC_MAIN_GLOBALS
                         238 --64: #include "r_riic_main.h"
                         239 --65: #include "r_riic_sys.h"
                         240 --66: #include "r_dev_api.h"
                         241 --68: #if defined (R_DBG_PRINT_DEV_REGS) || defined (R_DBG_PRINT_MSG)
                         242 --69:    #include <stdio.h> 
                         243 --70:    #include "r_dbg_api.h"
                         244 --71: #endif
                         245 --73: /*******************************************************************************
                         246 --74:   Section: Local Defines
                         247 --75: */
                         248 --77: /*******************************************************************************
                         249 --78:   Section: Local Variables
                         250 --79: */
                         251 --81: /*******************************************************************************
                         252 --82:   Section: Local Functions
                         253 --83: */
                         254 --85: /*******************************************************************************
                         255 --86:   Section: Global Functions
                         256 --87: */
                         257 --89: /*******************************************************************************
                         258 --90:   Section: Global API Functions
                         259 --91:   
                         260 --92:   For API documentation see riic_api.h
                         261 --93: */
                         262 --95: /*******************************************************************************
                         263 --96:   Function: R_RIIC_Init
                         264 --97: */
                         265 --99: r_riic_Error_t R_RIIC_Init(uint32_t Unit, r_riic_Parameter_t *Config) 
                         266 	.text
                         267 ..bof.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main...43.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs..5BC5D026..0::
                         268 	.align	2
                         269 	.global	_R_RIIC_Init
                         270 _R_RIIC_Init:
00000000 8007e130        271 	prepare	{r26,r27,r28,r29,r31},0
00000004 06d8            272 	mov	r6,r27
00000006 07d0            273 	mov	r7,r26
                         274 --	    .bf
                         275 .LDW01:
                         276 --100: {
                         277 --101:     uint32_t    base;
                         278 --102:     uint32_t    clk_in;
                         279 --103:     uint32_t    clk_phi;
                         280 --104:     uint32_t    div;
                         281 --105:     uint32_t    value;
                         282 --106:     
                         283 --107:     base = R_SYS_RIIC_BaseAddr(Unit);
00000008 1b30            284 	mov	r27,r6
                         285 	jarl	_R_SYS_RIIC_BaseAddr,lp
                         285 <EXPANSION BEGIN>
                         285 jarl22 _R_SYS_RIIC_BaseAddr , lp 
0000000a 80ff0000*       285 <EXPANSION END>
0000000e 0ae8            286 	mov	r10,r29
                         287 --108:     r_riic_Dev[Unit].BaseAddr = base;
                         288 --line108
                         289 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.1::
                         290 .LDWlin1:
00000010 1bf0            291 	mov	r27,ep

                                                                      Page 6
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
00000012 c2f2            292 	shl	2,ep
00000014 2e0600000000*   293 	mov	_r_riic_Dev,r14
0000001a cef1            294 	add	r14,ep
0000001c 01ed            295 	sst.w	r29,0[ep]
                         296 --109:     
                         297 --110:     /*Complete the intialisation in the device level */
                         298 --111:     R_SYS_RIIC_Init(Unit);
0000001e 1b30            299 	mov	r27,r6
                         300 	jarl	_R_SYS_RIIC_Init,lp
                         300 <EXPANSION BEGIN>
                         300 jarl22 _R_SYS_RIIC_Init , lp 
00000020 80ff0000*       300 <EXPANSION END>
                         301 --112:     
                         302 --113:     clk_in = 0;
                         303 --line113
                         304 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.2::
                         305 .LDWlin2:
00000024 00e2            306 	mov	0,r28
                         307 --114:     clk_in = R_SYS_RIIC_SysGetClockHz(Unit);
00000026 1b30            308 	mov	r27,r6
                         309 	jarl	_R_SYS_RIIC_SysGetClockHz,lp
                         309 <EXPANSION BEGIN>
                         309 jarl22 _R_SYS_RIIC_SysGetClockHz , lp 
00000028 80ff0000*       309 <EXPANSION END>
0000002c 0ae0            310 	mov	r10,r28
                         311 --115:     if (clk_in == 0) {
                         312 --line115
                         313 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.3::
                         314 .LDWlin3:
0000002e e0e1            315 	cmp	zero,r28
00000030 ba05*           316 	bne	.L4
                         317 --116:         return R_RIIC_ERR_NG;
                         318 --line116
                         319 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.4::
                         320 .LDWlin4:
00000032 0152            321 	mov	1,r10
00000034 e555*           322 	br	.L2
                         323 .L4:
                         324 --117:     }
                         325 --118:     
                         326 --119:     {
                         327 --120:         /* IIC Reset */
                         328 --121:         R_RIIC_WRITE_REG(8, (base + R_RIIC_CR1), 0x1F);                /* ICE = 0 */
                         329 --line121
                         330 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.5::
                         331 .LDWlin5:
00000036 200e1f00        332 	movea	31,zero,r1
0000003a 5d0f0000        333 	st.b	r1,0[r29]
                         334 --122:         R_RIIC_WRITE_REG(8, (base + R_RIIC_CR1), 0x5F);                /* ICE = 0, IICRST = 1 */
0000003e 200e5f00        335 	movea	95,zero,r1
00000042 5d0f0000        336 	st.b	r1,0[r29]
                         337 --124:         R_RIIC_WRITE_REG(8, (base + R_RIIC_CR1), 0xDF);                /* ICE = 1, IICRST = 1 */
00000046 200edf00        338 	movea	223,zero,r1
0000004a 5d0f0000        339 	st.b	r1,0[r29]
                         340 --126:         /* Slave address setup */
                         341 --127:         R_RIIC_WRITE_REG(16, (base + R_RIIC_SAR0), 0x0000);            /* 7bit address, Slave address="0000000" */
0000004e 7d072800        342 	st.h	zero,40[r29]
                         343 --128:         R_RIIC_WRITE_REG(8, (base + R_RIIC_SER), 0x01);                /* SAR0 = 1 */
00000052 010a            344 	mov	1,r1
00000054 5d0f1800        345 	st.b	r1,24[r29]
                         346 --129:         

                                                                      Page 7
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         347 --130:         /* Clock setup */
                         348 --131:         /* PCLK: clk_in -> baudrate: Config.baudrate */
                         349 --132:         
                         350 --133:         /* calculate CKS to generate IIC_PHI_CLK to be
                         351 --134:             IIC_PHI_CLK ~= 40..50x Baud rate (Transfer Rate)
                         352 --135:              e.g. 100kHz Baudrate
                         353 --136:               -> try to generate IIC_PHI_CLK of approximatly 4..5MHz
                         354 --137:               
                         355 --138:            This is a approximation, not 100% accurate setup of baudrate.
                         356 --139:         */
                         357 --140:         
                         358 --141:         div = 0;
00000058 006a            359 	mov	0,r13
                         360 --142:         clk_phi = clk_in / (uint32_t)(1ul << div);
0000005a 010a            361 	mov	1,r1
0000005c ed0fc208        362 	shl	r13,r1,r1
00000060 1c70            363 	mov	r28,r14
00000062 e177fe02        364 	divqu	r1,r14,zero
                         365 --143:         while(clk_phi > (Config->Baudrate * 50u)) 
00000066 850d*           366 	br	.L7
                         367 .L9:
                         368 --144:         {
                         369 --145:             div += 1;
                         370 --line145
                         371 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.6::
                         372 .LDWlin6:
00000068 416a            373 	add	1,r13
                         374 --146:             clk_phi = clk_in / (uint32_t)(1ul << div);
0000006a 010a            375 	mov	1,r1
0000006c ed0fc208        376 	shl	r13,r1,r1
00000070 1c70            377 	mov	r28,r14
00000072 e177fe02        378 	divqu	r1,r14,zero
                         379 .L7:
00000076 3a0f0100        380 	ld.w	0[r26],r1
0000007a f20f4602        381 	mulu	50,r1,zero
0000007e e171            382 	cmp	r1,r14
00000080 cbf5*           383 	bh	.L9
                         384 --147:         }
                         385 --148:         
                         386 --149:         value = ((div<<4u) | 0x08u);  /* MR1 register; CKS (bit6-4) PCLK/(1<<div), (bit4 always "1") */
                         387 --line149
                         388 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.7::
                         389 .LDWlin7:
00000082 0d60            390 	mov	r13,r12
00000084 c462            391 	shl	4,r12
00000086 8c0e0800        392 	ori	8,r12,r1
                         393 --150:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR1), value);
0000008a 5d0f0800        394 	st.b	r1,8[r29]
                         395 --151:         
                         396 --152:         value = ((clk_phi / Config->Baudrate / 2u) - 1u);    /* Half-Time is high-level period */
0000008e 3a5f0100        397 	ld.w	0[r26],r11
00000092 0e60            398 	mov	r14,r12
00000094 eb67fe02        399 	divqu	r11,r12,zero
00000098 8162            400 	shr	1,r12
0000009a 0c0effff        401 	addi	-1,r12,r1
                         402 --153:         value |= 0xE0u;
0000009e 810ee000        403 	ori	224,r1,r1
                         404 --154:         R_RIIC_WRITE_REG(8, (base + R_RIIC_BRH), value);
000000a2 5d0f3800        405 	st.b	r1,56[r29]
                         406 --155:         value = (clk_phi / Config->Baudrate / 2u);    /* Half-Time is low-level period, */
000000a6 3a5f0100        407 	ld.w	0[r26],r11

                                                                      Page 8
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
000000aa 0e60            408 	mov	r14,r12
000000ac eb67fe02        409 	divqu	r11,r12,zero
000000b0 0c08            410 	mov	r12,r1
000000b2 810a            411 	shr	1,r1
                         412 --156:         value = (((value * 1200u) / 1000u) - 1u);          /* but also it is approx. 20% longer than high-level*/
000000b4 2066b004        413 	movea	1200,zero,r12
000000b8 e1672202        414 	mulu	r1,r12,zero
000000bc 2a06d34d6210    415 	mov	274877907,r10
000000c2 ec57225a        416 	mulu	r12,r10,r11
000000c6 865a            417 	shr	6,r11
000000c8 0b66ffff        418 	addi	-1,r11,r12
000000cc 0c08            419 	mov	r12,r1
                         420 --157:         value |= 0xE0u;
000000ce 810ee000        421 	ori	224,r1,r1
                         422 --158:         R_RIIC_WRITE_REG(8, (base + R_RIIC_BRL), value);
000000d2 5d0f3400        423 	st.b	r1,52[r29]
                         424 --159:         
                         425 --160:         R_RIIC_WRITE_REG(8, (base + R_RIIC_CR1), 0x9Fu);                /* ICE = 1, IICRST = 0 */
000000d6 20669f00        426 	movea	159,zero,r12
000000da 5d670000        427 	st.b	r12,0[r29]
                         428 --161:     }
                         429 --162:     
                         430 --163:     return R_RIIC_ERR_OK;
000000de 0052            431 	mov	0,r10
                         432 .L2:
                         433 --	    .ef
                         434 .LDW11:
000000e0 4006ff30        435 	dispose	0,{r26,r27,r28,r29,r31},[lp]
                         436 	.type	_R_RIIC_Init,@function
                         437 	.size	_R_RIIC_Init,.-_R_RIIC_Init
                         438 	.align	2
                         439 .LDW21:
                         440 --_base	r29	local
                         441 --_clk_in	r28	local
                         442 --_clk_phi	r14	local
                         443 --_div	r13	local
                         444 --_value	r1	local
                         445 
                         446 --_Unit	r27	param
                         447 --_Config	r26	param
                         448 
                         449 	.section ".bss","awb"
                         450 .L146:
                         451 	.type	.L146,@object
                         452 	.size	.L146,0
                         453 	.data
                         454 	.text
                         455 
                         456 --164: }
                         457 
                         458 --167: /*******************************************************************************
                         459 --168:   Function: R_RIIC_DeInit
                         460 --169: */
                         461 --171: r_riic_Error_t R_RIIC_DeInit(uint32_t Unit) 
                         462 	.align	2
                         463 	.align	2
                         464 	.global	_R_RIIC_DeInit
                         465 _R_RIIC_DeInit:
000000e4 80076100        466 	prepare	{r29,r31},0
000000e8 06e8            467 	mov	r6,r29
                         468 --	    .bf

                                                                      Page 9
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         469 .LDW31:
                         470 --172: {
                         471 --173:     /*Complete the de-intialisation in the device level */  
                         472 --174:     R_SYS_RIIC_DeInit(Unit);
000000ea 1d30            473 	mov	r29,r6
                         474 	jarl	_R_SYS_RIIC_DeInit,lp
                         474 <EXPANSION BEGIN>
                         474 jarl22 _R_SYS_RIIC_DeInit , lp 
000000ec 80ff0000*       474 <EXPANSION END>
                         475 --175:     
                         476 --176:     return R_RIIC_ERR_OK;
                         477 --line176
                         478 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.8::
                         479 .LDWlin8:
000000f0 0052            480 	mov	0,r10
                         481 --	    .ef
                         482 .LDW41:
000000f2 40067f00        483 	dispose	0,{r29,r31},[lp]
                         484 	.type	_R_RIIC_DeInit,@function
                         485 	.size	_R_RIIC_DeInit,.-_R_RIIC_DeInit
                         486 	.align	2
                         487 .LDW51:
                         488 
                         489 --_Unit	r29	param
                         490 
                         491 	.section ".bss","awb"
                         492 .L274:
                         493 	.type	.L274,@object
                         494 	.size	.L274,0
                         495 	.data
                         496 	.text
                         497 
                         498 --177: }
                         499 
                         500 --180: /*******************************************************************************
                         501 --181:   Function: R_RIIC_data_receive
                         502 --182: */
                         503 --183: void R_RIIC_data_receive(uint32_t Unit, uint8_t* rx_buffer)
                         504 	.align	2
                         505 	.align	2
                         506 	.global	_R_RIIC_data_receive
                         507 _R_RIIC_data_receive:
000000f6 0670            508 	mov	r6,r14
000000f8 07f0            509 	mov	r7,ep
                         510 --	    .bf
                         511 .LDW61:
                         512 --184: {
                         513 --185:     uint32_t    base;
                         514 --186:     
                         515 --187:     base   = r_riic_Dev[Unit].BaseAddr;
000000fa 0e68            516 	mov	r14,r13
000000fc c26a            517 	shl	2,r13
000000fe 2c0600000000*   518 	mov	_r_riic_Dev,r12
00000104 cc69            519 	add	r12,r13
00000106 2d0f0100        520 	ld.w	0[r13],r1
                         521 --188:     
                         522 --189:     while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u);
                         523 .L291:
0000010a 816f2500        524 	ld.bu	36[r1],r13
0000010e 866a            525 	shr	6,r13
00000110 d9fd*           526 	bnl	.L291

                                                                      Page 10
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         527 --191:     /* receive data read */
                         528 --192:     *rx_buffer = R_RIIC_READ_REG(8, (base + R_RIIC_DRR));
                         529 --line192
                         530 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.9::
                         531 .LDWlin9:
00000112 816f4100        532 	ld.bu	64[r1],r13
00000116 806b            533 	sst.b	r13,0[ep]
                         534 --193: }
                         535 --	    .ef
                         536 .LDW71:
00000118 7f00            537 	jmp	[lp]
                         538 	.type	_R_RIIC_data_receive,@function
                         539 	.size	_R_RIIC_data_receive,.-_R_RIIC_data_receive
                         540 	.align	2
                         541 .LDW81:
                         542 --_base	r1	local
                         543 
                         544 --_Unit	r14	param
                         545 --_rx_buffer	ep	param
                         546 
                         547 	.section ".bss","awb"
                         548 .L334:
                         549 	.type	.L334,@object
                         550 	.size	.L334,0
                         551 	.data
                         552 	.text
                         553 
                         554 
                         555 --196: /*******************************************************************************
                         556 --197:   Function: R_RIIC_data_send
                         557 --198: */
                         558 --199: r_riic_Error_t R_RIIC_data_send(uint32_t Unit, uint8_t* TxData) 
                         559 	.align	2
                         560 	.align	2
                         561 	.global	_R_RIIC_data_send
                         562 _R_RIIC_data_send:
0000011a 0660            563 	mov	r6,r12
0000011c 07f0            564 	mov	r7,ep
                         565 --	    .bf
                         566 .LDW91:
                         567 --200: {
                         568 --201:     uint32_t    base;
                         569 --202:     r_riic_Error_t  ack;
                         570 --203:     uint32_t u32temp;
                         571 --204:     
                         572 --205:     base = r_riic_Dev[Unit].BaseAddr;
0000011e 0c70            573 	mov	r12,r14
00000120 c272            574 	shl	2,r14
00000122 2d0600000000*   575 	mov	_r_riic_Dev,r13
00000128 cd71            576 	add	r13,r14
0000012a 2e0f0100        577 	ld.w	0[r14],r1
                         578 --206:     
                         579 --207:     while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_TDRE) == 0u) 
                         580 .L360:
                         581 --208:     {
0000012e 81772500        582 	ld.bu	36[r1],r14
00000132 8872            583 	shr	8,r14
00000134 d9fd*           584 	bnl	.L360
                         585 --209:         /* Waiting TDRE empty */
                         586 --210:     }
                         587 --212:     R_RIIC_WRITE_REG(8, (base + R_RIIC_DRT), *TxData);            /* send data */

                                                                      Page 11
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         588 --line212
                         589 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.10::
                         590 .LDWlin10:
00000136 6070            591 	sld.bu	0[ep],r14
00000138 41773c00        592 	st.b	r14,60[r1]
                         593 --214:     if((*TxData & 0x01) == 0)
0000013c 6070            594 	sld.bu	0[ep],r14
0000013e 8172            595 	shr	1,r14
00000140 910d*           596 	bl	.L363
                         597 --215:     {
                         598 --216:         while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_TEND) == 0u) 
                         599 --line216
                         600 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.11::
                         601 .LDWlin11:
00000142 b505*           602 	br	.L365
                         603 .L367:
                         604 --217:         {
                         605 --218:             /* Waiting send end */
                         606 --219:             u32temp = R_RIIC_READ_REG(8, (base + R_RIIC_SR2));
                         607 --line219
                         608 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.12::
                         609 .LDWlin12:
00000144 816f2500        610 	ld.bu	36[r1],r13
                         611 .L365:
00000148 81772500        612 	ld.bu	36[r1],r14
0000014c 8772            613 	shr	7,r14
0000014e b9fd*           614 	bnl	.L367
00000150 850d*           615 	br	.L368
                         616 .L363:
                         617 --220:         }
                         618 --221:     }
                         619 --222:     else
                         620 --223:     {
                         621 --224:         while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u) 
                         622 --line224
                         623 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.13::
                         624 .LDWlin13:
00000152 b505*           625 	br	.L369
                         626 .L371:
                         627 --225:         {
                         628 --226:             /* Waiting send end */
                         629 --227:             u32temp = R_RIIC_READ_REG(8, (base + R_RIIC_SR2));
                         630 --line227
                         631 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.14::
                         632 .LDWlin14:
00000154 816f2500        633 	ld.bu	36[r1],r13
                         634 .L369:
00000158 81772500        635 	ld.bu	36[r1],r14
0000015c 8672            636 	shr	6,r14
0000015e b9fd*           637 	bnl	.L371
                         638 .L368:
                         639 --228:         }
                         640 --229:     }
                         641 --230:     
                         642 --231:     if((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_NACKF) == 0u) 
                         643 --line231
                         644 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.15::
                         645 .LDWlin15:
00000160 81772500        646 	ld.bu	36[r1],r14
00000164 8572            647 	shr	5,r14
00000166 b105*           648 	bl	.L372

                                                                      Page 12
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         649 --232:     {
                         650 --233:         ack = R_RIIC_ERR_OK;
                         651 --line233
                         652 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.16::
                         653 .LDWlin16:
00000168 0072            654 	mov	0,r14
0000016a a505*           655 	br	.L374
                         656 .L372:
                         657 --234:     }
                         658 --235:     else
                         659 --236:     {
                         660 --237:         ack = R_RIIC_ERR_NG;
                         661 --line237
                         662 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.17::
                         663 .LDWlin17:
0000016c 0172            664 	mov	1,r14
                         665 .L374:
                         666 --238:     }
                         667 --239:     return(ack);
0000016e 0e50            668 	mov	r14,r10
                         669 --	    .ef
                         670 .LDW02:
00000170 7f00            671 	jmp	[lp]
                         672 	.type	_R_RIIC_data_send,@function
                         673 	.size	_R_RIIC_data_send,.-_R_RIIC_data_send
                         674 	.align	2
                         675 .LDW12:
                         676 --_base	r1	local
                         677 --_ack	r14	local
                         678 --_u32temp	r13	local
                         679 
                         680 --_Unit	r12	param
                         681 --_TxData	ep	param
                         682 
                         683 	.section ".bss","awb"
                         684 .L462:
                         685 	.type	.L462,@object
                         686 	.size	.L462,0
                         687 	.data
                         688 	.text
                         689 
                         690 --240: }
                         691 
                         692 --243: /******************************************************************************
                         693 --244: * Function Name : R_RIIC_Master_start_condition
                         694 --245: * Description   : Start condition
                         695 --246: * Arguments     : none
                         696 --247: * Return Value  : none
                         697 --248: ******************************************************************************/
                         698 --249: void R_RIIC_Master_start_condition(uint32_t Unit)
                         699 	.align	2
                         700 	.align	2
                         701 	.global	_R_RIIC_Master_start_condition
                         702 _R_RIIC_Master_start_condition:
00000172 0658            703 	mov	r6,r11
                         704 --	    .bf
                         705 .LDW22:
                         706 --250: {
                         707 --251:     uint8_t  bbsy_flg;
                         708 --252:     uint8_t  mst_trs_flg;
                         709 --253:     uint32_t base;

                                                                      Page 13
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         710 --254:     uint32_t tmp;
                         711 --255:     uint32_t u32reg;
                         712 --256:     
                         713 --257:     base = r_riic_Dev[Unit].BaseAddr;
00000174 0b08            714 	mov	r11,r1
00000176 c20a            715 	shl	2,r1
00000178 2e0600000000*   716 	mov	_r_riic_Dev,r14
0000017e ce09            717 	add	r14,r1
00000180 21f70100        718 	ld.w	0[r1],ep
                         719 --258:     
                         720 --259:     bbsy_flg = (R_RIIC_READ_REG(8, (base + R_RIIC_CR2)) & 0x80u);
00000184 6408            721 	sld.bu	4[ep],r1
00000186 c1768000        722 	andi	128,r1,r14
0000018a 8e00            723 	zxb	r14
                         724 --260:     while(bbsy_flg != 0x00)
0000018c d505*           725 	br	.L524
                         726 .L526:
                         727 --261:     {
                         728 --262:         /* Waiting BBSY = 0 */
                         729 --263:         bbsy_flg = (R_RIIC_READ_REG(8, (base + R_RIIC_CR2)) & 0x80u);
                         730 --line263
                         731 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.18::
                         732 .LDWlin18:
0000018e 6408            733 	sld.bu	4[ep],r1
00000190 c1768000        734 	andi	128,r1,r14
00000194 8e00            735 	zxb	r14
                         736 .L524:
00000196 e071            737 	cmp	zero,r14
00000198 bafd*           738 	bne	.L526
                         739 --264:     }
                         740 --266:     tmp = R_RIIC_READ_REG(8, (base + R_RIIC_CR2));
                         741 --line266
                         742 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.19::
                         743 .LDWlin19:
0000019a 6460            744 	sld.bu	4[ep],r12
                         745 --267:     R_RIIC_WRITE_REG(8, (base + R_RIIC_CR2), (tmp | 0x02u));        /* start condition ST = 1 */
0000019c 8c0e0200        746 	ori	2,r12,r1
000001a0 840b            747 	sst.b	r1,4[ep]
                         748 --269:     do
000001a2 0000            749 	nop
                         750 .L529:
                         751 --270:     {
                         752 --271:         u32reg = R_RIIC_READ_REG(8, (base + R_RIIC_SR2));
000001a4 9e6f2500        753 	ld.bu	36[ep],r13
                         754 --272:         u32reg &= R_RIIC_SR2_START;
000001a8 cd6e0400        755 	andi	4,r13,r13
000001ac e069            756 	cmp	zero,r13
000001ae b2fd*           757 	be	.L529
                         758 --273:     }while(u32reg == 0);
                         759 --275:     // Clear Start Flag
                         760 --276:     u32reg =  R_RIIC_READ_REG(8, (base + R_RIIC_SR2));
                         761 --line276
                         762 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.20::
                         763 .LDWlin20:
000001b0 9e6f2500        764 	ld.bu	36[ep],r13
                         765 --277:     u32reg &= ~R_RIIC_SR2_START;
000001b4 1b0a            766 	mov	-5,r1
000001b6 4169            767 	and	r1,r13
                         768 --278:     R_RIIC_WRITE_REG(8, (base + R_RIIC_SR2), u32reg);
000001b8 a46b            769 	sst.b	r13,36[ep]
                         770 --280:     /* check master send mode */

                                                                      Page 14
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         771 --281:     mst_trs_flg = (R_RIIC_READ_REG(8, (base + R_RIIC_CR2)) & 0x60u);
000001ba 6450            772 	sld.bu	4[ep],r10
000001bc ca0e6000        773 	andi	96,r10,r1
000001c0 8100            774 	zxb	r1
                         775 --282:     while(mst_trs_flg != 0x60u)
000001c2 d505*           776 	br	.L530
                         777 .L532:
                         778 --283:     {
                         779 --284:         mst_trs_flg = (R_RIIC_READ_REG(8, (base + R_RIIC_CR2)) & 0x60u);
                         780 --line284
                         781 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.21::
                         782 .LDWlin21:
000001c4 6450            783 	sld.bu	4[ep],r10
000001c6 ca0e6000        784 	andi	96,r10,r1
000001ca 8100            785 	zxb	r1
                         786 .L530:
000001cc 0106a0ff        787 	addi	-96,r1,zero
000001d0 aafd*           788 	bne	.L532
                         789 --285:     }
                         790 --286: }
                         791 --	    .ef
                         792 .LDW32:
                         793 --line286
                         794 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.22::
                         795 .LDWlin22:
000001d2 7f00            796 	jmp	[lp]
                         797 	.type	_R_RIIC_Master_start_condition,@function
                         798 	.size	_R_RIIC_Master_start_condition,.-_R_RIIC_Master_start_condition
                         799 	.align	2
                         800 .LDW42:
                         801 --_bbsy_flg	r14	local
                         802 --_mst_trs_flg	r1	local
                         803 --_base	ep	local
                         804 --_tmp	r12	local
                         805 --_u32reg	r13	local
                         806 
                         807 --_Unit	r11	param
                         808 
                         809 	.section ".bss","awb"
                         810 .L638:
                         811 	.type	.L638,@object
                         812 	.size	.L638,0
                         813 	.data
                         814 	.text
                         815 
                         816 
                         817 --289: /******************************************************************************
                         818 --290: * Function Name : R_RIIC_Master_stop_condition
                         819 --291: * Description   : Stop condition
                         820 --292: * Arguments     : uint8_t* RxBuffer : received data
                         821 --293: * Return Value  : none
                         822 --294: ******************************************************************************/
                         823 --295: void R_RIIC_Master_stop_condition(uint32_t Unit, uint8_t* RxBuffer)
                         824 	.align	2
                         825 	.align	2
                         826 	.global	_R_RIIC_Master_stop_condition
                         827 _R_RIIC_Master_stop_condition:
000001d4 0670            828 	mov	r6,r14
000001d6 0768            829 	mov	r7,r13
                         830 --	    .bf
                         831 .LDW52:

                                                                      Page 15
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         832 --296: {
                         833 --297:     uint8_t dummy;
                         834 --298:     uint32_t base;
                         835 --299:     
                         836 --300:     base = r_riic_Dev[Unit].BaseAddr;
000001d8 0e08            837 	mov	r14,r1
000001da c20a            838 	shl	2,r1
000001dc 2c0600000000*   839 	mov	_r_riic_Dev,r12
000001e2 cc09            840 	add	r12,r1
000001e4 21f70100        841 	ld.w	0[r1],ep
                         842 --302:     * RxBuffer = R_RIIC_READ_REG(8, (base + R_RIIC_DRR));  /* last data read for recieve mode */
000001e8 9e0f4100        843 	ld.bu	64[ep],r1
000001ec 4d0f0000        844 	st.b	r1,0[r13]
                         845 --304:     dummy = R_RIIC_READ_REG(8, (base + R_RIIC_SR2));    /* dummy read */
000001f0 9e0f2500        846 	ld.bu	36[ep],r1
                         847 --305:     dummy &= ~R_RIIC_SR2_STOP;
000001f4 c10ef700        848 	andi	247,r1,r1
000001f8 8100            849 	zxb	r1
                         850 --306:     R_RIIC_WRITE_REG(8, (base + R_RIIC_SR2), dummy);    /* STOP flg clear */
000001fa a40b            851 	sst.b	r1,36[ep]
                         852 --308:     dummy = R_RIIC_READ_REG(8, (base + R_RIIC_SR2));    /* dummy read */
000001fc 9e0f2500        853 	ld.bu	36[ep],r1
                         854 --309:     dummy &= ~R_RIIC_SR2_TEND;
00000200 c10ebf00        855 	andi	191,r1,r1
00000204 8100            856 	zxb	r1
                         857 --310:     R_RIIC_WRITE_REG(8, (base + R_RIIC_SR2), dummy);    /* TEND flg clear */
00000206 a40b            858 	sst.b	r1,36[ep]
                         859 --311:     
                         860 --312:     dummy = R_RIIC_READ_REG(8, (base + R_RIIC_CR2));    /* dummy read */
00000208 6408            861 	sld.bu	4[ep],r1
                         862 --313:     dummy |= 0x08u;
0000020a 810e0800        863 	ori	8,r1,r1
                         864 --314:     R_RIIC_WRITE_REG(8, (base + R_RIIC_CR2), dummy);    /* stop condition SP = 1 */
0000020e 840b            865 	sst.b	r1,4[ep]
                         866 --315:     
                         867 --316:     dummy = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));    /* dummy read */
00000210 9e0f1100        868 	ld.bu	16[ep],r1
                         869 --317:     dummy |= 0x10u;
00000214 810e1000        870 	ori	16,r1,r1
                         871 --318:     R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), dummy);    /* ACKWP set */
00000218 900b            872 	sst.b	r1,16[ep]
                         873 --319:     
                         874 --320:     dummy = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));    /* dummy read */
0000021a 9e0f1100        875 	ld.bu	16[ep],r1
                         876 --321:     dummy |= 0x18u;
0000021e 810e1800        877 	ori	24,r1,r1
                         878 --322:     R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), dummy);    /* NACK set */
00000222 900b            879 	sst.b	r1,16[ep]
                         880 --323:     
                         881 --324:     dummy = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));    /* dummy read */
00000224 9e0f1100        882 	ld.bu	16[ep],r1
                         883 --325:     dummy &= 0xBFu;
00000228 c10ebf00        884 	andi	191,r1,r1
0000022c 8100            885 	zxb	r1
                         886 --326:     R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), dummy);    /* WAIT clear */
0000022e 900b            887 	sst.b	r1,16[ep]
                         888 --327:     
                         889 --328:     while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_STOP) == 0u) 
                         890 .L712:
                         891 --329:     {
00000230 9e672500        892 	ld.bu	36[ep],r12

                                                                      Page 16
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
00000234 8462            893 	shr	4,r12
00000236 d9fd*           894 	bnl	.L712
                         895 --330:         /* Waiting Stop condition */
                         896 --331:     }
                         897 --332:     
                         898 --333:     dummy = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));    /* dummy read */
                         899 --line333
                         900 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.23::
                         901 .LDWlin23:
00000238 9e0f1100        902 	ld.bu	16[ep],r1
                         903 --334:     dummy |= 0x10u;
0000023c 810e1000        904 	ori	16,r1,r1
                         905 --335:     R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), dummy);    /* ACKWP set */
00000240 900b            906 	sst.b	r1,16[ep]
                         907 --336:     
                         908 --337:     dummy = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));    /* dummy read */
00000242 9e0f1100        909 	ld.bu	16[ep],r1
                         910 --338:     dummy &= 0xD7u;
00000246 c10ed700        911 	andi	215,r1,r1
0000024a 8100            912 	zxb	r1
                         913 --339:     R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), dummy);    /* DRFS,ACKBT clear */
0000024c 900b            914 	sst.b	r1,16[ep]
                         915 --340:     
                         916 --341:     dummy = R_RIIC_READ_REG(8, (base + R_RIIC_SR2));    /* dummy read */
0000024e 9e0f2500        917 	ld.bu	36[ep],r1
                         918 --342:     dummy &= ~R_RIIC_SR2_NACKF;
00000252 c10eef00        919 	andi	239,r1,r1
00000256 8100            920 	zxb	r1
                         921 --343:     R_RIIC_WRITE_REG(8, (base + R_RIIC_SR2), dummy);    /* NACKF flg clear */
00000258 a40b            922 	sst.b	r1,36[ep]
                         923 --344:     dummy &= ~R_RIIC_SR2_STOP;
0000025a c10ef700        924 	andi	247,r1,r1
0000025e 8100            925 	zxb	r1
                         926 --345:     R_RIIC_WRITE_REG(8, (base + R_RIIC_SR2), dummy);    /* STOP flg clear */
00000260 a40b            927 	sst.b	r1,36[ep]
                         928 --346: }
                         929 --	    .ef
                         930 .LDW62:
00000262 7f00            931 	jmp	[lp]
                         932 	.type	_R_RIIC_Master_stop_condition,@function
                         933 	.size	_R_RIIC_Master_stop_condition,.-_R_RIIC_Master_stop_condition
                         934 	.align	2
                         935 .LDW72:
                         936 --_dummy	r1	local
                         937 --_base	ep	local
                         938 
                         939 --_Unit	r14	param
                         940 --_RxBuffer	r13	param
                         941 
                         942 	.section ".bss","awb"
                         943 .L866:
                         944 	.type	.L866,@object
                         945 	.size	.L866,0
                         946 	.data
                         947 	.text
                         948 
                         949 
                         950 --349: /******************************************************************************
                         951 --350: * Function Name : R_RIIC_Slave_address_send
                         952 --351: * Description   : Sending Slave address at Master mode
                         953 --352: * Arguments     : uint8_t *data    :Send data

                                                                      Page 17
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                         954 --353: * Return Value  : ACK OK    :R_RIIC_ERR_OK
                         955 --354:                 : ACK NG    :R_RIIC_ERR_NG
                         956 --355: ******************************************************************************/
                         957 --356: r_riic_Error_t R_RIIC_Slave_address_send(uint32_t Unit, uint8_t *TxData)
                         958 	.align	2
                         959 	.align	2
                         960 	.global	_R_RIIC_Slave_address_send
                         961 _R_RIIC_Slave_address_send:
00000264 8007e110        962 	prepare	{r27,r28,r29,r31},0
00000268 06e0            963 	mov	r6,r28
0000026a 07d8            964 	mov	r7,r27
                         965 --	    .bf
                         966 .LDW82:
                         967 --357: {
                         968 --358:     r_riic_Error_t ack;
                         969 --360:     ack = R_RIIC_data_send(Unit, TxData);        /* slave device address */
0000026c 1c30            970 	mov	r28,r6
0000026e 1b38            971 	mov	r27,r7
                         972 	jarl	_R_RIIC_data_send,lp
                         972 <EXPANSION BEGIN>
                         972 jarl22 _R_RIIC_data_send , lp 
00000270 bfffaafe*       972 <EXPANSION END>
00000274 0ae8            973 	mov	r10,r29
                         974 --361:     if (ack == R_RIIC_ERR_OK) 
                         975 --line361
                         976 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.24::
                         977 .LDWlin24:
00000276 e0e9            978 	cmp	zero,r29
00000278 ba05*           979 	bne	.L979
                         980 --362:     {
                         981 --363:         return(ack);
                         982 --line363
                         983 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.25::
                         984 .LDWlin25:
0000027a 1d50            985 	mov	r29,r10
0000027c a505*           986 	br	.L977
                         987 .L979:
                         988 --364:     }
                         989 --366:     return(ack);
                         990 --line366
                         991 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.26::
                         992 .LDWlin26:
0000027e 1d50            993 	mov	r29,r10
                         994 .L977:
                         995 --	    .ef
                         996 .LDW92:
00000280 4006ff10        997 	dispose	0,{r27,r28,r29,r31},[lp]
                         998 	.type	_R_RIIC_Slave_address_send,@function
                         999 	.size	_R_RIIC_Slave_address_send,.-_R_RIIC_Slave_address_send
                        1000 	.align	2
                        1001 .LDW03:
                        1002 --_ack	r29	local
                        1003 
                        1004 --_Unit	r28	param
                        1005 --_TxData	r27	param
                        1006 
                        1007 	.section ".bss","awb"
                        1008 .L1018:
                        1009 	.type	.L1018,@object
                        1010 	.size	.L1018,0
                        1011 	.data

                                                                      Page 18
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1012 	.text
                        1013 
                        1014 --367: }
                        1015 
                        1016 --370: /*******************************************************************************
                        1017 --371:   Function: R_RIIC_transmit_to_slave
                        1018 --373:   Write a series of values to a IIC slave.
                        1019 --375:   IIC slave address is assumed to by first data value in tdata.
                        1020 --376:   Function generates a complete Start-Condition, Slave-Address-Send,
                        1021 --377:   Data-Send and End-Condition cycle.
                        1022 --379:   Parameters:
                        1023 --380:   Unit         - Instance number
                        1024 --381:   tdata        - array with data to be send
                        1025 --382:   size         - number of data to be send (size of tdata array)
                        1026 --384:   Returns:
                        1027 --385:   see: <r_riic_Error_t>
                        1028 --386: */
                        1029 --387: r_riic_Error_t R_RIIC_transmit_to_slave(uint32_t Unit, uint8_t *Tdata, uint32_t Size)
                        1030 	.align	2
                        1031 	.align	2
                        1032 	.global	_R_RIIC_transmit_to_slave
                        1033 _R_RIIC_transmit_to_slave:
00000284 8207e170       1034 	prepare	{r25,r26,r27,r28,r29,r31},1
00000288 06d8           1035 	mov	r6,r27
0000028a 07d0           1036 	mov	r7,r26
0000028c 08c8           1037 	mov	r8,r25
                        1038 --	    .bf
                        1039 .LDW13:
                        1040 --388: {
                        1041 --389:     uint8_t data;
                        1042 --390:     uint8_t i;
                        1043 --391:     r_riic_Error_t ack;
                        1044 --392:     
                        1045 --393:     if (Size <= 1)
0000028e 61ca           1046 	cmp	1,r25
00000290 bb05*          1047 	bh	.L1041
                        1048 --394:     {
                        1049 --395:         return R_RIIC_ERR_NG;
                        1050 --line395
                        1051 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.27::
                        1052 .LDWlin27:
00000292 0152           1053 	mov	1,r10
00000294 d525*          1054 	br	.L1039
                        1055 .L1041:
                        1056 --396:     }
                        1057 --397:     
                        1058 --398:     /* transmit in master mode */
                        1059 --399:     R_RIIC_Master_start_condition(Unit);
                        1060 --line399
                        1061 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.28::
                        1062 .LDWlin28:
00000296 1b30           1063 	mov	r27,r6
                        1064 	jarl	_R_RIIC_Master_start_condition,lp
                        1064 <EXPANSION BEGIN>
                        1064 jarl22 _R_RIIC_Master_start_condition , lp 
00000298 bfffdafe*      1064 <EXPANSION END>
                        1065 --400:     data = Tdata[0];   /* Slave Address */
                        1066 --line400
                        1067 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.29::
                        1068 .LDWlin29:
0000029c 9a0f0100       1069 	ld.bu	0[r26],r1

                                                                      Page 19
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
000002a0 430f0300       1070 	st.b	r1,3[sp]
                        1071 --401:     ack = R_RIIC_Slave_address_send(Unit, &data);
000002a4 1b30           1072 	mov	r27,r6
000002a6 233e0300       1073 	movea	3,sp,r7
                        1074 	jarl	_R_RIIC_Slave_address_send,lp
                        1074 <EXPANSION BEGIN>
                        1074 jarl22 _R_RIIC_Slave_address_send , lp 
000002aa bfffbaff*      1074 <EXPANSION END>
000002ae 0ae0           1075 	mov	r10,r28
                        1076 --403:     for (i = 1; i < Size; i++)
                        1077 --line403
                        1078 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.30::
                        1079 .LDWlin30:
000002b0 01ea           1080 	mov	1,r29
000002b2 e50d*          1081 	br	.L1047
                        1082 .L1046:
                        1083 --404:     {
                        1084 --405:         data = Tdata[i];    /* data n for slave
                        1085 --line405
                        1086 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.31::
                        1087 .LDWlin31:
000002b4 1df0           1088 	mov	r29,ep
000002b6 daf1           1089 	add	r26,ep
000002b8 6008           1090 	sld.bu	0[ep],r1
000002ba 430f0300       1091 	st.b	r1,3[sp]
                        1092 --406:                             (n=1 -> register name
                        1093 --407:                              n>=2 -> register value) */
                        1094 --408:         ack += R_RIIC_data_send(Unit, &data);
000002be 1b30           1095 	mov	r27,r6
000002c0 233e0300       1096 	movea	3,sp,r7
                        1097 	jarl	_R_RIIC_data_send,lp
                        1097 <EXPANSION BEGIN>
                        1097 jarl22 _R_RIIC_data_send , lp 
000002c4 bfff56fe*      1097 <EXPANSION END>
000002c8 cae1           1098 	add	r10,r28
                        1099 --line403
                        1100 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.32::
                        1101 .LDWlin32:
000002ca 41ea           1102 	add	1,r29
000002cc 9d00           1103 	zxb	r29
                        1104 .L1047:
000002ce f9e9           1105 	cmp	r25,r29
000002d0 a1f5*          1106 	bl	.L1046
                        1107 --409:     }
                        1108 --410:     R_RIIC_Master_stop_condition(Unit, &data);
                        1109 --line410
                        1110 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.33::
                        1111 .LDWlin33:
000002d2 1b30           1112 	mov	r27,r6
000002d4 233e0300       1113 	movea	3,sp,r7
                        1114 	jarl	_R_RIIC_Master_stop_condition,lp
                        1114 <EXPANSION BEGIN>
                        1114 jarl22 _R_RIIC_Master_stop_condition , lp 
000002d8 bffffcfe*      1114 <EXPANSION END>
                        1115 --411:     
                        1116 --412:     return ack;
                        1117 --line412
                        1118 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.34::
                        1119 .LDWlin34:
000002dc 1c50           1120 	mov	r28,r10
                        1121 .L1039:

                                                                      Page 20
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1122 --	    .ef
                        1123 .LDW23:
000002de 4206ff70       1124 	dispose	1,{r25,r26,r27,r28,r29,r31},[lp]
                        1125 	.type	_R_RIIC_transmit_to_slave,@function
                        1126 	.size	_R_RIIC_transmit_to_slave,.-_R_RIIC_transmit_to_slave
                        1127 	.align	2
                        1128 .LDW33:
                        1129 --_data	3[sp]	local
                        1130 --_i	r29	local
                        1131 --_ack	r28	local
                        1132 
                        1133 --_Unit	r27	param
                        1134 --_Tdata	r26	param
                        1135 --_Size	r25	param
                        1136 
                        1137 	.section ".bss","awb"
                        1138 .L1118:
                        1139 	.type	.L1118,@object
                        1140 	.size	.L1118,0
                        1141 	.data
                        1142 	.text
                        1143 
                        1144 --413: }
                        1145 
                        1146 --416: /*******************************************************************************
                        1147 --417:   Function: R_RIIC_receive_from_slave16b
                        1148 --419:   Read 1 or 2 bytes from IIC slave with a 16bit address.
                        1149 --420:   (note: not all devices may support this format)
                        1150 --422:     <slave address 7bit> <internal address 16 bit> <read 2 bytes>
                        1151 --424:   Parameters:
                        1152 --425:   Unit              - Instance number
                        1153 --426:   SlaveAddress      - slave address 7bit
                        1154 --427:   InternalAddress   - the device's internal addtess (16bit)
                        1155 --428:   Rdata             - buffer to store data read from slave
                        1156 --429:   size              - number of data bytes to be read
                        1157 --431:   Returns:
                        1158 --432:   see: <r_riic_Error_t>
                        1159 --433: */
                        1160 --434: r_riic_Error_t R_RIIC_receive_from_slave16b(uint32_t Unit, uint8_t SlaveAddress, uint16_t InternalAddress, uint8_t *Rdata, uint32_t Size)
                        1161 	.align	2
                        1162 	.align	2
                        1163 	.global	_R_RIIC_receive_from_slave16b
                        1164 _R_RIIC_receive_from_slave16b:
000002e2 8407e170       1165 	prepare	{r25,r26,r27,r28,r29,r31},2
000002e6 634f0500       1166 	st.w	r9,4[sp]
000002ea c866ffff       1167 	andi	65535,r8,r12
000002ee 63670200       1168 	st.h	r12,2[sp]
000002f2 c75eff00       1169 	andi	255,r7,r11
000002f6 435f0100       1170 	st.b	r11,1[sp]
000002fa 06d8           1171 	mov	r6,r27
                        1172 --	    .bf
                        1173 .LDW43:
                        1174 --435: {
                        1175 --436:     uint8_t index;
                        1176 --437:     uint8_t data;
                        1177 --438:     uint8_t tmp;
                        1178 --439:     r_riic_Error_t ack;
                        1179 --440:     uint32_t base;
                        1180 --441:  
                        1181 --442:     /* only 1 or 2 byte can be read */
                        1182 --443:     if ((Size == 0) || (Size > 2))

                                                                      Page 21
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
000002fc 235f2100       1183 	ld.w	32[sp],r11
00000300 e059           1184 	cmp	zero,r11
00000302 d205*          1185 	be	.L1169
00000304 235f2100       1186 	ld.w	32[sp],r11
00000308 625a           1187 	cmp	2,r11
0000030a c305*          1188 	bnh	.L1168
                        1189 .L1169:
                        1190 --444:     {
                        1191 --445:         return R_RIIC_ERR_NG;
                        1192 --line445
                        1193 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.35::
                        1194 .LDWlin35:
0000030c 0152           1195 	mov	1,r10
0000030e 80071801*      1196 	br	.L1166
                        1197 .L1168:
                        1198 --446:     }
                        1199 --447:  
                        1200 --448:     /* index for the read data buffer pointer */
                        1201 --449:     index = 0;
                        1202 --line449
                        1203 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.36::
                        1204 .LDWlin36:
00000312 00e2           1205 	mov	0,r28
                        1206 --450:    
                        1207 --451:     /* transmit in master mode */
                        1208 --452:     R_RIIC_Master_start_condition(Unit);
00000314 1b30           1209 	mov	r27,r6
                        1210 	jarl	_R_RIIC_Master_start_condition,lp
                        1210 <EXPANSION BEGIN>
                        1210 jarl22 _R_RIIC_Master_start_condition , lp 
00000316 bfff5cfe*      1210 <EXPANSION END>
                        1211 --453:     
                        1212 --454:     /* send the slave address */
                        1213 --455:     data = SlaveAddress;
                        1214 --line455
                        1215 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.37::
                        1216 .LDWlin37:
0000031a a35f0100       1217 	ld.bu	1[sp],r11
0000031e 435f0000       1218 	st.b	r11,0[sp]
                        1219 --456:     ack = R_RIIC_Slave_address_send(Unit, &data);
00000322 1b30           1220 	mov	r27,r6
00000324 233e0000       1221 	movea	0,sp,r7
                        1222 	jarl	_R_RIIC_Slave_address_send,lp
                        1222 <EXPANSION BEGIN>
                        1222 jarl22 _R_RIIC_Slave_address_send , lp 
00000328 bfff3cff*      1222 <EXPANSION END>
0000032c 0ac8           1223 	mov	r10,r25
                        1224 --457:    
                        1225 --458:     /* send the MSB internal address */
                        1226 --459:     data = (InternalAddress >> 8u) & 0xFFu;
                        1227 --line459
                        1228 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.38::
                        1229 .LDWlin38:
0000032e e30f0300       1230 	ld.hu	2[sp],r1
00000332 a80a           1231 	sar	8,r1
00000334 8100           1232 	zxb	r1
00000336 430f0000       1233 	st.b	r1,0[sp]
                        1234 --460:     R_RIIC_data_send(Unit, &data);
0000033a 1b30           1235 	mov	r27,r6
0000033c 233e0000       1236 	movea	0,sp,r7
                        1237 	jarl	_R_RIIC_data_send,lp

                                                                      Page 22
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1237 <EXPANSION BEGIN>
                        1237 jarl22 _R_RIIC_data_send , lp 
00000340 bfffdafd*      1237 <EXPANSION END>
                        1238 --461:     
                        1239 --462:     /* send the LSB internal address */
                        1240 --463:     data = InternalAddress & 0xFFu;
                        1241 --line463
                        1242 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.39::
                        1243 .LDWlin39:
00000344 e35f0300       1244 	ld.hu	2[sp],r11
00000348 0b08           1245 	mov	r11,r1
0000034a 8100           1246 	zxb	r1
0000034c 430f0000       1247 	st.b	r1,0[sp]
                        1248 --464:     R_RIIC_data_send(Unit, &data);
00000350 1b30           1249 	mov	r27,r6
00000352 233e0000       1250 	movea	0,sp,r7
                        1251 	jarl	_R_RIIC_data_send,lp
                        1251 <EXPANSION BEGIN>
                        1251 jarl22 _R_RIIC_data_send , lp 
00000356 bfffc4fd*      1251 <EXPANSION END>
                        1252 --466:     /* repeated start condition */
                        1253 --467:     R_RIIC_Master_stop_condition(Unit, &data);
                        1254 --line467
                        1255 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.40::
                        1256 .LDWlin40:
0000035a 1b30           1257 	mov	r27,r6
0000035c 233e0000       1258 	movea	0,sp,r7
                        1259 	jarl	_R_RIIC_Master_stop_condition,lp
                        1259 <EXPANSION BEGIN>
                        1259 jarl22 _R_RIIC_Master_stop_condition , lp 
00000360 bfff74fe*      1259 <EXPANSION END>
                        1260 --469:     /* transmit in master mode */
                        1261 --470:     R_RIIC_Master_start_condition(Unit);
                        1262 --line470
                        1263 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.41::
                        1264 .LDWlin41:
00000364 1b30           1265 	mov	r27,r6
                        1266 	jarl	_R_RIIC_Master_start_condition,lp
                        1266 <EXPANSION BEGIN>
                        1266 jarl22 _R_RIIC_Master_start_condition , lp 
00000366 bfff0cfe*      1266 <EXPANSION END>
                        1267 --472:     data = SlaveAddress + 1;   /* Slave Address + 1 for read */
                        1268 --line472
                        1269 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.42::
                        1270 .LDWlin42:
0000036a a35f0100       1271 	ld.bu	1[sp],r11
0000036e 0b0e0100       1272 	addi	1,r11,r1
00000372 430f0000       1273 	st.b	r1,0[sp]
                        1274 --473:    
                        1275 --474:     base = r_riic_Dev[Unit].BaseAddr;
00000376 1bf0           1276 	mov	r27,ep
00000378 c2f2           1277 	shl	2,ep
0000037a 2e0600000000*  1278 	mov	_r_riic_Dev,r14
00000380 cef1           1279 	add	r14,ep
00000382 00ed           1280 	sld.w	0[ep],r29
                        1281 --475:     
                        1282 --476:     while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_TDRE) == 0u) 
                        1283 .L1172:
                        1284 --477:     {
00000384 9d0f2500       1285 	ld.bu	36[r29],r1
00000388 880a           1286 	shr	8,r1

                                                                      Page 23
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
0000038a d9fd*          1287 	bnl	.L1172
                        1288 --478:         /* Waiting TDRE empty */
                        1289 --479:     }
                        1290 --480:     
                        1291 --481:     R_RIIC_WRITE_REG(8, (base + R_RIIC_DRT), data);      /* send data */
                        1292 --line481
                        1293 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.43::
                        1294 .LDWlin43:
0000038c 830f0100       1295 	ld.bu	0[sp],r1
00000390 5d0f3c00       1296 	st.b	r1,60[r29]
                        1297 --482:     
                        1298 --483:     while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u) 
                        1299 .L1175:
                        1300 --484:     {
00000394 9d0f2500       1301 	ld.bu	36[r29],r1
00000398 860a           1302 	shr	6,r1
0000039a d9fd*          1303 	bnl	.L1175
                        1304 --485:         /* Waiting receive */
                        1305 --486:     }
                        1306 --487:     
                        1307 --488:     if((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_NACKF) == 0u) 
                        1308 --line488
                        1309 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.44::
                        1310 .LDWlin44:
0000039c 9d0f2500       1311 	ld.bu	36[r29],r1
000003a0 850a           1312 	shr	5,r1
000003a2 b105*          1313 	bl	.L1178
                        1314 --489:     {
                        1315 --490:         ack = R_RIIC_ERR_OK;
                        1316 --line490
                        1317 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.45::
                        1318 .LDWlin45:
000003a4 00ca           1319 	mov	0,r25
000003a6 a505*          1320 	br	.L1180
                        1321 .L1178:
                        1322 --491:     }
                        1323 --492:     else
                        1324 --493:     {
                        1325 --494:         ack = R_RIIC_ERR_NG;
                        1326 --line494
                        1327 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.46::
                        1328 .LDWlin46:
000003a8 01ca           1329 	mov	1,r25
                        1330 .L1180:
                        1331 --495:     }
                        1332 --497:     if(ack == R_RIIC_ERR_OK)
000003aa e0c9           1333 	cmp	zero,r25
000003ac fa35*          1334 	bne	.L1181
                        1335 --498:     {
                        1336 --499:         /* set wait = 1 */
                        1337 --500:         tmp = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));
                        1338 --line500
                        1339 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.47::
                        1340 .LDWlin47:
000003ae 9dd71100       1341 	ld.bu	16[r29],r26
                        1342 --501:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), (tmp | 0x40u));  
000003b2 9a0e4000       1343 	ori	64,r26,r1
000003b6 5d0f1000       1344 	st.b	r1,16[r29]
                        1345 --503:         /* dummy read */
                        1346 --504:         R_RIIC_READ_REG(8, (base + R_RIIC_DRR));    
000003ba 9d0f4100       1347 	ld.bu	64[r29],r1

                                                                      Page 24
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1348 --506:         while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u) 
                        1349 .L1183:
                        1350 --507:         {
000003be 9d0f2500       1351 	ld.bu	36[r29],r1
000003c2 860a           1352 	shr	6,r1
000003c4 d9fd*          1353 	bnl	.L1183
                        1354 --508:         }
                        1355 --509:         
                        1356 --510:         /* do an extra read byte if required */ 
                        1357 --511:         if(2 == Size)
                        1358 --line511
                        1359 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.48::
                        1360 .LDWlin48:
000003c6 235f2100       1361 	ld.w	32[sp],r11
000003ca 625a           1362 	cmp	2,r11
000003cc ea0d*          1363 	bne	.L1186
                        1364 --512:         {    
                        1365 --513:             /* receive data read */
                        1366 --514:             Rdata[index] = R_RIIC_READ_REG(8, (base + R_RIIC_DRR));        
                        1367 --line514
                        1368 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.49::
                        1369 .LDWlin49:
000003ce 235f0500       1370 	ld.w	4[sp],r11
000003d2 9d0f4100       1371 	ld.bu	64[r29],r1
000003d6 1cf0           1372 	mov	r28,ep
000003d8 cbf1           1373 	add	r11,ep
000003da 800b           1374 	sst.b	r1,0[ep]
                        1375 --515:             index++; 
000003dc 41e2           1376 	add	1,r28
000003de 9c00           1377 	zxb	r28
                        1378 --516:             while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u) 
                        1379 .L1188:
                        1380 --517:             {
000003e0 9d0f2500       1381 	ld.bu	36[r29],r1
000003e4 860a           1382 	shr	6,r1
000003e6 d9fd*          1383 	bnl	.L1188
                        1384 .L1186:
                        1385 --518:             }
                        1386 --519:         }
                        1387 --521:         /* set RDRFS=1 */
                        1388 --522:         tmp = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));
                        1389 --line522
                        1390 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.50::
                        1391 .LDWlin50:
000003e8 9dd71100       1392 	ld.bu	16[r29],r26
                        1393 --523:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), (tmp | 0x20u));  
000003ec 9a0e2000       1394 	ori	32,r26,r1
000003f0 5d0f1000       1395 	st.b	r1,16[r29]
                        1396 --525:         /* set ACKBT=1 */
                        1397 --526:         tmp = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));
000003f4 9dd71100       1398 	ld.bu	16[r29],r26
                        1399 --527:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), (tmp | 0x08u));  
000003f8 9a0e0800       1400 	ori	8,r26,r1
000003fc 5d0f1000       1401 	st.b	r1,16[r29]
                        1402 --529:         /* receive data read */
                        1403 --530:         Rdata[index] = R_RIIC_READ_REG(8, (base + R_RIIC_DRR));
00000400 235f0500       1404 	ld.w	4[sp],r11
00000404 9d0f4100       1405 	ld.bu	64[r29],r1
00000408 1cf0           1406 	mov	r28,ep
0000040a cbf1           1407 	add	r11,ep
0000040c 800b           1408 	sst.b	r1,0[ep]

                                                                      Page 25
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1409 --531:         index++; 
0000040e 41e2           1410 	add	1,r28
00000410 9c00           1411 	zxb	r28
                        1412 --532:         
                        1413 --533:         while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u) 
                        1414 .L1191:
                        1415 --534:         {
00000412 9d0f2500       1416 	ld.bu	36[r29],r1
00000416 860a           1417 	shr	6,r1
00000418 d9fd*          1418 	bnl	.L1191
                        1419 .L1181:
                        1420 --535:         }
                        1421 --536:     }
                        1422 --538:     R_RIIC_Master_stop_condition(Unit, &data);
                        1423 --line538
                        1424 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.51::
                        1425 .LDWlin51:
0000041a 1b30           1426 	mov	r27,r6
0000041c 233e0000       1427 	movea	0,sp,r7
                        1428 	jarl	_R_RIIC_Master_stop_condition,lp
                        1428 <EXPANSION BEGIN>
                        1428 jarl22 _R_RIIC_Master_stop_condition , lp 
00000420 bfffb4fd*      1428 <EXPANSION END>
                        1429 --539:    
                        1430 --540:     return ack;
                        1431 --line540
                        1432 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.52::
                        1433 .LDWlin52:
00000424 1950           1434 	mov	r25,r10
                        1435 .L1166:
                        1436 --	    .ef
                        1437 .LDW53:
00000426 4406ff70       1438 	dispose	2,{r25,r26,r27,r28,r29,r31},[lp]
                        1439 	.type	_R_RIIC_receive_from_slave16b,@function
                        1440 	.size	_R_RIIC_receive_from_slave16b,.-_R_RIIC_receive_from_slave16b
                        1441 	.align	2
                        1442 .LDW63:
                        1443 --_index	r28	local
                        1444 --_data	0[sp]	local
                        1445 --_tmp	r26	local
                        1446 --_ack	r25	local
                        1447 --_base	r29	local
                        1448 
                        1449 --_Unit	r27	param
                        1450 --_SlaveAddress	1[sp]	param
                        1451 --_InternalAddress	2[sp]	param
                        1452 --_Rdata	4[sp]	param
                        1453 --_Size	32[sp]	param
                        1454 
                        1455 	.section ".bss","awb"
                        1456 .L1417:
                        1457 	.type	.L1417,@object
                        1458 	.size	.L1417,0
                        1459 	.data
                        1460 	.text
                        1461 
                        1462 --541: }
                        1463 
                        1464 --544: /*******************************************************************************
                        1465 --545:   Function: R_RIIC_receive_from_slave8b
                        1466 --547:   Read 1 or 2 bytes from IIC slave with a 8bit address.

                                                                      Page 26
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1467 --548:   (note: not all devices may support this format)
                        1468 --550:     <slave address 7bit> <internal address 8 bit> <read 2 bytes>
                        1469 --552:   Parameters:
                        1470 --553:   Unit              - Instance number
                        1471 --554:   SlaveAddress      - slave address 7bit
                        1472 --555:   InternalAddress   - the device's internal addtess (8bit)
                        1473 --556:   Rdata             - buffer to store data read from slave
                        1474 --557:   size              - number of data bytes to be read
                        1475 --559:   Returns:
                        1476 --560:   see: <r_riic_Error_t>
                        1477 --561: */
                        1478 --562: r_riic_Error_t R_RIIC_receive_from_slave8b(uint32_t Unit, uint8_t SlaveAddress, uint8_t InternalAddress, uint8_t *Rdata, uint32_t Size)
                        1479 	.align	2
                        1480 	.align	2
                        1481 	.global	_R_RIIC_receive_from_slave8b
                        1482 _R_RIIC_receive_from_slave8b:
0000042a 8407e170       1483 	prepare	{r25,r26,r27,r28,r29,r31},2
0000042e 634f0500       1484 	st.w	r9,4[sp]
00000432 c866ff00       1485 	andi	255,r8,r12
00000436 43670300       1486 	st.b	r12,3[sp]
0000043a c75eff00       1487 	andi	255,r7,r11
0000043e 435f0200       1488 	st.b	r11,2[sp]
00000442 06d0           1489 	mov	r6,r26
                        1490 --	    .bf
                        1491 .LDW73:
                        1492 --563: {
                        1493 --564:     uint8_t index;    
                        1494 --565:     uint8_t data;
                        1495 --566:     uint8_t tmp;
                        1496 --567:     r_riic_Error_t ack;
                        1497 --568:     uint32_t base;
                        1498 --569:  
                        1499 --570:     /* only 1 or 2 byte can be read */
                        1500 --571:     if ((Size == 0) || (Size > 2))
00000444 235f2100       1501 	ld.w	32[sp],r11
00000448 e059           1502 	cmp	zero,r11
0000044a d205*          1503 	be	.L1565
0000044c 235f2100       1504 	ld.w	32[sp],r11
00000450 625a           1505 	cmp	2,r11
00000452 b305*          1506 	bnh	.L1564
                        1507 .L1565:
                        1508 --572:     {
                        1509 --573:         return R_RIIC_ERR_NG;
                        1510 --line573
                        1511 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.53::
                        1512 .LDWlin53:
00000454 0152           1513 	mov	1,r10
00000456 e57d*          1514 	br	.L1562
                        1515 .L1564:
                        1516 --574:     }
                        1517 --575:     
                        1518 --576:     /* index for the read data buffer pointer */
                        1519 --577:     index = 0;
                        1520 --line577
                        1521 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.54::
                        1522 .LDWlin54:
00000458 00e2           1523 	mov	0,r28
                        1524 --578:     
                        1525 --579:     /* transmit in master mode */
                        1526 --580:     R_RIIC_Master_start_condition(Unit);
0000045a 1a30           1527 	mov	r26,r6

                                                                      Page 27
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1528 	jarl	_R_RIIC_Master_start_condition,lp
                        1528 <EXPANSION BEGIN>
                        1528 jarl22 _R_RIIC_Master_start_condition , lp 
0000045c bfff16fd*      1528 <EXPANSION END>
                        1529 --581:     
                        1530 --582:     /* send the slave address */
                        1531 --583:     data = SlaveAddress;   
                        1532 --line583
                        1533 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.55::
                        1534 .LDWlin55:
00000460 835f0300       1535 	ld.bu	2[sp],r11
00000464 435f0100       1536 	st.b	r11,1[sp]
                        1537 --584:     ack = R_RIIC_Slave_address_send(Unit, &data);
00000468 1a30           1538 	mov	r26,r6
0000046a 233e0100       1539 	movea	1,sp,r7
                        1540 	jarl	_R_RIIC_Slave_address_send,lp
                        1540 <EXPANSION BEGIN>
                        1540 jarl22 _R_RIIC_Slave_address_send , lp 
0000046e bffff6fd*      1540 <EXPANSION END>
00000472 0ac8           1541 	mov	r10,r25
                        1542 --585:     
                        1543 --586:     /* send the MSB internal address */
                        1544 --587:     data = InternalAddress & 0xFFu;
                        1545 --line587
                        1546 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.56::
                        1547 .LDWlin56:
00000474 a35f0300       1548 	ld.bu	3[sp],r11
00000478 435f0100       1549 	st.b	r11,1[sp]
                        1550 --588:     R_RIIC_data_send(Unit, &data);
0000047c 1a30           1551 	mov	r26,r6
0000047e 233e0100       1552 	movea	1,sp,r7
                        1553 	jarl	_R_RIIC_data_send,lp
                        1553 <EXPANSION BEGIN>
                        1553 jarl22 _R_RIIC_data_send , lp 
00000482 bfff98fc*      1553 <EXPANSION END>
                        1554 --589:     
                        1555 --590:     /* repeated start condition */
                        1556 --591:     R_RIIC_Master_stop_condition(Unit, &data);
                        1557 --line591
                        1558 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.57::
                        1559 .LDWlin57:
00000486 1a30           1560 	mov	r26,r6
00000488 233e0100       1561 	movea	1,sp,r7
                        1562 	jarl	_R_RIIC_Master_stop_condition,lp
                        1562 <EXPANSION BEGIN>
                        1562 jarl22 _R_RIIC_Master_stop_condition , lp 
0000048c bfff48fd*      1562 <EXPANSION END>
                        1563 --593:     /* transmit in master mode */
                        1564 --594:     R_RIIC_Master_start_condition(Unit);
                        1565 --line594
                        1566 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.58::
                        1567 .LDWlin58:
00000490 1a30           1568 	mov	r26,r6
                        1569 	jarl	_R_RIIC_Master_start_condition,lp
                        1569 <EXPANSION BEGIN>
                        1569 jarl22 _R_RIIC_Master_start_condition , lp 
00000492 bfffe0fc*      1569 <EXPANSION END>
                        1570 --596:     data = SlaveAddress + 1;   /* Slave Address + 1 for read */
                        1571 --line596
                        1572 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.59::
                        1573 .LDWlin59:

                                                                      Page 28
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
00000496 835f0300       1574 	ld.bu	2[sp],r11
0000049a 0b0e0100       1575 	addi	1,r11,r1
0000049e 430f0100       1576 	st.b	r1,1[sp]
                        1577 --597:    
                        1578 --598:     base = r_riic_Dev[Unit].BaseAddr;
000004a2 1af0           1579 	mov	r26,ep
000004a4 c2f2           1580 	shl	2,ep
000004a6 2e0600000000*  1581 	mov	_r_riic_Dev,r14
000004ac cef1           1582 	add	r14,ep
000004ae 00ed           1583 	sld.w	0[ep],r29
                        1584 --599:     
                        1585 --600:     while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_TDRE) == 0u) 
                        1586 .L1568:
                        1587 --601:     {
000004b0 9d0f2500       1588 	ld.bu	36[r29],r1
000004b4 880a           1589 	shr	8,r1
000004b6 d9fd*          1590 	bnl	.L1568
                        1591 --602:         /* Waiting TDRE empty */
                        1592 --603:     }
                        1593 --604:     
                        1594 --605:     R_RIIC_WRITE_REG(8, (base + R_RIIC_DRT), data);      /* send data */
                        1595 --line605
                        1596 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.60::
                        1597 .LDWlin60:
000004b8 a30f0100       1598 	ld.bu	1[sp],r1
000004bc 5d0f3c00       1599 	st.b	r1,60[r29]
                        1600 --606:     
                        1601 --607:     while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u) 
                        1602 .L1571:
                        1603 --608:     {
000004c0 9d0f2500       1604 	ld.bu	36[r29],r1
000004c4 860a           1605 	shr	6,r1
000004c6 d9fd*          1606 	bnl	.L1571
                        1607 --609:         /* Waiting receive */
                        1608 --610:     }
                        1609 --611:     
                        1610 --612:     if((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_NACKF) == 0u) 
                        1611 --line612
                        1612 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.61::
                        1613 .LDWlin61:
000004c8 9d0f2500       1614 	ld.bu	36[r29],r1
000004cc 850a           1615 	shr	5,r1
000004ce b105*          1616 	bl	.L1574
                        1617 --613:     {
                        1618 --614:         ack = R_RIIC_ERR_OK;
                        1619 --line614
                        1620 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.62::
                        1621 .LDWlin62:
000004d0 00ca           1622 	mov	0,r25
000004d2 a505*          1623 	br	.L1576
                        1624 .L1574:
                        1625 --615:     }
                        1626 --616:     else
                        1627 --617:     {
                        1628 --618:         ack = R_RIIC_ERR_NG;
                        1629 --line618
                        1630 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.63::
                        1631 .LDWlin63:
000004d4 01ca           1632 	mov	1,r25
                        1633 .L1576:
                        1634 --619:     }

                                                                      Page 29
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1635 --621:     if(ack == R_RIIC_ERR_OK)
000004d6 e0c9           1636 	cmp	zero,r25
000004d8 fa35*          1637 	bne	.L1577
                        1638 --622:     {
                        1639 --623:         /* set wait = 1 */
                        1640 --624:         tmp = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));
                        1641 --line624
                        1642 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.64::
                        1643 .LDWlin64:
000004da 9ddf1100       1644 	ld.bu	16[r29],r27
                        1645 --625:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), (tmp | 0x40u));  
000004de 9b0e4000       1646 	ori	64,r27,r1
000004e2 5d0f1000       1647 	st.b	r1,16[r29]
                        1648 --627:         /* dummy read */
                        1649 --628:         R_RIIC_READ_REG(8, (base + R_RIIC_DRR));    
000004e6 9d0f4100       1650 	ld.bu	64[r29],r1
                        1651 --630:         while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u) 
                        1652 .L1579:
                        1653 --631:         {
000004ea 9d0f2500       1654 	ld.bu	36[r29],r1
000004ee 860a           1655 	shr	6,r1
000004f0 d9fd*          1656 	bnl	.L1579
                        1657 --632:         }
                        1658 --633:         
                        1659 --634:         /* do an extra read byte if required */ 
                        1660 --635:         if(2 == Size)
                        1661 --line635
                        1662 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.65::
                        1663 .LDWlin65:
000004f2 235f2100       1664 	ld.w	32[sp],r11
000004f6 625a           1665 	cmp	2,r11
000004f8 ea0d*          1666 	bne	.L1582
                        1667 --636:         {    
                        1668 --637:             /* receive data read */
                        1669 --638:             Rdata[index] = R_RIIC_READ_REG(8, (base + R_RIIC_DRR));        
                        1670 --line638
                        1671 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.66::
                        1672 .LDWlin66:
000004fa 235f0500       1673 	ld.w	4[sp],r11
000004fe 9d0f4100       1674 	ld.bu	64[r29],r1
00000502 1cf0           1675 	mov	r28,ep
00000504 cbf1           1676 	add	r11,ep
00000506 800b           1677 	sst.b	r1,0[ep]
                        1678 --639:             index++; 
00000508 41e2           1679 	add	1,r28
0000050a 9c00           1680 	zxb	r28
                        1681 --640:  
                        1682 --641:             while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u) 
                        1683 .L1584:
                        1684 --642:             {
0000050c 9d0f2500       1685 	ld.bu	36[r29],r1
00000510 860a           1686 	shr	6,r1
00000512 d9fd*          1687 	bnl	.L1584
                        1688 .L1582:
                        1689 --643:             }
                        1690 --644:         }
                        1691 --646:         /* set RDRFS=1 */
                        1692 --647:         tmp = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));
                        1693 --line647
                        1694 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.67::
                        1695 .LDWlin67:

                                                                      Page 30
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
00000514 9ddf1100       1696 	ld.bu	16[r29],r27
                        1697 --648:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), (tmp | 0x20u));  
00000518 9b0e2000       1698 	ori	32,r27,r1
0000051c 5d0f1000       1699 	st.b	r1,16[r29]
                        1700 --650:         /* set ACKBT=1 */
                        1701 --651:         tmp = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));
00000520 9ddf1100       1702 	ld.bu	16[r29],r27
                        1703 --652:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), (tmp | 0x08u));  
00000524 9b0e0800       1704 	ori	8,r27,r1
00000528 5d0f1000       1705 	st.b	r1,16[r29]
                        1706 --654:         /* receive data read */
                        1707 --655:         Rdata[index] = R_RIIC_READ_REG(8, (base + R_RIIC_DRR));
0000052c 235f0500       1708 	ld.w	4[sp],r11
00000530 9d0f4100       1709 	ld.bu	64[r29],r1
00000534 1cf0           1710 	mov	r28,ep
00000536 cbf1           1711 	add	r11,ep
00000538 800b           1712 	sst.b	r1,0[ep]
                        1713 --656:         index++; 
0000053a 41e2           1714 	add	1,r28
0000053c 9c00           1715 	zxb	r28
                        1716 --657:        
                        1717 --658:         while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u) 
                        1718 .L1587:
                        1719 --659:         {
0000053e 9d0f2500       1720 	ld.bu	36[r29],r1
00000542 860a           1721 	shr	6,r1
00000544 d9fd*          1722 	bnl	.L1587
                        1723 .L1577:
                        1724 --660:         }
                        1725 --661:     }
                        1726 --663:     R_RIIC_Master_stop_condition(Unit, &data);
                        1727 --line663
                        1728 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.68::
                        1729 .LDWlin68:
00000546 1a30           1730 	mov	r26,r6
00000548 233e0100       1731 	movea	1,sp,r7
                        1732 	jarl	_R_RIIC_Master_stop_condition,lp
                        1732 <EXPANSION BEGIN>
                        1732 jarl22 _R_RIIC_Master_stop_condition , lp 
0000054c bfff88fc*      1732 <EXPANSION END>
                        1733 --664:    
                        1734 --665:     return ack;
                        1735 --line665
                        1736 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.69::
                        1737 .LDWlin69:
00000550 1950           1738 	mov	r25,r10
                        1739 .L1562:
                        1740 --	    .ef
                        1741 .LDW83:
00000552 4406ff70       1742 	dispose	2,{r25,r26,r27,r28,r29,r31},[lp]
                        1743 	.type	_R_RIIC_receive_from_slave8b,@function
                        1744 	.size	_R_RIIC_receive_from_slave8b,.-_R_RIIC_receive_from_slave8b
                        1745 	.align	2
                        1746 .LDW93:
                        1747 --_index	r28	local
                        1748 --_data	1[sp]	local
                        1749 --_tmp	r27	local
                        1750 --_ack	r25	local
                        1751 --_base	r29	local
                        1752 
                        1753 --_Unit	r26	param

                                                                      Page 31
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1754 --_SlaveAddress	2[sp]	param
                        1755 --_InternalAddress	3[sp]	param
                        1756 --_Rdata	4[sp]	param
                        1757 --_Size	32[sp]	param
                        1758 
                        1759 	.section ".bss","awb"
                        1760 .L1809:
                        1761 	.type	.L1809,@object
                        1762 	.size	.L1809,0
                        1763 	.data
                        1764 	.text
                        1765 
                        1766 --666: }
                        1767 
                        1768 --667: r_riic_Error_t W_RIIC_receive_from_slave(uint8_t u8unit, uint8_t u8slaveAddress, uint8_t *prdata, uint8_t u8size)
                        1769 	.align	2
                        1770 	.align	2
                        1771 	.global	_W_RIIC_receive_from_slave
                        1772 _W_RIIC_receive_from_slave:
00000556 8407e170       1773 	prepare	{r25,r26,r27,r28,r29,r31},2
0000055a 63470500       1774 	st.w	r8,4[sp]
0000055e c966ff00       1775 	andi	255,r9,r12
00000562 43670300       1776 	st.b	r12,3[sp]
00000566 c75eff00       1777 	andi	255,r7,r11
0000056a 435f0200       1778 	st.b	r11,2[sp]
0000056e c6ceff00       1779 	andi	255,r6,r25
                        1780 --	    .bf
                        1781 .LDW04:
                        1782 --668: {
                        1783 --669:     uint8_t u8counter;
                        1784 --670:     uint8_t data;
                        1785 --671:     uint8_t tmp;
                        1786 --672:     r_riic_Error_t ack;
                        1787 --673:     uint32_t base;
                        1788 --674:     
                        1789 --675:     /* transmit in master mode */
                        1790 --676:     R_RIIC_Master_start_condition(u8unit);
00000572 1930           1791 	mov	r25,r6
                        1792 	jarl	_R_RIIC_Master_start_condition,lp
                        1792 <EXPANSION BEGIN>
                        1792 jarl22 _R_RIIC_Master_start_condition , lp 
00000574 bffffefb*      1792 <EXPANSION END>
                        1793 --677:     
                        1794 --678:     /* send the slave address */
                        1795 --679:     data = u8slaveAddress;
                        1796 --line679
                        1797 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.70::
                        1798 .LDWlin70:
00000578 835f0300       1799 	ld.bu	2[sp],r11
0000057c 435f0100       1800 	st.b	r11,1[sp]
                        1801 --680:     ack = R_RIIC_Slave_address_send(u8unit, &data);
00000580 1930           1802 	mov	r25,r6
00000582 233e0100       1803 	movea	1,sp,r7
                        1804 	jarl	_R_RIIC_Slave_address_send,lp
                        1804 <EXPANSION BEGIN>
                        1804 jarl22 _R_RIIC_Slave_address_send , lp 
00000586 bfffdefc*      1804 <EXPANSION END>
0000058a 0ad0           1805 	mov	r10,r26
                        1806 --681:     
                        1807 --682:     /* repeated start condition */
                        1808 --683:     R_RIIC_Master_stop_condition(u8unit, &data);

                                                                      Page 32
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1809 --line683
                        1810 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.71::
                        1811 .LDWlin71:
0000058c 1930           1812 	mov	r25,r6
0000058e 233e0100       1813 	movea	1,sp,r7
                        1814 	jarl	_R_RIIC_Master_stop_condition,lp
                        1814 <EXPANSION BEGIN>
                        1814 jarl22 _R_RIIC_Master_stop_condition , lp 
00000592 bfff42fc*      1814 <EXPANSION END>
                        1815 --685:     /* transmit in master mode */
                        1816 --686:     R_RIIC_Master_start_condition(u8unit);
                        1817 --line686
                        1818 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.72::
                        1819 .LDWlin72:
00000596 1930           1820 	mov	r25,r6
                        1821 	jarl	_R_RIIC_Master_start_condition,lp
                        1821 <EXPANSION BEGIN>
                        1821 jarl22 _R_RIIC_Master_start_condition , lp 
00000598 bfffdafb*      1821 <EXPANSION END>
                        1822 --688:     data = u8slaveAddress + 1;   /* Slave Address + 1 for read */
                        1823 --line688
                        1824 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.73::
                        1825 .LDWlin73:
0000059c 835f0300       1826 	ld.bu	2[sp],r11
000005a0 0b0e0100       1827 	addi	1,r11,r1
000005a4 430f0100       1828 	st.b	r1,1[sp]
                        1829 --689:    
                        1830 --690:     base = r_riic_Dev[u8unit].BaseAddr;
000005a8 19f0           1831 	mov	r25,ep
000005aa c2f2           1832 	shl	2,ep
000005ac 2e0600000000*  1833 	mov	_r_riic_Dev,r14
000005b2 cef1           1834 	add	r14,ep
000005b4 00ed           1835 	sld.w	0[ep],r29
                        1836 --691:     
                        1837 --692:     while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_TDRE) == 0u);
                        1838 .L1950:
000005b6 9d0f2500       1839 	ld.bu	36[r29],r1
000005ba 880a           1840 	shr	8,r1
000005bc d9fd*          1841 	bnl	.L1950
                        1842 --693:     
                        1843 --694:     R_RIIC_WRITE_REG(8, (base + R_RIIC_DRT), data);      /* send data */
                        1844 --line694
                        1845 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.74::
                        1846 .LDWlin74:
000005be a30f0100       1847 	ld.bu	1[sp],r1
000005c2 5d0f3c00       1848 	st.b	r1,60[r29]
                        1849 --695:     
                        1850 --696:     while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u);
                        1851 .L1953:
000005c6 9d0f2500       1852 	ld.bu	36[r29],r1
000005ca 860a           1853 	shr	6,r1
000005cc d9fd*          1854 	bnl	.L1953
                        1855 --697:     
                        1856 --698:     if((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_NACKF) == 0u) 
                        1857 --line698
                        1858 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.75::
                        1859 .LDWlin75:
000005ce 9d0f2500       1860 	ld.bu	36[r29],r1
000005d2 850a           1861 	shr	5,r1
000005d4 b105*          1862 	bl	.L1956
                        1863 --699:     {

                                                                      Page 33
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
                        1864 --700:         ack = R_RIIC_ERR_OK;
                        1865 --line700
                        1866 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.76::
                        1867 .LDWlin76:
000005d6 00d2           1868 	mov	0,r26
000005d8 a505*          1869 	br	.L1958
                        1870 .L1956:
                        1871 --701:     }
                        1872 --702:     else
                        1873 --703:     {
                        1874 --704:         ack = R_RIIC_ERR_NG;
                        1875 --line704
                        1876 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.77::
                        1877 .LDWlin77:
000005da 01d2           1878 	mov	1,r26
                        1879 .L1958:
                        1880 --705:     }
                        1881 --707:     if(ack == R_RIIC_ERR_OK)
000005dc e0d1           1882 	cmp	zero,r26
000005de ba3d*          1883 	bne	.L1959
                        1884 --708:     {
                        1885 --709:         /* set wait = 1 */
                        1886 --710:         tmp = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));
                        1887 --line710
                        1888 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.78::
                        1889 .LDWlin78:
000005e0 9ddf1100       1890 	ld.bu	16[r29],r27
                        1891 --711:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), (tmp | 0x40u));
000005e4 9b0e4000       1892 	ori	64,r27,r1
000005e8 5d0f1000       1893 	st.b	r1,16[r29]
                        1894 --713:         /* dummy read */
                        1895 --714:         R_RIIC_READ_REG(8, (base + R_RIIC_DRR));    
000005ec 9d0f4100       1896 	ld.bu	64[r29],r1
                        1897 --716:         while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u);
                        1898 .L1961:
000005f0 9d0f2500       1899 	ld.bu	36[r29],r1
000005f4 860a           1900 	shr	6,r1
000005f6 d9fd*          1901 	bnl	.L1961
                        1902 --717:         
                        1903 --718:         /* do an extra read byte if required */ 
                        1904 --719:         for( u8counter = 0; u8counter < u8size - 2; u8counter++)
                        1905 --line719
                        1906 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.79::
                        1907 .LDWlin79:
000005f8 00e2           1908 	mov	0,r28
000005fa e50d*          1909 	br	.L1967
                        1910 .L1966:
                        1911 --720:         {    
                        1912 --721:             /* receive data read */
                        1913 --722:             prdata[u8counter] = R_RIIC_READ_REG(8, (base + R_RIIC_DRR));
                        1914 --line722
                        1915 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.80::
                        1916 .LDWlin80:
000005fc 235f0500       1917 	ld.w	4[sp],r11
00000600 9d0f4100       1918 	ld.bu	64[r29],r1
00000604 1cf0           1919 	mov	r28,ep
00000606 cbf1           1920 	add	r11,ep
00000608 800b           1921 	sst.b	r1,0[ep]
                        1922 --723:             while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u);
                        1923 .L1968:
0000060a 9d0f2500       1924 	ld.bu	36[r29],r1

                                                                      Page 34
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
0000060e 860a           1925 	shr	6,r1
00000610 d9fd*          1926 	bnl	.L1968
                        1927 --line719
                        1928 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.81::
                        1929 .LDWlin81:
00000612 41e2           1930 	add	1,r28
00000614 9c00           1931 	zxb	r28
                        1932 .L1967:
00000616 a35f0300       1933 	ld.bu	3[sp],r11
0000061a 0b0efeff       1934 	addi	-2,r11,r1
0000061e e1e1           1935 	cmp	r1,r28
00000620 e6ed*          1936 	blt	.L1966
                        1937 --724:         }
                        1938 --726:         /* set RDRFS=1 */
                        1939 --727:         tmp = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));
                        1940 --line727
                        1941 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.82::
                        1942 .LDWlin82:
00000622 9ddf1100       1943 	ld.bu	16[r29],r27
                        1944 --728:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), (tmp | 0x20u));  
00000626 9b0e2000       1945 	ori	32,r27,r1
0000062a 5d0f1000       1946 	st.b	r1,16[r29]
                        1947 --730:         /* set ACKBT=1 */
                        1948 --731:         tmp = R_RIIC_READ_REG(8, (base + R_RIIC_MR3));
0000062e 9ddf1100       1949 	ld.bu	16[r29],r27
                        1950 --732:         R_RIIC_WRITE_REG(8, (base + R_RIIC_MR3), (tmp | 0x08u));  
00000632 9b0e0800       1951 	ori	8,r27,r1
00000636 5d0f1000       1952 	st.b	r1,16[r29]
                        1953 --734:         /* receive data read */
                        1954 --735:         prdata[u8counter] = R_RIIC_READ_REG(8, (base + R_RIIC_DRR));
0000063a 235f0500       1955 	ld.w	4[sp],r11
0000063e 9d0f4100       1956 	ld.bu	64[r29],r1
00000642 1cf0           1957 	mov	r28,ep
00000644 cbf1           1958 	add	r11,ep
00000646 800b           1959 	sst.b	r1,0[ep]
                        1960 --736:         u8counter++; 
00000648 41e2           1961 	add	1,r28
0000064a 9c00           1962 	zxb	r28
                        1963 --737:        
                        1964 --738:         while((R_RIIC_READ_REG(8, (base + R_RIIC_SR2)) & R_RIIC_SR2_RDRF) == 0u);
                        1965 .L1971:
0000064c 9d0f2500       1966 	ld.bu	36[r29],r1
00000650 860a           1967 	shr	6,r1
00000652 d9fd*          1968 	bnl	.L1971
                        1969 .L1959:
                        1970 --739:     }
                        1971 --741:     R_RIIC_Master_stop_condition(u8unit, &data);
                        1972 --line741
                        1973 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.83::
                        1974 .LDWlin83:
00000654 1930           1975 	mov	r25,r6
00000656 233e0100       1976 	movea	1,sp,r7
                        1977 	jarl	_R_RIIC_Master_stop_condition,lp
                        1977 <EXPANSION BEGIN>
                        1977 jarl22 _R_RIIC_Master_stop_condition , lp 
0000065a bfff7afb*      1977 <EXPANSION END>
                        1978 --742:    
                        1979 --743:     return ack;
                        1980 --line743
                        1981 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main.84::
                        1982 .LDWlin84:

                                                                      Page 35
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000pvc1.si
0000065e 1a50           1983 	mov	r26,r10
                        1984 --	    .ef
                        1985 .LDW14:
00000660 4406ff70       1986 	dispose	2,{r25,r26,r27,r28,r29,r31},[lp]
                        1987 	.type	_W_RIIC_receive_from_slave,@function
                        1988 	.size	_W_RIIC_receive_from_slave,.-_W_RIIC_receive_from_slave
                        1989 	.align	2
                        1990 .LDW24:
                        1991 --_u8counter	r28	local
                        1992 --_data	1[sp]	local
                        1993 --_tmp	r27	local
                        1994 --_ack	r26	local
                        1995 --_base	r29	local
                        1996 
                        1997 --_u8unit	r25	param
                        1998 --_u8slaveAddress	2[sp]	param
                        1999 --_prdata	4[sp]	param
                        2000 --_u8size	3[sp]	param
                        2001 
                        2002 	.section ".bss","awb"
                        2003 .L2171:
                        2004 	.type	.L2171,@object
                        2005 	.size	.L2171,0
                        2006 	.data
                        2007 	.text
                        2008 
                        2009 --744: }
                        2010 	.align	2
                        2011 
                        2012 	.data
                        2013 	.section ".bss","awb"
                        2014 	.align	4
                        2015 	.align	4
                        2016 	.global	_r_riic_Dev
00000000 000000000000   2017 _r_riic_Dev:	.space	8
00000006 0000 
                        2018 	.type	_r_riic_Dev,@object
                        2019 	.size	_r_riic_Dev,8
                        2020 	.data
                        2021 	.ghsnote version,15
                        2022 	.ghsnote tools,3
                        2023 	.ghsnote options,144
                        2024 	.text
                        2025 	.align	2
                        2026 ..eof.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_riic_main...43.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs..5BC5D026..0::
                        2027 .rh850_flags REGMODE22,DATA_ALIGN8,GP_FIX,EP_NONFIX,TP_FIX,REG2_RESERVE,G3M
