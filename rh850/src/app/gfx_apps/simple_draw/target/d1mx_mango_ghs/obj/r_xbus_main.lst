                                                                      Page 1
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
Command Line: C:\GHS\V800.V2014.1.7\comp_201417\ease850.exe -w -elf -b0 -I../../../../../app/common/dhd -I../../../../../app/gfx_apps/simple_draw/src -I../../../../../app/gfx_apps/simple_draw/lib -I../../../../../bsp/board//config -I../../../../../bsp/board//src/gfx -I../../../../../bsp/board//src/hmi -I../../../../../bsp/board//src/stdio -I../../../../../bsp/board/d1mx_mango/config -I../../../../../bsp/board/d1mx_mango/src -I../../../../../bsp/board/d1mx_mango/src/gfx -I../../../../../bsp/board/d1mx_mango/src/hmi -I../../../../../bsp/board/d1mx_mango/src/stdio -I../../../../../bsp/gfx/lib -I../../../../../bsp/gfx/src -I../../../../../bsp/hmi/lib -I../../../../../bsp/hmi/src -I../../../../../bsp/lib -I../../../../../bsp/stdio/lib -I../../../../../bsp/stdio/src -I../../../../../cdi/lib -I../../../../../cdi/src -I../../../../../compiler/rh850_ghs/inc -I../../../../../device/d1mx/lib -I../../../../../device/d1mx/macro_cfg -I../../../../../device/d1mx/macro_cfg/csisw -I../../../../../device/d1mx/macro_cfg/davehd -I../../../../../device/d1mx/macro_cfg/ddb -I../../../../../device/d1mx/macro_cfg/drw2d -I../../../../../device/d1mx/macro_cfg/gfxbus -I../../../../../device/d1mx/macro_cfg/gpio -I../../../../../device/d1mx/macro_cfg/hypb -I../../../../../device/d1mx/macro_cfg/hypdb -I../../../../../device/d1mx/macro_cfg/jcua -I../../../../../device/d1mx/macro_cfg/nfmabare -I../../../../../device/d1mx/macro_cfg/octa -I../../../../../device/d1mx/macro_cfg/octacdb -I../../../../../device/d1mx/macro_cfg/ostm -I../../../../../device/d1mx/macro_cfg/pbg -I../../../../../device/d1mx/macro_cfg/riic -I../../../../../device/d1mx/macro_cfg/sfcdb -I../../../../../device/d1mx/macro_cfg/sfma -I../../../../../device/d1mx/macro_cfg/spea -I../../../../../device/d1mx/macro_cfg/tauj -I../../../../../device/d1mx/macro_cfg/tick -I../../../../../device/d1mx/macro_cfg/vdce -I../../../../../device/d1mx/macro_cfg/vowe -I../../../../../device/d1mx/macro_cfg/wm -I../../../../../device/d1mx/macro_cfg/xbus -I../../../../../device/d1mx/src/dev -I../../../../../device/d1mx/src/dhd -I../../../../../device/d1mx/src/hypb -I../../../../../device/d1mx/src/jcua -I../../../../../device/d1mx/src/nfmabare -I../../../../../device/d1mx/src/octa -I../../../../../device/d1mx/src/rh850_ghs -I../../../../../device/d1mx/src/vowe -I../../../../../device/d1x_common/macro_cfg -I../../../../../device/d1x_common/macro_cfg/csisw -I../../../../../device/d1x_common/macro_cfg/davehd -I../../../../../device/d1x_common/macro_cfg/ddb -I../../../../../device/d1x_common/macro_cfg/drw2d -I../../../../../device/d1x_common/macro_cfg/gfxbus -I../../../../../device/d1x_common/macro_cfg/gpio -I../../../../../device/d1x_common/macro_cfg/hypb -I../../../../../device/d1x_common/macro_cfg/hypdb -I../../../../../device/d1x_common/macro_cfg/jcua -I../../../../../device/d1x_common/macro_cfg/nfmabare -I../../../../../device/d1x_common/macro_cfg/octa -I../../../../../device/d1x_common/macro_cfg/octacdb -I../../../../../device/d1x_common/macro_cfg/ostm -I../../../../../device/d1x_common/macro_cfg/pbg -I../../../../../device/d1x_common/macro_cfg/riic -I../../../../../device/d1x_common/macro_cfg/sfcdb -I../../../../../device/d1x_common/macro_cfg/sfma -I../../../../../device/d1x_common/macro_cfg/spea -I../../../../../device/d1x_common/macro_cfg/tauj -I../../../../../device/d1x_common/macro_cfg/tick -I../../../../../device/d1x_common/macro_cfg/vdce -I../../../../../device/d1x_common/macro_cfg/vowe -I../../../../../device/d1x_common/macro_cfg/wm -I../../../../../device/d1x_common/macro_cfg/xbus -I../../../../../device/d1x_common/src/csisw -I../../../../../device/d1x_common/src/ddb -I../../../../../device/d1x_common/src/dev -I../../../../../device/d1x_common/src/gfxbus -I../../../../../device/d1x_common/src/gpio -I../../../../../device/d1x_common/src/ostm -I../../../../../device/d1x_common/src/pbg -I../../../../../device/d1x_common/src/riic -I../../../../../device/d1x_common/src/sfma -I../../../../../device/d1x_common/src/spea -I../../../../../device/d1x_common/src/tauj -I../../../../../device/d1x_common/src/tick -I../../../../../device/d1x_common/src/vdce -I../../../../../device/d1x_common/src/wm -I../../../../../device/d1x_common/src/xbus -I../../../../../device/lib -I../../../../../macro/bus/pbg/lib -I../../../../../macro/bus/pbg/src -I../../../../../macro/csi/csisw/lib -I../../../../../macro/csi/csisw/src -I../../../../../macro/drw2d/lib -I../../../../../macro/drw2d/platform/davehd -I../../../../../macro/drw2d/platform/os/no_os -I../../../../../macro/drw2d/src -I../../../../../macro/flashc/hypb/lib -I../../../../../macro/flashc/hypb/src -I../../../../../macro/flashc/hypdb/lib -I../../../../../macro/flashc/hypdb/src -I../../../../../macro/flashc/nfmabare/lib -I../../../../../macro/flashc/nfmabare/src -I../../../../../macro/flashc/octa/lib -I../../../../../macro/flashc/octa/src -I../../../../../macro/flashc/octacdb/lib -I../../../../../macro/flashc/octacdb/src -I../../../../../macro/flashc/sfcdb/lib -I../../../../../macro/flashc/sfcdb/src -I../../../../../macro/flashc/sfma/lib -I../../../../../macro/flashc/sfma/src -I../../../../../macro/gfxbus/lib -I../../../../../macro/gfxbus/src -I../../../../../macro/gfxbus/xbus/lib -I../../../../../macro/gfxbus/xbus/src -I../../../../../macro/gpio/lib -I../../../../../macro/gpio/src -I../../../../../macro/gpu/davehd/common/inc -I../../../../../macro/gpu/davehd/common/inc/platform -I../../../../../macro/gpu/davehd/common/inc/platform/d1mx -I../../../../../macro/gpu/davehd/docs -I../../../../../macro/gpu/davehd/kernel/inc -I../../../../../macro/gpu/davehd/kernel/platform/d1mx -I../../../../../macro/gpu/davehd/kernel/platform/d1mx/bridge -I../../../../../macro/gpu/davehd/kernel/platform/d1mx/non_threaded -I../../../../../macro/gpu/davehd/kernel/platform/ree -I../../../../../macro/gpu/davehd/kernel/src -I../../../../../macro/gpu/davehd/user/inc -I../../../../../macro/gpu/davehd/user/platform/d1mx/no_os -I../../../../../macro/gpu/davehd/user/src -I../../../../../macro/gpu/jcua/lib -I../../../../../macro/gpu/jcua/src -I../../../../../macro/i2c/riic/lib -I../../../../../macro/i2c/riic/src -I../../../../../macro/tick/lib -I../../../../../macro/tick/src -I../../../../../macro/timer/ostm/lib -I../../../../../macro/timer/ostm/src -I../../../../../macro/timer/tauj/lib -I../../../../../macro/timer/tauj/src -I../../../../../macro/vdce/lib -I../../../../../macro/vdce/src -I../../../../../macro/vo/ddb/lib -I../../../../../macro/vo/ddb/src -I../../../../../macro/vo/spea/lib -I../../../../../macro/vo/spea/src -I../../../../../macro/vo/vowe/lib -I../../../../../macro/vo/vowe/src -I../../../../../macro/wm/lib -I../../../../../macro/wm/src -I../../../../../macro/pwm/lib -I../../../../../macro/reset/lib -I../../../../../macro/rscan/lib -I../../../../../macro/uart/rlin3/lib -I../../../../../macro/uart/rlin3/src -I../../../../../device/d1x_common/macro_cfg/rlin3 -I../../../../../macro/stbc/lib -I../../../../../macro/adc/lib -I../../../../../device/d1x_common/macro_cfg/adc7010 -IC:\GHS\V800.V2014.1.7\comp_201417\lib\rh850_22 -cg_underscore -cpu=rh850g3m -no_v850_simd -rh850_fpsimd=none -nomacro -patch_dbo=C:\git\rh850\src\app\gfx_apps\simple_draw\target\d1mx_mango_ghs\obj\r_xbus_main.dbo -source=r_xbus_main.c -o .\obj\gh_0000p1g1.o -list=.\obj\r_xbus_main.lst C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si 
Original File: C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
Source File: r_xbus_main.c
Directory: C:\git\rh850\src\app\gfx_apps\simple_draw\target\d1mx_mango_ghs
Host OS: Windows
EASE: Copyright (C) 1983-2014 Green Hills Software.  All Rights Reversed.
Release: Compiler v2014.1.7
Build Directory: [Directory] BTOWINBOX:c:/build_2014_1_bto/2014-09-04.2200-2014_1_bto/win32-comp-ecom
Revision: [VCInfo] http://toolsvc/branches/release-branch-2014-1-bto/src@515859 (built by build)
Revision Date: Fri Sep 05 14:05:06 2014

Release Date: Fri Sep 05 14:43:29 2014

                           1 --Driver Command: ccv850 -c -MD -I../../../../../app/common/dhd
                           2 --		-I../../../../../app/gfx_apps/simple_draw/src
                           3 --		-I../../../../../app/gfx_apps/simple_draw/lib
                           4 --		-I../../../../../bsp/board//config
                           5 --		-I../../../../../bsp/board//src/gfx
                           6 --		-I../../../../../bsp/board//src/hmi
                           7 --		-I../../../../../bsp/board//src/stdio
                           8 --		-I../../../../../bsp/board/d1mx_mango/config
                           9 --		-I../../../../../bsp/board/d1mx_mango/src
                          10 --		-I../../../../../bsp/board/d1mx_mango/src/gfx
                          11 --		-I../../../../../bsp/board/d1mx_mango/src/hmi
                          12 --		-I../../../../../bsp/board/d1mx_mango/src/stdio
                          13 --		-I../../../../../bsp/gfx/lib -I../../../../../bsp/gfx/src
                          14 --		-I../../../../../bsp/hmi/lib -I../../../../../bsp/hmi/src
                          15 --		-I../../../../../bsp/lib -I../../../../../bsp/stdio/lib
                          16 --		-I../../../../../bsp/stdio/src -I../../../../../cdi/lib
                          17 --		-I../../../../../cdi/src -I../../../../../compiler/rh850_ghs/inc
                          18 --		-I../../../../../device/d1mx/lib
                          19 --		-I../../../../../device/d1mx/macro_cfg
                          20 --		-I../../../../../device/d1mx/macro_cfg/csisw
                          21 --		-I../../../../../device/d1mx/macro_cfg/davehd
                          22 --		-I../../../../../device/d1mx/macro_cfg/ddb
                          23 --		-I../../../../../device/d1mx/macro_cfg/drw2d
                          24 --		-I../../../../../device/d1mx/macro_cfg/gfxbus
                          25 --		-I../../../../../device/d1mx/macro_cfg/gpio
                          26 --		-I../../../../../device/d1mx/macro_cfg/hypb
                          27 --		-I../../../../../device/d1mx/macro_cfg/hypdb
                          28 --		-I../../../../../device/d1mx/macro_cfg/jcua
                          29 --		-I../../../../../device/d1mx/macro_cfg/nfmabare
                          30 --		-I../../../../../device/d1mx/macro_cfg/octa
                          31 --		-I../../../../../device/d1mx/macro_cfg/octacdb
                          32 --		-I../../../../../device/d1mx/macro_cfg/ostm
                          33 --		-I../../../../../device/d1mx/macro_cfg/pbg
                          34 --		-I../../../../../device/d1mx/macro_cfg/riic
                          35 --		-I../../../../../device/d1mx/macro_cfg/sfcdb
                          36 --		-I../../../../../device/d1mx/macro_cfg/sfma
                          37 --		-I../../../../../device/d1mx/macro_cfg/spea
                          38 --		-I../../../../../device/d1mx/macro_cfg/tauj
                          39 --		-I../../../../../device/d1mx/macro_cfg/tick
                          40 --		-I../../../../../device/d1mx/macro_cfg/vdce
                          41 --		-I../../../../../device/d1mx/macro_cfg/vowe
                          42 --		-I../../../../../device/d1mx/macro_cfg/wm
                          43 --		-I../../../../../device/d1mx/macro_cfg/xbus
                          44 --		-I../../../../../device/d1mx/src/dev
                          45 --		-I../../../../../device/d1mx/src/dhd
                          46 --		-I../../../../../device/d1mx/src/hypb
                          47 --		-I../../../../../device/d1mx/src/jcua
                          48 --		-I../../../../../device/d1mx/src/nfmabare
                          49 --		-I../../../../../device/d1mx/src/octa
                          50 --		-I../../../../../device/d1mx/src/rh850_ghs

                                                                      Page 2
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                          51 --		-I../../../../../device/d1mx/src/vowe
                          52 --		-I../../../../../device/d1x_common/macro_cfg
                          53 --		-I../../../../../device/d1x_common/macro_cfg/csisw
                          54 --		-I../../../../../device/d1x_common/macro_cfg/davehd
                          55 --		-I../../../../../device/d1x_common/macro_cfg/ddb
                          56 --		-I../../../../../device/d1x_common/macro_cfg/drw2d
                          57 --		-I../../../../../device/d1x_common/macro_cfg/gfxbus
                          58 --		-I../../../../../device/d1x_common/macro_cfg/gpio
                          59 --		-I../../../../../device/d1x_common/macro_cfg/hypb
                          60 --		-I../../../../../device/d1x_common/macro_cfg/hypdb
                          61 --		-I../../../../../device/d1x_common/macro_cfg/jcua
                          62 --		-I../../../../../device/d1x_common/macro_cfg/nfmabare
                          63 --		-I../../../../../device/d1x_common/macro_cfg/octa
                          64 --		-I../../../../../device/d1x_common/macro_cfg/octacdb
                          65 --		-I../../../../../device/d1x_common/macro_cfg/ostm
                          66 --		-I../../../../../device/d1x_common/macro_cfg/pbg
                          67 --		-I../../../../../device/d1x_common/macro_cfg/riic
                          68 --		-I../../../../../device/d1x_common/macro_cfg/sfcdb
                          69 --		-I../../../../../device/d1x_common/macro_cfg/sfma
                          70 --		-I../../../../../device/d1x_common/macro_cfg/spea
                          71 --		-I../../../../../device/d1x_common/macro_cfg/tauj
                          72 --		-I../../../../../device/d1x_common/macro_cfg/tick
                          73 --		-I../../../../../device/d1x_common/macro_cfg/vdce
                          74 --		-I../../../../../device/d1x_common/macro_cfg/vowe
                          75 --		-I../../../../../device/d1x_common/macro_cfg/wm
                          76 --		-I../../../../../device/d1x_common/macro_cfg/xbus
                          77 --		-I../../../../../device/d1x_common/src/csisw
                          78 --		-I../../../../../device/d1x_common/src/ddb
                          79 --		-I../../../../../device/d1x_common/src/dev
                          80 --		-I../../../../../device/d1x_common/src/gfxbus
                          81 --		-I../../../../../device/d1x_common/src/gpio
                          82 --		-I../../../../../device/d1x_common/src/ostm
                          83 --		-I../../../../../device/d1x_common/src/pbg
                          84 --		-I../../../../../device/d1x_common/src/riic
                          85 --		-I../../../../../device/d1x_common/src/sfma
                          86 --		-I../../../../../device/d1x_common/src/spea
                          87 --		-I../../../../../device/d1x_common/src/tauj
                          88 --		-I../../../../../device/d1x_common/src/tick
                          89 --		-I../../../../../device/d1x_common/src/vdce
                          90 --		-I../../../../../device/d1x_common/src/wm
                          91 --		-I../../../../../device/d1x_common/src/xbus
                          92 --		-I../../../../../device/lib -I../../../../../macro/bus/pbg/lib
                          93 --		-I../../../../../macro/bus/pbg/src
                          94 --		-I../../../../../macro/csi/csisw/lib
                          95 --		-I../../../../../macro/csi/csisw/src
                          96 --		-I../../../../../macro/drw2d/lib
                          97 --		-I../../../../../macro/drw2d/platform/davehd
                          98 --		-I../../../../../macro/drw2d/platform/os/no_os
                          99 --		-I../../../../../macro/drw2d/src
                         100 --		-I../../../../../macro/flashc/hypb/lib
                         101 --		-I../../../../../macro/flashc/hypb/src
                         102 --		-I../../../../../macro/flashc/hypdb/lib
                         103 --		-I../../../../../macro/flashc/hypdb/src
                         104 --		-I../../../../../macro/flashc/nfmabare/lib
                         105 --		-I../../../../../macro/flashc/nfmabare/src
                         106 --		-I../../../../../macro/flashc/octa/lib
                         107 --		-I../../../../../macro/flashc/octa/src
                         108 --		-I../../../../../macro/flashc/octacdb/lib
                         109 --		-I../../../../../macro/flashc/octacdb/src
                         110 --		-I../../../../../macro/flashc/sfcdb/lib
                         111 --		-I../../../../../macro/flashc/sfcdb/src

                                                                      Page 3
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         112 --		-I../../../../../macro/flashc/sfma/lib
                         113 --		-I../../../../../macro/flashc/sfma/src
                         114 --		-I../../../../../macro/gfxbus/lib
                         115 --		-I../../../../../macro/gfxbus/src
                         116 --		-I../../../../../macro/gfxbus/xbus/lib
                         117 --		-I../../../../../macro/gfxbus/xbus/src
                         118 --		-I../../../../../macro/gpio/lib -I../../../../../macro/gpio/src
                         119 --		-I../../../../../macro/gpu/davehd/common/inc
                         120 --		-I../../../../../macro/gpu/davehd/common/inc/platform
                         121 --		-I../../../../../macro/gpu/davehd/common/inc/platform/d1mx
                         122 --		-I../../../../../macro/gpu/davehd/docs
                         123 --		-I../../../../../macro/gpu/davehd/kernel/inc
                         124 --		-I../../../../../macro/gpu/davehd/kernel/platform/d1mx
                         125 --		-I../../../../../macro/gpu/davehd/kernel/platform/d1mx/bridge
                         126 --		-I../../../../../macro/gpu/davehd/kernel/platform/d1mx/non_threaded
                         127 --		-I../../../../../macro/gpu/davehd/kernel/platform/ree
                         128 --		-I../../../../../macro/gpu/davehd/kernel/src
                         129 --		-I../../../../../macro/gpu/davehd/user/inc
                         130 --		-I../../../../../macro/gpu/davehd/user/platform/d1mx/no_os
                         131 --		-I../../../../../macro/gpu/davehd/user/src
                         132 --		-I../../../../../macro/gpu/jcua/lib
                         133 --		-I../../../../../macro/gpu/jcua/src
                         134 --		-I../../../../../macro/i2c/riic/lib
                         135 --		-I../../../../../macro/i2c/riic/src
                         136 --		-I../../../../../macro/tick/lib -I../../../../../macro/tick/src
                         137 --		-I../../../../../macro/timer/ostm/lib
                         138 --		-I../../../../../macro/timer/ostm/src
                         139 --		-I../../../../../macro/timer/tauj/lib
                         140 --		-I../../../../../macro/timer/tauj/src
                         141 --		-I../../../../../macro/vdce/lib -I../../../../../macro/vdce/src
                         142 --		-I../../../../../macro/vo/ddb/lib
                         143 --		-I../../../../../macro/vo/ddb/src
                         144 --		-I../../../../../macro/vo/spea/lib
                         145 --		-I../../../../../macro/vo/spea/src
                         146 --		-I../../../../../macro/vo/vowe/lib
                         147 --		-I../../../../../macro/vo/vowe/src -I../../../../../macro/wm/lib
                         148 --		-I../../../../../macro/wm/src -I../../../../../macro/pwm/lib
                         149 --		-I../../../../../macro/i2c/riic/lib
                         150 --		-I../../../../../macro/reset/lib -I../../../../../macro/rscan/lib
                         151 --		-I../../../../../macro/uart/rlin3/lib
                         152 --		-I../../../../../macro/uart/rlin3/src
                         153 --		-I../../../../../device/d1x_common/macro_cfg/rlin3
                         154 --		-I../../../../../macro/stbc/lib
                         155 --		-I../../../../../app/gfx_apps/simple_draw/lib
                         156 --		-I../../../../../macro/adc/lib
                         157 --		-I../../../../../device/d1x_common/macro_cfg/adc7010 -G
                         158 --		--no_commons --no_implicit_include --prototype_errors
                         159 --		-DRENESAS_D1X -DR_DRW2D_OS_NO_OS -DR_DRW2D_SYS_DHD
                         160 --		-DUSED_CPU=RH850G3M -DUSE_BSP_GFX -DUSE_BSP_HMI -DUSE_BSP_STDIO
                         161 --		-DUSE_CDI -DUSE_CSISW -DUSE_DAVEHD -DUSE_DDB -DUSE_DRW2D
                         162 --		-DUSE_GFXBUS -DUSE_GPIO -DUSE_HYPB -DUSE_HYPDB -DUSE_JCUA
                         163 --		-DUSE_NFMABARE -DUSE_OCTA -DUSE_OCTACDB -DUSE_OSTM -DUSE_PBG
                         164 --		-DUSE_RIIC -DUSE_SFCDB -DUSE_SFMA -DUSE_SPEA -DUSE_TAUJ
                         165 --		-DUSE_TICK -DUSE_VDCE -DUSE_WM -DUSE_XBUS -DMAG -MD -Zuse1bit
                         166 --		-allocate_ep -cpu=rh850g3m -large_sda -list -no_callt -notda
                         167 --		-passsource -preprocess_assembly_files -registermode=22
                         168 --		-reserve_r2 --diag_warning 1 -object_dir=./obj -DUSE_VDCE_OPENLDI
                         169 --		-gnu99 -filetype.c
                         170 --		..\..\..\..\..\macro\gfxbus\xbus\src\r_xbus_main.c -o
                         171 --		.\obj\r_xbus_main.o
                         172 --Source File:   ..\..\..\..\..\macro\gfxbus\xbus\src\r_xbus_main.c

                                                                      Page 4
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         173 --Directory:     
                         174 --		C:\git\rh850\src\app\gfx_apps\simple_draw\target\d1mx_mango_ghs
                         175 --Compile Date:  Tue Oct 16 19:48:54 2018
                         176 --Host OS:       Win32
                         177 --Version:       C-RH850 2014.1.7 RELEASE VERSION
                         178 --Release:       Compiler v2014.1.7
                         179 --Revision Date: Fri Sep 05 14:10:46 2014
                         180 --Release Date:  Fri Sep 05 14:44:23 2014
                         181 -- ecom  -g -w
                         182 
                         183 --1: /*
                         184 --2: ****************************************************************************
                         185 --3: PROJECT : VLIB Macro Driver  
                         186 --4: FILE    : $Id: r_xbus_main.c 7402 2016-01-27 15:43:39Z florian.zimmermann $
                         187 --5: ============================================================================ 
                         188 --6: DESCRIPTION
                         189 --7: Driver for the XBUS macro
                         190 --8: ============================================================================
                         191 --9:                             C O P Y R I G H T
                         192 --10: ============================================================================
                         193 --11:                        Copyright (c) 2013 - 2014
                         194 --12:                                   by 
                         195 --13:                        Renesas Electronics (Europe) GmbH. 
                         196 --14:                            Arcadiastrasse 10
                         197 --15:                           D-40472 Duesseldorf
                         198 --16:                                Germany
                         199 --17:                           All rights reserved.
                         200 --18: ============================================================================
                         201 --19: Purpose: only for testing, not for mass production
                         202 --21: DISCLAIMER
                         203 --23: LICENSEE has read, understood and accepted the terms and conditions defined in
                         204 --24: the license agreement, especially the usage rights. In any case, it is
                         205 --25: LICENSEE's responsibility to make sure that any user of the software complies
                         206 --26: with the terms and conditions of the signed license agreement.
                         207 --28: SAMPLE CODE is not part of the licensed software, as such it must not be used in
                         208 --29: mass-production applications. It can only be used for evaluation and
                         209 --30: demonstration purposes at customer's premises listed in the signed license
                         210 --31: agreement.
                         211 --33: ****************************************************************************
                         212 --34: */
                         213 --36: /*******************************************************************************
                         214 --37:   Title: XBUS Main Module
                         215 --39:   Implementation of the API and other global functions.
                         216 --40: */
                         217 --42: /*******************************************************************************
                         218 --43:   Section: Includes
                         219 --44: */
                         220 --46: #include "r_typedefs.h"
                         221 --47: #include "r_dev_api.h"
                         222 --48: #include "r_config_xbus.h"
                         223 --49: #include "r_xbus_api.h"
                         224 --50: #define XBUS_MAIN_GLOBALS_
                         225 --51: #include "r_xbus_main.h"
                         226 --52: #include "r_xbus_regs.h"
                         227 --53: #include "r_xbus_sys.h"
                         228 --55: #ifdef USE_ROS
                         229 --56: #include "r_os_api.h"
                         230 --57: #endif
                         231 --61: /*******************************************************************************
                         232 --62:   Section: Local Constants
                         233 --63: */

                                                                      Page 5
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         234 --64: /*
                         235 --66:   Enum: loc_CacheCmd_t
                         236 --68:   XBUS cache commands 
                         237 --70:   0000 IDX_LD_TAG ON
                         238 --71:   Read from TRAM/Status-FF/LRU-FF of specified index/way.
                         239 --72:   Write to AXCTAGLO, AXCLRU registers.
                         240 --73:   Case of TE=0: write tag under ECC=Off. AXCTAGECC holds previous value.
                         241 --74:   Case of TE=1 & TC=0: write tag/checkbits before correction.
                         242 --75:   Case of TE=1 & TC=1: write tag/checkbits after correction.
                         243 --76:   
                         244 --77:   0001B IDX_ST_TAG 
                         245 --78:   Read AXCTAGLO, AXCLRU registers.
                         246 --79:   Case of AXCTAGECC.TE=0: Tag check bits are generated automatically.
                         247 --80:   Case of AXCTAGECC.TE=1: AXCTAGECC.TAGECC is used.
                         248 --81:   Write to TRAM/Status-FF/LRU-FF of specified index/way.
                         249 --82:   
                         250 --83:   0010B IDX_LD_DATA 
                         251 --84:   Read from DRAM of specified index/double word.
                         252 --85:   Write to AXCDATALO/AXCDATAHI/AXCECC registers.
                         253 --86:   Case of DE=0: write data under ECC=Off. AXCDATAECC holds previous value.
                         254 --87:   Case of DE=1 & DC=0 : write data/checkbits before correction.
                         255 --88:   Case of DE=1 & DC=1 : write data/checkbits after correction.
                         256 --89:   Hardware automatically compensates corkscrew allocation.
                         257 --90:   
                         258 --91:   0011B IDX_ST_DATA 
                         259 --92:   Read from AXCDATALO/AXCDATAHI/AXCECC registers.
                         260 --93:   Case of AXCDATAECC.DE 0 : Data check bits are generated automatically.
                         261 --94:   Case of AXCDATAECC.DE 1 : AXCDATAECC.DATAECC(0/1) are used.
                         262 --95:   Write to DRAM of specified index/doubleword.
                         263 --96:   Hardware automatically compensates corkscrew allocation.
                         264 --97:   
                         265 --98:   0100B IDX_WB_INV 
                         266 --99:   Check status of specified index/way.
                         267 --100:   Case of Valid=1 & Dirty=1 : Writeback & Invalidate specified entry.
                         268 --101:   
                         269 --102:   0101B FILL  
                         270 --103:   Fill data to cache way specified by LRU.
                         271 --105:   0110B HIT_WB_INV 
                         272 --106:   Check status of specified address.
                         273 --107:   Case of Hit & Dirty=1 : Writeback & Invalidate specified entry.
                         274 --108:   Case of Hit & Dirty=0 : Invalidate specified entry
                         275 --109:   Case of Miss : No operation.
                         276 --110:   
                         277 --111:   0111B CREATE_DIRTY 
                         278 --112:   Create dirty status.
                         279 --113:   Case of Hit : Set D=1
                         280 --114:   Case of Miss : Write specified address to TRAM.
                         281 --115:   Case of V=0 : Write 0 to DRAM
                         282 --116:   Case of V=1 & D=1 : with writeback.
                         283 --117:   
                         284 --118:   1xxxB CLEAR 
                         285 --119:   Clear target : All of (Valid, Dirty, LRU) bits.
                         286 --120:   
                         287 --121: */
                         288 --123: typedef enum 
                         289 --124: {
                         290 --125:    IDX_LD_TAG      = 0x0u,  
                         291 --126:    IDX_ST_TAG      = 0x1u,
                         292 --127:    IDX_LD_DATA     = 0x2u,
                         293 --128:    IDX_ST_DATA     = 0x3u,
                         294 --129:    IDX_WB_INV      = 0x4u,

                                                                      Page 6
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         295 --130:    FILL            = 0x5u,
                         296 --131:    HIT_WB_INV      = 0x6u,
                         297 --132:    CREATE_DIRTY    = 0x7u,
                         298 --133:    CLEAR           = 0x8u,
                         299 --134: } loc_CacheCmd_t; 
                         300 --135: /*******************************************************************************
                         301 --136:   Constant: loc_XbusVersion
                         302 --138:   A string containig the macro driver version information  
                         303 --139: */
                         304 --142: #define LOC_XBUS_VERSIONPREFIX    "@(#)XBUS Version "
                         305 --143: #define LOC_XBUS_VERSIONPOSTFIX   " - "
                         306 --146: #define LOC_XBUS_VERSION      { LOC_XBUS_VERSIONPREFIX  R_XSTR (R_XBUS_VERSION_HI) "." \
                         307 --147:                                 R_XSTR(R_XBUS_VERSION_LO) LOC_XBUS_VERSIONPOSTFIX \
                         308 --148:                                 __DATE__ R_SPACE __TIME__ }
                         309 --152: /*******************************************************************************
                         310 --153:   Section: Local Types 
                         311 --154: */
                         312 --156: typedef struct name
                         313 --157: {
                         314 --158:     uint32_t Start;
                         315 --159:     uint32_t End;
                         316 --160:     uint8_t  Mode; 
                         317 --161: } locCacheArea_t;
                         318 --163: /*******************************************************************************
                         319 --164:   Section: Local Variables
                         320 --165: */
                         321 --167: /*******************************************************************************
                         322 --168:   Variable: locXcLock
                         323 --170:   Neccessay to aqurire a thread mutex  
                         324 --171: */
                         325 --172: #ifdef USE_ROS
                         326 --173: static R_OS_ThreadMutex_t locXcLock;  
                         327 --174: #endif
                         328 --177: /*******************************************************************************
                         329 --178:   Variable: locBaseAddr
                         330 --180:   Base Address of the XBUS config registers. The value is defined in the 
                         331 --181:   r_config_xbus.h file.    
                         332 --182: */
                         333 --183: static uint32_t locBaseAddr = 0; 
                         334 --185: /*******************************************************************************
                         335 --186:   Variable: loc_ErrorHandler
                         336 --188:   A function pointer to a user callback (Applications error handler)  
                         337 --189:   
                         338 --190:   The value is assigned by the application using the driver 
                         339 --191: */
                         340 --193: static void (*loc_ErrorHandler )(uint32_t Unit, uint32_t Error) = 0u;
                         341 --195: /*******************************************************************************
                         342 --196:   Variable: CacheAreas
                         343 --198:   Local storage for cache config  
                         344 --199: */
                         345 --200: static locCacheArea_t CacheAreas[4]; 
                         346 --202: /*******************************************************************************
                         347 --203:   Variable: locMaxIdx
                         348 --205:   Amount of cache indexes (device dependant)   
                         349 --206: */
                         350 --207: static uint32_t locMaxIdx = 0;
                         351 --208:  
                         352 --209: /*******************************************************************************
                         353 --210:   Section: local Functions
                         354 --211: */
                         355 --212: void loc_WriteCmd(uint32_t CmdVal) ;

                                                                      Page 7
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         356 --216: /*******************************************************************************
                         357 --217:   Functions loc_WriteCmd
                         358 --218:   
                         359 --219:   Write the given command and waits for the execution to be finished. 
                         360 --220: */
                         361 --221: void loc_WriteCmd(uint32_t CmdVal) 
                         362 	.text
                         363 ..bof.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main...43.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs..5BC5D026..0::
                         364 	.align	2
                         365 	.global	_loc_WriteCmd
                         366 _loc_WriteCmd:
00000000 210600000000*   367 	mov	.L58,r1
00000006 0660            368 	mov	r6,r12
00000008 0158            369 	mov	r1,r11
                         370 --	    .bf
                         371 .LDW01:
                         372 --222: {
                         373 --223:     volatile uint32_t reg_val = CmdVal; 
0000000a 0c70            374 	mov	r12,r14
                         375 --224:     /* Write command */
                         376 --225:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CACHECMD, reg_val); 
0000000c 21f70100        377 	ld.w	0[r1],ep
00000010 1175            378 	sst.w	r14,32[ep]
                         379 --226:     reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_CACHECMD);  
00000012 21f70100        380 	ld.w	0[r1],ep
00000016 1075            381 	sld.w	32[ep],r14
                         382 --227:     /* Wait for cmd complete */
                         383 --228:     while (0 != (reg_val & 0x1u))
00000018 c505*           384 	br	.L4
                         385 .L6:
                         386 --229:     {
                         387 --230:         reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_CACHECMD);  
                         388 --line230
                         389 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.1::
                         390 .LDWlin1:
0000001a 21f70100        391 	ld.w	0[r1],ep
0000001e 1075            392 	sld.w	32[ep],r14
                         393 .L4:
00000020 ce060100        394 	andi	1,r14,zero
00000024 bafd*           395 	bne	.L6
                         396 --231:     }
                         397 --232: }
                         398 --	    .ef
                         399 .LDW11:
                         400 --line232
                         401 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.2::
                         402 .LDWlin2:
00000026 7f00            403 	jmp	[lp]
                         404 	.type	_loc_WriteCmd,@function
                         405 	.size	_loc_WriteCmd,.-_loc_WriteCmd
                         406 	.align	2
                         407 .LDW21:
                         408 --_reg_val	r14	local
                         409 
                         410 --_CmdVal	r12	param
                         411 
                         412 	.data
                         413 	.align	4
                         414 .L58:
                         415 	.type	.L58,@object
                         416 	.size	.L58,0

                                                                      Page 8
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         417 	.global	_locBaseAddr..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.
                         418 _locBaseAddr..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.:
00000000 00000000        419 _locBaseAddr:	.byte	0,0,0,0
                         420 	.type	_locBaseAddr..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.,@object
                         421 	.size	_locBaseAddr..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.,4
                         422 	.type	_locBaseAddr,@object
                         423 	.size	_locBaseAddr,4
                         424 	.global	_loc_ErrorHandler..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.
                         425 _loc_ErrorHandler..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.:
00000004 00000000        426 _loc_ErrorHandler:	.byte	0,0,0,0
                         427 	.type	_loc_ErrorHandler..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.,@object
                         428 	.size	_loc_ErrorHandler..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.,4
                         429 	.type	_loc_ErrorHandler,@object
                         430 	.size	_loc_ErrorHandler,4
                         431 	.global	_locMaxIdx..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.
                         432 _locMaxIdx..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.:
00000008 00000000        433 _locMaxIdx:	.byte	0,0,0,0
                         434 	.type	_locMaxIdx..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.,@object
                         435 	.size	_locMaxIdx..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.,4
                         436 	.type	_locMaxIdx,@object
                         437 	.size	_locMaxIdx,4
                         438 	.section ".bss","awb"
                         439 	.align	4
                         440 	.global	_CacheAreas..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.
                         441 _CacheAreas..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.:
00000000 000000000000    442 _CacheAreas:	.space	48
00000006 000000000000 
0000000c 000000000000 
00000012 000000000000 
00000018 000000000000 
0000001e 000000000000 
00000024 000000000000 
0000002a 000000000000 
                         443 	.type	_CacheAreas..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.,@object
                         444 	.size	_CacheAreas..C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.,48
                         445 	.type	_CacheAreas,@object
                         446 	.size	_CacheAreas,48
                         447 	.data
                         448 	.text
                         449 
                         450 
                         451 --233: /*******************************************************************************
                         452 --234:   Section: Global Functions
                         453 --235: */
                         454 --237: /*******************************************************************************
                         455 --238:   Function: R_XBUS_CheckMacroParams
                         456 --239:   
                         457 --240:   See: <xbus_main.h>
                         458 --241: */
                         459 --242: r_xbus_Error_t R_XBUS_CheckMacroParams(uint32_t Unit)
                         460 	.align	2
                         461 	.align	2
                         462 	.global	_R_XBUS_CheckMacroParams
                         463 _R_XBUS_CheckMacroParams:
00000028 0608            464 	mov	r6,r1
                         465 --	    .bf
                         466 .LDW31:
                         467 --243: {
                         468 --244:     /* Feel free to add any more usefull parameter checks */
                         469 --245:     if (R_XBUS_MACRO_NUM <= Unit)
0000002a 610a            470 	cmp	1,r1

                                                                      Page 9
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
0000002c b105*           471 	bl	.L93
                         472 --246:     {
                         473 --247:         return  R_XBUS_ERR_RANGE; 
                         474 --line247
                         475 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.3::
                         476 .LDWlin3:
0000002e 0252            477 	mov	2,r10
00000030 a505*           478 	br	.L91
                         479 .L93:
                         480 --248:     }
                         481 --249:     return R_XBUS_ERR_OK;  
                         482 --line249
                         483 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.4::
                         484 .LDWlin4:
00000032 0052            485 	mov	0,r10
                         486 .L91:
                         487 --	    .ef
                         488 .LDW41:
00000034 7f00            489 	jmp	[lp]
                         490 	.type	_R_XBUS_CheckMacroParams,@function
                         491 	.size	_R_XBUS_CheckMacroParams,.-_R_XBUS_CheckMacroParams
                         492 	.align	2
                         493 .LDW51:
                         494 
                         495 --_Unit	r1	param
                         496 
                         497 	.section ".bss","awb"
                         498 .L118:
                         499 	.type	.L118,@object
                         500 	.size	.L118,0
                         501 	.data
                         502 	.text
                         503 
                         504 --250: }
                         505 
                         506 --252: /*******************************************************************************
                         507 --253:   Function: R_XBUS_ErrorHandler
                         508 --254:   
                         509 --255:   See: <xbus_main.h>
                         510 --256: */
                         511 --258: void R_XBUS_ErrorHandler(uint32_t Unit, r_xbus_Error_t Error) 
                         512 	.align	2
                         513 	.align	2
                         514 	.global	_R_XBUS_ErrorHandler
                         515 _R_XBUS_ErrorHandler:
00000036 8007e170        516 	prepare	{r25,r26,r27,r28,r29,r31},0
0000003a 3d0600000000*   517 	mov	_loc_ErrorHandler,r29
00000040 06e0            518 	mov	r6,r28
00000042 07d8            519 	mov	r7,r27
00000044 1dd0            520 	mov	r29,r26
                         521 --	    .bf
                         522 .LDW61:
                         523 --259: {
                         524 --260:     if (0 != loc_ErrorHandler) 
00000046 3d0f0100        525 	ld.w	0[r29],r1
0000004a e009            526 	cmp	zero,r1
0000004c 820d*           527 	be	.L138
                         528 --261:     {      /* we've got a registered error handler here ...*/
                         529 --262:         loc_ErrorHandler(Unit, (uint32_t) Error);      /* ... and we gonna use it!*/
                         530 --line262
                         531 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.5::

                                                                      Page 10
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         532 .LDWlin5:
0000004e 3dcf0100        533 	ld.w	0[r29],r25
00000052 1c30            534 	mov	r28,r6
00000054 1b38            535 	mov	r27,r7
00000056 f9c760f9        536 	jarl	[r25],lp
0000005a d505*           537 	br	.L140
                         538 .L138:
                         539 --263:     } 
                         540 --264:     else 
                         541 --265:     {
                         542 --266:         R_SYS_XBUS_ErrorHandler(Unit, Error); 
                         543 --line266
                         544 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.6::
                         545 .LDWlin6:
0000005c 1c30            546 	mov	r28,r6
0000005e 1b38            547 	mov	r27,r7
                         548 	jarl	_R_SYS_XBUS_ErrorHandler,lp
                         548 <EXPANSION BEGIN>
                         548 jarl22 _R_SYS_XBUS_ErrorHandler , lp 
00000060 80ff0000*       548 <EXPANSION END>
                         549 .L140:
                         550 --267:     }
                         551 --268: }
                         552 --	    .ef
                         553 .LDW71:
                         554 --line268
                         555 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.7::
                         556 .LDWlin7:
00000064 4006ff70        557 	dispose	0,{r25,r26,r27,r28,r29,r31},[lp]
                         558 	.type	_R_XBUS_ErrorHandler,@function
                         559 	.size	_R_XBUS_ErrorHandler,.-_R_XBUS_ErrorHandler
                         560 	.align	2
                         561 .LDW81:
                         562 
                         563 --_Unit	r28	param
                         564 --_Error	r27	param
                         565 
                         566 	.data
                         567 	.text
                         568 
                         569 
                         570 --270: /*******************************************************************************
                         571 --271:   Section: Global API Functions
                         572 --272:   
                         573 --273:   See: <xbus_api.h>
                         574 --274: */
                         575 --276: /*******************************************************************************
                         576 --277:   Function: R_XBUS_GetVersionStr
                         577 --279:   See: <xbus_api.h> 
                         578 --280: */
                         579 --281: const int8_t * R_XBUS_GetVersionStr(void)
                         580 	.align	2
                         581 	.align	2
                         582 	.global	_R_XBUS_GetVersionStr
                         583 _R_XBUS_GetVersionStr:
                         584 --	    .bf
                         585 .LDW91:
                         586 --282: {
                         587 --283:     static const int8_t version[] = LOC_XBUS_VERSION;
                         588 --284:     return version;
00000068 2a0600000000*   589 	mov	.L215,r10

                                                                      Page 11
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         590 --	    .ef
                         591 .LDW02:
0000006e 7f00            592 	jmp	[lp]
                         593 	.type	_R_XBUS_GetVersionStr,@function
                         594 	.size	_R_XBUS_GetVersionStr,.-_R_XBUS_GetVersionStr
                         595 	.align	2
                         596 .LDW12:
                         597 --_version	.L215	static
                         598 
                         599 	.section ".bss","awb"
                         600 .L206:
                         601 	.type	.L206,@object
                         602 	.size	.L206,0
                         603 	.section ".rodata","a"
                         604 .L215:
                         605 	.global	_version.R_XBUS_GetVersionStr.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main..4
                         606 _version.R_XBUS_GetVersionStr.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main..4:
                         607 --	"@(#)XBUS Version 0.1 - Oct 16 2018 19:48:54"
00000000 40282329        608 	.byte	64,40,35,41
00000004 58425553        609 	.byte	88,66,85,83
00000008 20566572        610 	.byte	32,86,101,114
0000000c 73696f6e        611 	.byte	115,105,111,110
00000010 20302e31        612 	.byte	32,48,46,49
00000014 202d204f        613 	.byte	32,45,32,79
00000018 63742031        614 	.byte	99,116,32,49
0000001c 36203230        615 	.byte	54,32,50,48
00000020 31382031        616 	.byte	49,56,32,49
00000024 393a3438        617 	.byte	57,58,52,56
00000028 3a353400        618 	.byte	58,53,52,0
                         619 	.type	_version.R_XBUS_GetVersionStr.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main..4,@object
                         620 	.size	_version.R_XBUS_GetVersionStr.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main..4,44
                         621 	.type	.L215,@object
                         622 	.size	.L215,44
                         623 	.data
                         624 	.text
                         625 
                         626 --285: }
                         627 
                         628 --287: /*******************************************************************************
                         629 --288:   Function: R_XBUS_GetMajorVersion
                         630 --290:   See: <xbus_api.h> 
                         631 --291: */
                         632 --292: const uint16_t R_XBUS_GetMajorVersion(void) 
                         633 	.align	2
                         634 	.align	2
                         635 	.global	_R_XBUS_GetMajorVersion
                         636 _R_XBUS_GetMajorVersion:
                         637 --	    .bf
                         638 .LDW22:
                         639 --293: {
                         640 --294:     return (uint16_t)R_XBUS_VERSION_HI; 
00000070 0052            641 	mov	0,r10
                         642 --	    .ef
                         643 .LDW32:
00000072 7f00            644 	jmp	[lp]
                         645 	.type	_R_XBUS_GetMajorVersion,@function
                         646 	.size	_R_XBUS_GetMajorVersion,.-_R_XBUS_GetMajorVersion
                         647 	.align	2
                         648 .LDW42:
                         649 
                         650 	.section ".bss","awb"

                                                                      Page 12
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         651 .L238:
                         652 	.type	.L238,@object
                         653 	.size	.L238,0
                         654 	.data
                         655 	.text
                         656 
                         657 --295: }
                         658 
                         659 --297: /*******************************************************************************
                         660 --298:   Function: R_XBUS_GetMinorVersion
                         661 --300:   See: <xbus_api.h> 
                         662 --301: */
                         663 --302: const uint16_t R_XBUS_GetMinorVersion(void) 
                         664 	.align	2
                         665 	.align	2
                         666 	.global	_R_XBUS_GetMinorVersion
                         667 _R_XBUS_GetMinorVersion:
                         668 --	    .bf
                         669 .LDW52:
                         670 --303: {
                         671 --304:     return (uint16_t)R_XBUS_VERSION_LO; 
00000074 0152            672 	mov	1,r10
                         673 --	    .ef
                         674 .LDW62:
00000076 7f00            675 	jmp	[lp]
                         676 	.type	_R_XBUS_GetMinorVersion,@function
                         677 	.size	_R_XBUS_GetMinorVersion,.-_R_XBUS_GetMinorVersion
                         678 	.align	2
                         679 .LDW72:
                         680 
                         681 	.section ".bss","awb"
                         682 .L270:
                         683 	.type	.L270,@object
                         684 	.size	.L270,0
                         685 	.data
                         686 	.text
                         687 
                         688 --305: }
                         689 
                         690 --309: /*******************************************************************************
                         691 --310:   Function: R_XBUS_Init
                         692 --312:   See: <xbus_api.h> 
                         693 --313: */
                         694 --315:  r_xbus_Error_t R_XBUS_Init(uint32_t Unit) 
                         695 	.align	2
                         696 	.align	2
                         697 	.global	_R_XBUS_Init
                         698 _R_XBUS_Init:
00000078 8607e170        699 	prepare	{r25,r26,r27,r28,r29,r31},3
0000007c 63370900        700 	st.w	r6,8[sp]
00000080 3c0600000000*   701 	mov	_locBaseAddr,r28
                         702 --	    .bf
                         703 .LDW82:
                         704 --316:  {
                         705 --317:     r_xbus_Error_t    err       = R_XBUS_ERR_OK;
00000086 63070100        706 	st.w	zero,0[sp]
0000008a 005a            707 	mov	0,r11
                         708 --318:     volatile uint32_t reg_val   = 0; 
0000008c 00ea            709 	mov	0,r29
                         710 --319:     loc_CacheCmd_t    cmd       = CLEAR; 
0000008e 08ca            711 	mov	8,r25

                                                                      Page 13
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         712 --320:     uint32_t          i         = 0; 
00000090 00d2            713 	mov	0,r26
                         714 --321:     uint32_t          j         = 0; 
00000092 00da            715 	mov	0,r27
                         716 --322:     err = R_XBUS_CheckMacroParams(Unit); 
00000094 23370900        717 	ld.w	8[sp],r6
                         718 	jarl	_R_XBUS_CheckMacroParams,lp
                         718 <EXPANSION BEGIN>
                         718 jarl22 _R_XBUS_CheckMacroParams , lp 
00000098 bfff90ff*       718 <EXPANSION END>
0000009c 63570100        719 	st.w	r10,0[sp]
                         720 --323:     if (R_XBUS_ERR_OK != err) 
                         721 --line323
                         722 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.8::
                         723 .LDWlin8:
000000a0 235f0100        724 	ld.w	0[sp],r11
000000a4 e059            725 	cmp	zero,r11
000000a6 c205*           726 	be	.L284
                         727 --324:     {
                         728 --325:         return err; 
                         729 --line325
                         730 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.9::
                         731 .LDWlin9:
000000a8 23570100        732 	ld.w	0[sp],r10
000000ac c575*           733 	br	.L282
                         734 .L284:
                         735 --326:     }
                         736 --327:     /* Get register base address */
                         737 --328:     locBaseAddr = R_XBUS_SYS_BaseAddr(Unit); 
                         738 --line328
                         739 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.10::
                         740 .LDWlin10:
000000ae 23370900        741 	ld.w	8[sp],r6
                         742 	jarl	_R_XBUS_SYS_BaseAddr,lp
                         742 <EXPANSION BEGIN>
                         742 jarl22 _R_XBUS_SYS_BaseAddr , lp 
000000b2 80ff0000*       742 <EXPANSION END>
000000b6 7c570100        743 	st.w	r10,0[r28]
                         744 --329:     /* get max index (depending on the device) */
                         745 --330:     locMaxIdx   = R_XBUS_SYS_GetMaxIdx(Unit); 
                         746 --line330
                         747 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.11::
                         748 .LDWlin11:
000000ba 23370900        749 	ld.w	8[sp],r6
                         750 	jarl	_R_XBUS_SYS_GetMaxIdx,lp
                         750 <EXPANSION BEGIN>
                         750 jarl22 _R_XBUS_SYS_GetMaxIdx , lp 
000000be 80ff0000*       750 <EXPANSION END>
000000c2 2b0600000000*   751 	mov	_locMaxIdx,r11
000000c8 6b570100        752 	st.w	r10,0[r11]
                         753 --331:     
                         754 --332:     /* check if we have a device with some cache  */
                         755 --333:     if (0 == locMaxIdx) 
                         756 --line333
                         757 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.12::
                         758 .LDWlin12:
000000cc 210600000000*   759 	mov	_locMaxIdx,r1
000000d2 210f0100        760 	ld.w	0[r1],r1
000000d6 e009            761 	cmp	zero,r1
000000d8 da05*           762 	bne	.L287
                         763 --334:     {

                                                                      Page 14
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         764 --335:         locBaseAddr = 0; 
                         765 --line335
                         766 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.13::
                         767 .LDWlin13:
000000da 7c070100        768 	st.w	zero,0[r28]
                         769 --336:         return R_XBUS_ERR_NG;
000000de 0152            770 	mov	1,r10
000000e0 a55d*           771 	br	.L282
                         772 .L287:
                         773 --337:     }
                         774 --338:     
                         775 --339:     /* 1. lock clear */
                         776 --340:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_SYSERR, 0); 
                         777 --line340
                         778 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.14::
                         779 .LDWlin14:
000000e2 3cf70100        780 	ld.w	0[r28],ep
000000e6 0705            781 	sst.w	zero,12[ep]
                         782 --341:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_ERRCNT, 0); 
000000e8 3cf70100        783 	ld.w	0[r28],ep
000000ec 0905            784 	sst.w	zero,16[ep]
                         785 --343:     reg_val = R_XBUS_READ_REG(32, locBaseAddr + R_XBUS_CFG); 
000000ee 3cf70100        786 	ld.w	0[r28],ep
000000f2 00ed            787 	sld.w	0[ep],r29
                         788 --344:  
                         789 --345:      reg_val  = 0; 
000000f4 00ea            790 	mov	0,r29
                         791 --346:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_TAGLO,   reg_val); 
000000f6 3cf70100        792 	ld.w	0[r28],ep
000000fa 13ed            793 	sst.w	r29,36[ep]
                         794 --347:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_LRU,     reg_val); 
000000fc 3cf70100        795 	ld.w	0[r28],ep
00000100 15ed            796 	sst.w	r29,40[ep]
                         797 --348:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_DATALO,  reg_val); 
00000102 3cf70100        798 	ld.w	0[r28],ep
00000106 17ed            799 	sst.w	r29,44[ep]
                         800 --349:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_DATAHI,  reg_val); 
00000108 3cf70100        801 	ld.w	0[r28],ep
0000010c 19ed            802 	sst.w	r29,48[ep]
                         803 --350:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_DATAECC, reg_val); 
0000010e 3cf70100        804 	ld.w	0[r28],ep
00000112 1ded            805 	sst.w	r29,56[ep]
                         806 --351:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_TAGECC,  reg_val); 
00000114 3cf70100        807 	ld.w	0[r28],ep
00000118 1bed            808 	sst.w	r29,52[ep]
                         809 --352:  
                         810 --353:     /* 2. initialize  */
                         811 --355:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_SYSERR, 0); 
0000011a 3cf70100        812 	ld.w	0[r28],ep
0000011e 0705            813 	sst.w	zero,12[ep]
                         814 --356:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_ERRCNT, 0); 
00000120 3cf70100        815 	ld.w	0[r28],ep
00000124 0905            816 	sst.w	zero,16[ep]
                         817 --357:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_ERRADR, 0); 
00000126 3cf70100        818 	ld.w	0[r28],ep
0000012a 0b05            819 	sst.w	zero,20[ep]
                         820 --358:  
                         821 --359:     /* initialise Cache RAM */
                         822 --360:     
                         823 --361:     for (i = 0; i < locMaxIdx ; i++) 
0000012c 00d2            824 	mov	0,r26

                                                                      Page 15
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
0000012e a525*           825 	br	.L293
                         826 .L292:
                         827 --362:     { 
                         828 --363:         for (j = 0; j < (R_XBUS_CACHE_BLK_NB * R_XBUS_CACHE_WAY_NB); j++) 
                         829 --line363
                         830 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.15::
                         831 .LDWlin15:
00000130 00da            832 	mov	0,r27
00000132 0000            833 	nop
                         834 .L296:
                         835 --364:         {
                         836 --365:             cmd         = IDX_ST_TAG; 
00000134 01ca            837 	mov	1,r25
                         838 --366:             reg_val     = (uint32_t)cmd; 
00000136 19e8            839 	mov	r25,r29
                         840 --367:             reg_val   <<= 1u;
00000138 c1ea            841 	shl	1,r29
                         842 --368:             /* Command activation */
                         843 --369:             reg_val    |= 1u;
0000013a 9dee0100        844 	ori	1,r29,r29
                         845 --370:             /* add next index to the command */
                         846 --371:             reg_val    |= (i<<5u); 
0000013e 1a08            847 	mov	r26,r1
00000140 c50a            848 	shl	5,r1
00000142 01e9            849 	or	r1,r29
                         850 --372:             /* Block&way are bit 19-16 and not 15-12 */
                         851 --373:              reg_val   |= (j<<16u); 
00000144 1b08            852 	mov	r27,r1
00000146 d00a            853 	shl	16,r1
00000148 01e9            854 	or	r1,r29
                         855 --374:            
                         856 --375:             /* Write command */
                         857 --376:             loc_WriteCmd(reg_val); 
0000014a 1d30            858 	mov	r29,r6
                         859 	jarl	_loc_WriteCmd,lp
                         859 <EXPANSION BEGIN>
                         859 jarl22 _loc_WriteCmd , lp 
0000014c bfffb4fe*       859 <EXPANSION END>
                         860 --377:            
                         861 --378:             /* clear command type */
                         862 --379:             reg_val     &=(uint32_t) (~(uint32_t)0x0000001eu);  
                         863 --line379
                         864 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.16::
                         865 .LDWlin16:
00000150 200ee1ff        866 	movea	-31,zero,r1
00000154 41e9            867 	and	r1,r29
                         868 --380:             cmd         = IDX_ST_DATA; 
00000156 03ca            869 	mov	3,r25
                         870 --381:             /* Set new command */
                         871 --382:             reg_val     |= ((uint32_t)cmd <<1); 
00000158 1908            872 	mov	r25,r1
0000015a c10a            873 	shl	1,r1
0000015c 01e9            874 	or	r1,r29
                         875 --384:             /* Command activation */
                         876 --385:             reg_val    |= 1u;
0000015e 9dee0100        877 	ori	1,r29,r29
                         878 --386:     
                         879 --387:             /* Write command */
                         880 --388:             loc_WriteCmd(reg_val); 
00000162 1d30            881 	mov	r29,r6
                         882 	jarl	_loc_WriteCmd,lp

                                                                      Page 16
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         882 <EXPANSION BEGIN>
                         882 jarl22 _loc_WriteCmd , lp 
00000164 bfff9cfe*       882 <EXPANSION END>
                         883 --line363
                         884 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.17::
                         885 .LDWlin17:
00000168 41da            886 	add	1,r27
0000016a 1b06f0ff        887 	addi	-16,r27,zero
0000016e b9e5*           888 	bnl	.L296
                         889 --line361
                         890 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.18::
                         891 .LDWlin18:
00000170 41d2            892 	add	1,r26
                         893 .L293:
00000172 210600000000*   894 	mov	_locMaxIdx,r1
00000178 210f0100        895 	ld.w	0[r1],r1
0000017c e1d1            896 	cmp	r1,r26
0000017e 91dd*           897 	bl	.L292
                         898 --389:         }
                         899 --390:     }
                         900 --392:     
                         901 --393:     /* init cache config, disable cache area  */
                         902 --394:     /*  disable wait insertion */
                         903 --395:     reg_val = 0x00000303;
                         904 --line395
                         905 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.19::
                         906 .LDWlin19:
00000180 20ee0303        907 	movea	771,zero,r29
                         908 --396:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CFG, reg_val); 
00000184 3cf70100        909 	ld.w	0[r28],ep
00000188 01ed            910 	sst.w	r29,0[ep]
                         911 --397:  
                         912 --398:     /* synchronise ... whatever */
                         913 --399:     reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_REQSYNC);  
0000018a 3cf70100        914 	ld.w	0[r28],ep
0000018e 0ced            915 	sld.w	24[ep],r29
                         916 --400:     
                         917 --401:     #ifdef USE_ROS
                         918 --402:     R_OS_ThreadMutexInit(&locXcLock, 0);
                         919 --403:     #endif
                         920 --405:     return err;
00000190 23570100        921 	ld.w	0[sp],r10
                         922 .L282:
                         923 --	    .ef
                         924 .LDW92:
00000194 4606ff70        925 	dispose	3,{r25,r26,r27,r28,r29,r31},[lp]
                         926 	.type	_R_XBUS_Init,@function
                         927 	.size	_R_XBUS_Init,.-_R_XBUS_Init
                         928 	.align	2
                         929 .LDW03:
                         930 --_err	0[sp]	local
                         931 --_reg_val	r29	local
                         932 --_cmd	r25	local
                         933 --_i	r26	local
                         934 --_j	r27	local
                         935 
                         936 --_Unit	8[sp]	param
                         937 
                         938 	.section ".bss","awb"
                         939 .L514:
                         940 	.type	.L514,@object

                                                                      Page 17
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                         941 	.size	.L514,0
                         942 	.data
                         943 	.text
                         944 
                         945 --406: }
                         946 
                         947 --409: /*******************************************************************************
                         948 --410:   Function: R_XBUS_Invalidate
                         949 --412:   See: <xbus_api.h> 
                         950 --413: */
                         951 --415:  r_xbus_Error_t R_XBUS_Invalidate(uint32_t Unit) 
                         952 	.align	2
                         953 	.align	2
                         954 	.global	_R_XBUS_Invalidate
                         955 _R_XBUS_Invalidate:
00000198 8807e170        956 	prepare	{r25,r26,r27,r28,r29,r31},4
0000019c 63370d00        957 	st.w	r6,12[sp]
                         958 --	    .bf
                         959 .LDW13:
                         960 --416:  {
                         961 --417:     r_xbus_Error_t    err       = R_XBUS_ERR_OK;
000001a0 63070500        962 	st.w	zero,4[sp]
000001a4 005a            963 	mov	0,r11
                         964 --418:     volatile uint32_t reg_val   = 0; 
000001a6 00ea            965 	mov	0,r29
                         966 --419:     volatile uint32_t tag_lo    = 0; 
000001a8 00d2            967 	mov	0,r26
                         968 --420:     loc_CacheCmd_t    cmd       = CLEAR; 
000001aa 08ca            969 	mov	8,r25
                         970 --421:     uint32_t          i         = 0; 
000001ac 00e2            971 	mov	0,r28
                         972 --422:     uint32_t          j         = 0; 
000001ae 00da            973 	mov	0,r27
                         974 --423:     err = R_XBUS_CheckMacroParams(Unit); 
000001b0 23370d00        975 	ld.w	12[sp],r6
                         976 	jarl	_R_XBUS_CheckMacroParams,lp
                         976 <EXPANSION BEGIN>
                         976 jarl22 _R_XBUS_CheckMacroParams , lp 
000001b4 bfff74fe*       976 <EXPANSION END>
000001b8 63570500        977 	st.w	r10,4[sp]
                         978 --424:     if (R_XBUS_ERR_OK != err) 
                         979 --line424
                         980 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.20::
                         981 .LDWlin20:
000001bc 235f0500        982 	ld.w	4[sp],r11
000001c0 e059            983 	cmp	zero,r11
000001c2 c205*           984 	be	.L675
                         985 --425:     {
                         986 --426:         return err; 
                         987 --line426
                         988 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.21::
                         989 .LDWlin21:
000001c4 23570500        990 	ld.w	4[sp],r10
000001c8 856d*           991 	br	.L673
                         992 .L675:
                         993 --427:     }
                         994 --428:     /* Get register base address */
                         995 --429:     locBaseAddr = R_XBUS_SYS_BaseAddr(Unit); 
                         996 --line429
                         997 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.22::
                         998 .LDWlin22:

                                                                      Page 18
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
000001ca 23370d00        999 	ld.w	12[sp],r6
                        1000 	jarl	_R_XBUS_SYS_BaseAddr,lp
                        1000 <EXPANSION BEGIN>
                        1000 jarl22 _R_XBUS_SYS_BaseAddr , lp 
000001ce 80ff0000*      1000 <EXPANSION END>
000001d2 2b0600000000*  1001 	mov	_locBaseAddr,r11
000001d8 6b570100       1002 	st.w	r10,0[r11]
                        1003 --430:     /* get max index (depending on the device) */
                        1004 --431:     locMaxIdx   = R_XBUS_SYS_GetMaxIdx(Unit); 
                        1005 --line431
                        1006 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.23::
                        1007 .LDWlin23:
000001dc 23370d00       1008 	ld.w	12[sp],r6
                        1009 	jarl	_R_XBUS_SYS_GetMaxIdx,lp
                        1009 <EXPANSION BEGIN>
                        1009 jarl22 _R_XBUS_SYS_GetMaxIdx , lp 
000001e0 80ff0000*      1009 <EXPANSION END>
000001e4 2b0600000000*  1010 	mov	_locMaxIdx,r11
000001ea 6b570100       1011 	st.w	r10,0[r11]
                        1012 --432:     
                        1013 --433:     /* check if we have a device with some cache  */
                        1014 --434:     if (0 == locMaxIdx) 
                        1015 --line434
                        1016 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.24::
                        1017 .LDWlin24:
000001ee 210600000000*  1018 	mov	_locMaxIdx,r1
000001f4 210f0100       1019 	ld.w	0[r1],r1
000001f8 e009           1020 	cmp	zero,r1
000001fa 8a0d*          1021 	bne	.L678
                        1022 --435:     {
                        1023 --436:         locBaseAddr = 0; 
                        1024 --line436
                        1025 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.25::
                        1026 .LDWlin25:
000001fc 2b0600000000*  1027 	mov	_locBaseAddr,r11
00000202 6b070100       1028 	st.w	zero,0[r11]
                        1029 --437:         return R_XBUS_ERR_NG;
00000206 0152           1030 	mov	1,r10
00000208 854d*          1031 	br	.L673
                        1032 .L678:
                        1033 --438:     }
                        1034 --439:     
                        1035 --440:     /* 1. lock clear */
                        1036 --441:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_SYSERR, 0); 
                        1037 --line441
                        1038 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.26::
                        1039 .LDWlin26:
0000020a 3e0600000000*  1040 	mov	_locBaseAddr,ep
00000210 00f5           1041 	sld.w	0[ep],ep
00000212 0705           1042 	sst.w	zero,12[ep]
                        1043 --442:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_ERRCNT, 0); 
00000214 3e0600000000*  1044 	mov	_locBaseAddr,ep
0000021a 00f5           1045 	sld.w	0[ep],ep
0000021c 0905           1046 	sst.w	zero,16[ep]
                        1047 --444:     reg_val = R_XBUS_READ_REG(32, locBaseAddr + R_XBUS_CFG); 
0000021e 3e0600000000*  1048 	mov	_locBaseAddr,ep
00000224 00f5           1049 	sld.w	0[ep],ep
00000226 00ed           1050 	sld.w	0[ep],r29
                        1051 --445:  
                        1052 --446:     reg_val  = 0; 
00000228 00ea           1053 	mov	0,r29

                                                                      Page 19
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1054 --447:  
                        1055 --448:     /* Invalidate (but don't write back) Cache RAM */
                        1056 --449:     
                        1057 --450:     for (i = 0; i < locMaxIdx ; i++) 
0000022a 00e2           1058 	mov	0,r28
0000022c d52d*          1059 	br	.L684
                        1060 .L683:
                        1061 --451:     { 
                        1062 --452:         for (j = 0; j < R_XBUS_CACHE_WAY_NB; j++) 
                        1063 --line452
                        1064 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.27::
                        1065 .LDWlin27:
0000022e 00da           1066 	mov	0,r27
00000230 0000           1067 	nop
                        1068 .L687:
                        1069 --453:         {
                        1070 --454:             cmd         = IDX_LD_TAG; 
00000232 00ca           1071 	mov	0,r25
                        1072 --455:             reg_val     = (uint32_t)cmd; 
00000234 19e8           1073 	mov	r25,r29
                        1074 --456:             reg_val   <<= 1u;
00000236 c1ea           1075 	shl	1,r29
                        1076 --457:             /* Command activation */
                        1077 --458:             reg_val    |= 1u;
00000238 9dee0100       1078 	ori	1,r29,r29
                        1079 --459:             /* add next index to the command */
                        1080 --460:             reg_val    |= (i<<5u); 
0000023c 1c08           1081 	mov	r28,r1
0000023e c50a           1082 	shl	5,r1
00000240 01e9           1083 	or	r1,r29
                        1084 --461:             /* Block&way are bit 19-16 and not 15-12 */
                        1085 --462:              reg_val   |= (j<<16u); 
00000242 1b08           1086 	mov	r27,r1
00000244 d00a           1087 	shl	16,r1
00000246 01e9           1088 	or	r1,r29
                        1089 --463:            
                        1090 --464:             /* Write command */
                        1091 --465:             loc_WriteCmd(reg_val); 
00000248 1d30           1092 	mov	r29,r6
                        1093 	jarl	_loc_WriteCmd,lp
                        1093 <EXPANSION BEGIN>
                        1093 jarl22 _loc_WriteCmd , lp 
0000024a bfffb6fd*      1093 <EXPANSION END>
                        1094 --466:            
                        1095 --467:             tag_lo = R_XBUS_READ_REG(32, locBaseAddr + R_XBUS_TAGLO); 
                        1096 --line467
                        1097 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.28::
                        1098 .LDWlin28:
0000024e 3e0600000000*  1099 	mov	_locBaseAddr,ep
00000254 00f5           1100 	sld.w	0[ep],ep
00000256 12d5           1101 	sld.w	36[ep],r26
                        1102 --468:             /* Clear valid bit */
                        1103 --469:             tag_lo &= 0xFFFFFFFEu; 
00000258 1e0a           1104 	mov	-2,r1
0000025a 41d1           1105 	and	r1,r26
                        1106 --470:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_TAGLO, tag_lo); 
0000025c 3e0600000000*  1107 	mov	_locBaseAddr,ep
00000262 00f5           1108 	sld.w	0[ep],ep
00000264 13d5           1109 	sst.w	r26,36[ep]
                        1110 --471:             
                        1111 --472:               /* clear command type */

                                                                      Page 20
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1112 --473:             reg_val     &=(uint32_t) (~(uint32_t)0x0000001eu);  
00000266 200ee1ff       1113 	movea	-31,zero,r1
0000026a 41e9           1114 	and	r1,r29
                        1115 --474:          
                        1116 --475:             /* clear command type */
                        1117 --476:             cmd         = IDX_ST_TAG; 
0000026c 01ca           1118 	mov	1,r25
                        1119 --477:             /* Set new command */
                        1120 --478:             reg_val     |= ((uint32_t)cmd <<1); 
0000026e 1908           1121 	mov	r25,r1
00000270 c10a           1122 	shl	1,r1
00000272 01e9           1123 	or	r1,r29
                        1124 --479:              /* Command activation */
                        1125 --480:             reg_val     |= 1u;
00000274 9dee0100       1126 	ori	1,r29,r29
                        1127 --482:             /* Write command */
                        1128 --483:             loc_WriteCmd(reg_val); 
00000278 1d30           1129 	mov	r29,r6
                        1130 	jarl	_loc_WriteCmd,lp
                        1130 <EXPANSION BEGIN>
                        1130 jarl22 _loc_WriteCmd , lp 
0000027a bfff86fd*      1130 <EXPANSION END>
                        1131 --line452
                        1132 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.29::
                        1133 .LDWlin29:
0000027e 41da           1134 	add	1,r27
00000280 64da           1135 	cmp	4,r27
00000282 81dd*          1136 	bl	.L687
                        1137 --line450
                        1138 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.30::
                        1139 .LDWlin30:
00000284 41e2           1140 	add	1,r28
                        1141 .L684:
00000286 210600000000*  1142 	mov	_locMaxIdx,r1
0000028c 210f0100       1143 	ld.w	0[r1],r1
00000290 e1e1           1144 	cmp	r1,r28
00000292 e1cd*          1145 	bl	.L683
                        1146 --484:         }
                        1147 --485:     }
                        1148 --486:     
                        1149 --487:     #ifdef USE_ROS
                        1150 --488:     R_OS_ThreadMutexInit(&locXcLock, 0);
                        1151 --489:     #endif
                        1152 --491:     return err;
                        1153 --line491
                        1154 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.31::
                        1155 .LDWlin31:
00000294 23570500       1156 	ld.w	4[sp],r10
                        1157 .L673:
                        1158 --	    .ef
                        1159 .LDW23:
00000298 4806ff70       1160 	dispose	4,{r25,r26,r27,r28,r29,r31},[lp]
                        1161 	.type	_R_XBUS_Invalidate,@function
                        1162 	.size	_R_XBUS_Invalidate,.-_R_XBUS_Invalidate
                        1163 	.align	2
                        1164 .LDW33:
                        1165 --_err	4[sp]	local
                        1166 --_reg_val	r29	local
                        1167 --_tag_lo	r26	local
                        1168 --_cmd	r25	local
                        1169 --_i	r28	local

                                                                      Page 21
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1170 --_j	r27	local
                        1171 
                        1172 --_Unit	12[sp]	param
                        1173 
                        1174 	.section ".bss","awb"
                        1175 .L866:
                        1176 	.type	.L866,@object
                        1177 	.size	.L866,0
                        1178 	.data
                        1179 	.text
                        1180 
                        1181 --492: }
                        1182 
                        1183 --495: /*******************************************************************************
                        1184 --496:   Function: R_XBUS_DeInit
                        1185 --498:   See: <xbus_api.h> 
                        1186 --499: */
                        1187 --501:  r_xbus_Error_t R_XBUS_DeInit(uint32_t Unit)
                        1188 	.align	2
                        1189 	.align	2
                        1190 	.global	_R_XBUS_DeInit
                        1191 _R_XBUS_DeInit:
0000029c 0668           1192 	mov	r6,r13
0000029e 210600000000*  1193 	mov	_locBaseAddr,r1
                        1194 --	    .bf
                        1195 .LDW43:
                        1196 --502:  {
                        1197 --503:     r_xbus_Error_t err = R_XBUS_ERR_OK;
000002a4 0072           1198 	mov	0,r14
                        1199 --504:     locBaseAddr = 0; 
000002a6 2b0600000000*  1200 	mov	_locBaseAddr,r11
000002ac 6b070100       1201 	st.w	zero,0[r11]
                        1202 --505:     return err;
000002b0 0e50           1203 	mov	r14,r10
                        1204 --	    .ef
                        1205 .LDW53:
000002b2 7f00           1206 	jmp	[lp]
                        1207 	.type	_R_XBUS_DeInit,@function
                        1208 	.size	_R_XBUS_DeInit,.-_R_XBUS_DeInit
                        1209 	.align	2
                        1210 .LDW63:
                        1211 --_err	r14	local
                        1212 
                        1213 --_Unit	r13	param
                        1214 
                        1215 	.data
                        1216 	.text
                        1217 
                        1218 --506: }
                        1219 
                        1220 --509: /*******************************************************************************
                        1221 --510:   Function: R_XBUS_Config
                        1222 --511: */
                        1223 --513: r_xbus_Error_t R_XBUS_Config(uint32_t Unit, r_xbus_Cfg_t * Cfg)
                        1224 	.align	2
                        1225 	.align	2
                        1226 	.global	_R_XBUS_Config
                        1227 _R_XBUS_Config:
000002b4 8807e170       1228 	prepare	{r25,r26,r27,r28,r29,r31},4
000002b8 63370d00       1229 	st.w	r6,12[sp]
000002bc 07d8           1230 	mov	r7,r27

                                                                      Page 22
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
000002be 3d0600000000*  1231 	mov	_CacheAreas,r29
000002c4 390600000000*  1232 	mov	_locBaseAddr,r25
                        1233 --	    .bf
                        1234 .LDW73:
                        1235 --514: {
                        1236 --515:     /* Init X-BUS */
                        1237 --516:     r_xbus_Error_t    err       = R_XBUS_ERR_OK;
000002ca 63070900       1238 	st.w	zero,8[sp]
000002ce 005a           1239 	mov	0,r11
                        1240 --517:     volatile uint32_t reg_val   = 0; 
000002d0 00e2           1241 	mov	0,r28
                        1242 --518:     uint32_t          i,j;  
                        1243 --519:     if (0 == locBaseAddr) 
000002d2 390f0100       1244 	ld.w	0[r25],r1
000002d6 e009           1245 	cmp	zero,r1
000002d8 9a0d*          1246 	bne	.L1049
                        1247 --520:     {
                        1248 --521:         /* You need to call init first */
                        1249 --522:         R_XBUS_ErrorHandler(0, err); 
                        1250 --line522
                        1251 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.32::
                        1252 .LDWlin32:
000002da 233f0900       1253 	ld.w	8[sp],r7
000002de 0032           1254 	mov	0,r6
                        1255 	jarl	_R_XBUS_ErrorHandler,lp
                        1255 <EXPANSION BEGIN>
                        1255 jarl22 _R_XBUS_ErrorHandler , lp 
000002e0 bfff56fd*      1255 <EXPANSION END>
                        1256 --523:         return R_XBUS_ERR_NOTLOCKED; 
                        1257 --line523
                        1258 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.33::
                        1259 .LDWlin33:
000002e4 0452           1260 	mov	4,r10
000002e6 8007a801*      1261 	br	.L1047
                        1262 .L1049:
                        1263 --524:     }    
                        1264 --525:     /* Set base & mask */
                        1265 --526:     /* Cached */
                        1266 --527:     reg_val = Cfg->AreaCfg[0].BaseAddr; 
                        1267 --line527
                        1268 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.34::
                        1269 .LDWlin34:
000002ea 3be70d00       1270 	ld.w	12[r27],r28
                        1271 --528:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CABASE0, reg_val); 
000002ee 39f70100       1272 	ld.w	0[r25],ep
000002f2 21e5           1273 	sst.w	r28,64[ep]
                        1274 --529:     reg_val =  Cfg->AreaCfg[0].AddrMask; 
000002f4 3be71100       1275 	ld.w	16[r27],r28
                        1276 --530:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CAMASK0, reg_val); 
000002f8 39f70100       1277 	ld.w	0[r25],ep
000002fc 23e5           1278 	sst.w	r28,68[ep]
                        1279 --531:     
                        1280 --532:     reg_val =  Cfg->AreaCfg[1].BaseAddr; 
000002fe 3be71d00       1281 	ld.w	28[r27],r28
                        1282 --533:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CABASE1, reg_val); 
00000302 39f70100       1283 	ld.w	0[r25],ep
00000306 25e5           1284 	sst.w	r28,72[ep]
                        1285 --534:     reg_val =  Cfg->AreaCfg[1].AddrMask; 
00000308 3be72100       1286 	ld.w	32[r27],r28
                        1287 --535:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CAMASK1, reg_val); 
0000030c 39f70100       1288 	ld.w	0[r25],ep

                                                                      Page 23
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
00000310 27e5           1289 	sst.w	r28,76[ep]
                        1290 --536:     
                        1291 --537:     /* buffered */
                        1292 --538:     reg_val = Cfg->AreaCfg[2].BaseAddr; 
00000312 3be72d00       1293 	ld.w	44[r27],r28
                        1294 --539:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFBASE0, reg_val); 
00000316 39f70100       1295 	ld.w	0[r25],ep
0000031a 31e5           1296 	sst.w	r28,96[ep]
                        1297 --540:     reg_val =  Cfg->AreaCfg[2].AddrMask; 
0000031c 3be73100       1298 	ld.w	48[r27],r28
                        1299 --541:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFMASK0, reg_val); 
00000320 39f70100       1300 	ld.w	0[r25],ep
00000324 33e5           1301 	sst.w	r28,100[ep]
                        1302 --543:     reg_val =  Cfg->AreaCfg[3].BaseAddr; 
00000326 3be73d00       1303 	ld.w	60[r27],r28
                        1304 --544:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFBASE1, reg_val); 
0000032a 39f70100       1305 	ld.w	0[r25],ep
0000032e 35e5           1306 	sst.w	r28,104[ep]
                        1307 --545:     reg_val =  Cfg->AreaCfg[3].AddrMask; 
00000330 3be74100       1308 	ld.w	64[r27],r28
                        1309 --546:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFMASK1, reg_val); 
00000334 39f70100       1310 	ld.w	0[r25],ep
00000338 37e5           1311 	sst.w	r28,108[ep]
                        1312 --547:     
                        1313 --548:     for (i = 0; i < 4; i++)
0000033a 00d2           1314 	mov	0,r26
0000033c 0000           1315 	nop
                        1316 .L1054:
                        1317 --549:     {
                        1318 --550:         /* Check if cache disabled */
                        1319 --551:         CacheAreas[i].Mode  = Cfg->AreaCfg[i].Mode; 
0000033e 1af0           1320 	mov	r26,ep
00000340 1a08           1321 	mov	r26,r1
00000342 fe00           1322 	sxh	ep
00000344 1b760400       1323 	addi	4,r27,r14
00000348 fef60c00       1324 	mulhi	12,ep,ep
0000034c c40a           1325 	shl	4,r1
0000034e ce09           1326 	add	r14,r1
00000350 210f0100       1327 	ld.w	0[r1],r1
00000354 2b0600000000*  1328 	mov	_CacheAreas,r11
0000035a cbf1           1329 	add	r11,ep
0000035c 880b           1330 	sst.b	r1,8[ep]
                        1331 --552:         CacheAreas[i].Start = Cfg->AreaCfg[i].BaseAddr;
0000035e 1af0           1332 	mov	r26,ep
00000360 1a08           1333 	mov	r26,r1
00000362 fe00           1334 	sxh	ep
00000364 1b760400       1335 	addi	4,r27,r14
00000368 fef60c00       1336 	mulhi	12,ep,ep
0000036c c40a           1337 	shl	4,r1
0000036e ce09           1338 	add	r14,r1
00000370 210f0900       1339 	ld.w	8[r1],r1
00000374 2b0600000000*  1340 	mov	_CacheAreas,r11
0000037a cbf1           1341 	add	r11,ep
0000037c 010d           1342 	sst.w	r1,0[ep]
                        1343 --553:         CacheAreas[i].End   = Cfg->AreaCfg[i].BaseAddr;
0000037e 1af0           1344 	mov	r26,ep
00000380 1a08           1345 	mov	r26,r1
00000382 fe00           1346 	sxh	ep
00000384 1b760400       1347 	addi	4,r27,r14
00000388 fef60c00       1348 	mulhi	12,ep,ep
0000038c c40a           1349 	shl	4,r1

                                                                      Page 24
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
0000038e ce09           1350 	add	r14,r1
00000390 210f0900       1351 	ld.w	8[r1],r1
00000394 2b0600000000*  1352 	mov	_CacheAreas,r11
0000039a cbf1           1353 	add	r11,ep
0000039c 030d           1354 	sst.w	r1,4[ep]
                        1355 --554:         reg_val             = Cfg->AreaCfg[i].AddrMask; 
0000039e 1af0           1356 	mov	r26,ep
000003a0 c4f2           1357 	shl	4,ep
000003a2 1b760400       1358 	addi	4,r27,r14
000003a6 cef1           1359 	add	r14,ep
000003a8 06e5           1360 	sld.w	12[ep],r28
                        1361 --555:         j                   = 0; 
000003aa 63070100       1362 	st.w	zero,0[sp]
000003ae 005a           1363 	mov	0,r11
                        1364 --556:         while (((reg_val >> 20u) & 0x1u) > 0)
000003b0 851d*          1365 	br	.L1055
                        1366 .L1057:
                        1367 --557:         {
                        1368 --558:             /* The cache "mask" means the size equals to 
                        1369 --559:             1MB per bit set in the R_XBUS_CAMASK0 register 
                        1370 --560:             the first 0 (starting from bit 20) 
                        1371 --561:             in the mask is the delimeter */
                        1372 --562:             CacheAreas[i].End += ((1024u * 1024u) << j); 
                        1373 --line562
                        1374 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.35::
                        1375 .LDWlin35:
000003b2 1af0           1376 	mov	r26,ep
000003b4 fe00           1377 	sxh	ep
000003b6 235f0100       1378 	ld.w	0[sp],r11
000003ba 400e1000       1379 	movhi	hi(1048576),zero,r1
000003be fef60c00       1380 	mulhi	12,ep,ep
000003c2 2c0600000000*  1381 	mov	_CacheAreas,r12
000003c8 eb0fc270       1382 	shl	r11,r1,r14
000003cc ccf1           1383 	add	r12,ep
000003ce 020d           1384 	sld.w	4[ep],r1
000003d0 ce09           1385 	add	r14,r1
000003d2 030d           1386 	sst.w	r1,4[ep]
                        1387 --563:             reg_val          >>= 1u; 
000003d4 81e2           1388 	shr	1,r28
                        1389 --564:             j++;      
000003d6 235f0100       1390 	ld.w	0[sp],r11
000003da 415a           1391 	add	1,r11
000003dc 635f0100       1392 	st.w	r11,0[sp]
                        1393 .L1055:
000003e0 1c08           1394 	mov	r28,r1
000003e2 940a           1395 	shr	20,r1
000003e4 810a           1396 	shr	1,r1
000003e6 e1e5*          1397 	bl	.L1057
                        1398 --line548
                        1399 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.36::
                        1400 .LDWlin36:
000003e8 41d2           1401 	add	1,r26
000003ea 64d2           1402 	cmp	4,r26
000003ec 91ad*          1403 	bl	.L1054
                        1404 --565:         }        
                        1405 --566:     }
                        1406 --567:     /* Store the config */    
                        1407 --568:     /* Start with the initial value for the CFG register */
                        1408 --569:     reg_val = 0x00000303;
                        1409 --line569
                        1410 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.37::

                                                                      Page 25
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1411 .LDWlin37:
000003ee 20e60303       1412 	movea	771,zero,r28
                        1413 --571:     if (R_XBUS_AM_CACHE == Cfg->AreaCfg[0].Mode)
000003f2 3b0f0500       1414 	ld.w	4[r27],r1
000003f6 610a           1415 	cmp	1,r1
000003f8 ca05*          1416 	bne	.L1058
                        1417 --572:     {
                        1418 --573:         reg_val |= 0x00000004u; 
                        1419 --line573
                        1420 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.38::
                        1421 .LDWlin38:
000003fa 9ce60400       1422 	ori	4,r28,r28
000003fe b505*          1423 	br	.L1060
                        1424 .L1058:
                        1425 --574:     }
                        1426 --575:     else 
                        1427 --576:     {
                        1428 --577:         reg_val &= (uint32_t)(~((uint32_t)0x00000004u)); 
                        1429 --line577
                        1430 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.39::
                        1431 .LDWlin39:
00000400 1b0a           1432 	mov	-5,r1
00000402 41e1           1433 	and	r1,r28
                        1434 .L1060:
                        1435 --578:     } 
                        1436 --579:     if (R_XBUS_AM_CACHE == Cfg->AreaCfg[1].Mode)
00000404 3b0f1500       1437 	ld.w	20[r27],r1
00000408 610a           1438 	cmp	1,r1
0000040a ca05*          1439 	bne	.L1061
                        1440 --580:     {
                        1441 --581:         reg_val |= 0x00000008u; 
                        1442 --line581
                        1443 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.40::
                        1444 .LDWlin40:
0000040c 9ce60800       1445 	ori	8,r28,r28
00000410 b505*          1446 	br	.L1063
                        1447 .L1061:
                        1448 --582:     }
                        1449 --583:     else 
                        1450 --584:     {
                        1451 --585:         reg_val &= (uint32_t)(~((uint32_t)0x00000008u)); 
                        1452 --line585
                        1453 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.41::
                        1454 .LDWlin41:
00000412 170a           1455 	mov	-9,r1
00000414 41e1           1456 	and	r1,r28
                        1457 .L1063:
                        1458 --586:     } 
                        1459 --589:     if (R_XBUS_AM_BUFF == Cfg->AreaCfg[2].Mode)
00000416 3b0f2500       1460 	ld.w	36[r27],r1
0000041a 620a           1461 	cmp	2,r1
0000041c ca05*          1462 	bne	.L1064
                        1463 --590:     {
                        1464 --591:         reg_val |= 0x00000100u; 
                        1465 --line591
                        1466 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.42::
                        1467 .LDWlin42:
0000041e 9ce60001       1468 	ori	256,r28,r28
00000422 c505*          1469 	br	.L1066
                        1470 .L1064:
                        1471 --592:     }

                                                                      Page 26
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1472 --593:     else 
                        1473 --594:     {
                        1474 --595:         reg_val &= (uint32_t)(~((uint32_t)0x00000100u)); 
                        1475 --line595
                        1476 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.43::
                        1477 .LDWlin43:
00000424 200efffe       1478 	movea	-257,zero,r1
00000428 41e1           1479 	and	r1,r28
                        1480 .L1066:
                        1481 --596:     } 
                        1482 --597:     if (R_XBUS_AM_BUFF == Cfg->AreaCfg[3].Mode)
0000042a 3b0f3500       1483 	ld.w	52[r27],r1
0000042e 620a           1484 	cmp	2,r1
00000430 ca05*          1485 	bne	.L1067
                        1486 --598:     {
                        1487 --599:         reg_val |= 0x00000200u; 
                        1488 --line599
                        1489 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.44::
                        1490 .LDWlin44:
00000432 9ce60002       1491 	ori	512,r28,r28
00000436 c505*          1492 	br	.L1069
                        1493 .L1067:
                        1494 --600:     }
                        1495 --601:     else 
                        1496 --602:     {
                        1497 --603:         reg_val &= (uint32_t)(~((uint32_t)0x00000200u)); 
                        1498 --line603
                        1499 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.45::
                        1500 .LDWlin45:
00000438 200efffd       1501 	movea	-513,zero,r1
0000043c 41e1           1502 	and	r1,r28
                        1503 .L1069:
                        1504 --604:     } 
                        1505 --605:     if (1 == Cfg->WaitInsertion) 
0000043e 9b0f0100       1506 	ld.bu	0[r27],r1
00000442 610a           1507 	cmp	1,r1
00000444 da05*          1508 	bne	.L1070
                        1509 --606:     {
                        1510 --607:         reg_val |= 0x00020000u; 
                        1511 --line607
                        1512 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.46::
                        1513 .LDWlin46:
00000446 400e0200       1514 	movhi	hi(131072),zero,r1
0000044a 01e1           1515 	or	r1,r28
0000044c d505*          1516 	br	.L1072
                        1517 .L1070:
                        1518 --608:     }
                        1519 --609:     else 
                        1520 --610:     {
                        1521 --611:         reg_val &= ~(0x00020000u); 
                        1522 --line611
                        1523 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.47::
                        1524 .LDWlin47:
0000044e 2106fffffdff   1525 	mov	-131073,r1
00000454 41e1           1526 	and	r1,r28
                        1527 .L1072:
                        1528 --612:         
                        1529 --613:     }
                        1530 --614:     if (1 == Cfg->SecRewrite) 
00000456 bb0f0100       1531 	ld.bu	1[r27],r1
0000045a 610a           1532 	cmp	1,r1

                                                                      Page 27
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
0000045c da05*          1533 	bne	.L1073
                        1534 --615:     {
                        1535 --616:         reg_val |= 0x00010000u; 
                        1536 --line616
                        1537 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.48::
                        1538 .LDWlin48:
0000045e 400e0100       1539 	movhi	hi(65536),zero,r1
00000462 01e1           1540 	or	r1,r28
00000464 d505*          1541 	br	.L1075
                        1542 .L1073:
                        1543 --617:     }
                        1544 --618:     else 
                        1545 --619:     {
                        1546 --620:         reg_val &= ~(0x00010000u); 
                        1547 --line620
                        1548 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.49::
                        1549 .LDWlin49:
00000466 2106fffffeff   1550 	mov	-65537,r1
0000046c 41e1           1551 	and	r1,r28
                        1552 .L1075:
                        1553 --621:         
                        1554 --622:     }
                        1555 --623:     /* Write config */
                        1556 --624:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CFG, reg_val); 
0000046e 39f70100       1557 	ld.w	0[r25],ep
00000472 01e5           1558 	sst.w	r28,0[ep]
                        1559 --626:     /* Clear error registers */
                        1560 --628:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_SYSERR, 0x0);
00000474 39f70100       1561 	ld.w	0[r25],ep
00000478 0705           1562 	sst.w	zero,12[ep]
                        1563 --629:     R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_ERRADR, 0x0);  
0000047a 39f70100       1564 	ld.w	0[r25],ep
0000047e 0b05           1565 	sst.w	zero,20[ep]
                        1566 --631:     /* Fill cache */
                        1567 --632:     
                        1568 --633:     reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_REQSYNC);   
00000480 39f70100       1569 	ld.w	0[r25],ep
00000484 0ce5           1570 	sld.w	24[ep],r28
                        1571 --635:     loc_WriteCmd(reg_val); 
00000486 1c30           1572 	mov	r28,r6
                        1573 	jarl	_loc_WriteCmd,lp
                        1573 <EXPANSION BEGIN>
                        1573 jarl22 _loc_WriteCmd , lp 
00000488 bfff78fb*      1573 <EXPANSION END>
                        1574 --636:     return R_XBUS_ERR_OK;
                        1575 --line636
                        1576 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.50::
                        1577 .LDWlin50:
0000048c 0052           1578 	mov	0,r10
                        1579 .L1047:
                        1580 --	    .ef
                        1581 .LDW83:
0000048e 4806ff70       1582 	dispose	4,{r25,r26,r27,r28,r29,r31},[lp]
                        1583 	.type	_R_XBUS_Config,@function
                        1584 	.size	_R_XBUS_Config,.-_R_XBUS_Config
                        1585 	.align	2
                        1586 .LDW93:
                        1587 --_err	8[sp]	local
                        1588 --_reg_val	r28	local
                        1589 --_i	r26	local
                        1590 --_j	0[sp]	local

                                                                      Page 28
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1591 
                        1592 --_Unit	12[sp]	param
                        1593 --_Cfg	r27	param
                        1594 
                        1595 	.data
                        1596 	.text
                        1597 
                        1598 --637: }
                        1599 
                        1600 --639: /*******************************************************************************
                        1601 --640:   Function: R_XBUS_AreaConfig
                        1602 --641: */
                        1603 --643: r_xbus_Error_t R_XBUS_AreaConfig(uint32_t Unit, uint8_t Area, r_xbus_AreaCfg_t * Cfg)
                        1604 	.align	2
                        1605 	.align	2
                        1606 	.global	_R_XBUS_AreaConfig
                        1607 _R_XBUS_AreaConfig:
00000492 8207e170       1608 	prepare	{r25,r26,r27,r28,r29,r31},1
00000496 63370100       1609 	st.w	r6,0[sp]
0000049a c7ceff00       1610 	andi	255,r7,r25
0000049e 08d8           1611 	mov	r8,r27
000004a0 3c0600000000*  1612 	mov	_locBaseAddr,r28
                        1613 --	    .bf
                        1614 .LDW04:
                        1615 --644: {
                        1616 --645:     r_xbus_Error_t    err       = R_XBUS_ERR_OK;
000004a6 00d2           1617 	mov	0,r26
                        1618 --646:     volatile uint32_t reg_val   = 0; 
000004a8 00ea           1619 	mov	0,r29
                        1620 --648:     if (0 == locBaseAddr) 
000004aa 3c0f0100       1621 	ld.w	0[r28],r1
000004ae e009           1622 	cmp	zero,r1
000004b0 fa05*          1623 	bne	.L1535
                        1624 --649:     {
                        1625 --650:         /* You need to call init first */
                        1626 --651:         R_XBUS_ErrorHandler(0, err); 
                        1627 --line651
                        1628 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.51::
                        1629 .LDWlin51:
000004b2 1a38           1630 	mov	r26,r7
000004b4 0032           1631 	mov	0,r6
                        1632 	jarl	_R_XBUS_ErrorHandler,lp
                        1632 <EXPANSION BEGIN>
                        1632 jarl22 _R_XBUS_ErrorHandler , lp 
000004b6 bfff80fb*      1632 <EXPANSION END>
                        1633 --652:         return R_XBUS_ERR_NOTLOCKED; 
                        1634 --line652
                        1635 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.52::
                        1636 .LDWlin52:
000004ba 0452           1637 	mov	4,r10
000004bc c57d*          1638 	br	.L1533
                        1639 .L1535:
                        1640 --653:     }    
                        1641 --655:     if (0 == Area) 
                        1642 --line655
                        1643 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.53::
                        1644 .LDWlin53:
000004be e0c9           1645 	cmp	zero,r25
000004c0 ca3d*          1646 	bne	.L1538
                        1647 --656:     {
                        1648 --657:         if (R_XBUS_AM_CACHE == Cfg->Mode)

                                                                      Page 29
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1649 --line657
                        1650 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.54::
                        1651 .LDWlin54:
000004c2 3b0f0100       1652 	ld.w	0[r27],r1
000004c6 610a           1653 	cmp	1,r1
000004c8 9a15*          1654 	bne	.L1540
                        1655 --658:         {
                        1656 --659:             reg_val = Cfg->BaseAddr; 
                        1657 --line659
                        1658 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.55::
                        1659 .LDWlin55:
000004ca 3bef0900       1660 	ld.w	8[r27],r29
                        1661 --660:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CABASE0, reg_val); 
000004ce 3cf70100       1662 	ld.w	0[r28],ep
000004d2 21ed           1663 	sst.w	r29,64[ep]
                        1664 --661:             reg_val = Cfg->AddrMask; 
000004d4 3bef0d00       1665 	ld.w	12[r27],r29
                        1666 --662:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CAMASK0, reg_val); 
000004d8 3cf70100       1667 	ld.w	0[r28],ep
000004dc 23ed           1668 	sst.w	r29,68[ep]
                        1669 --663:             reg_val =  R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_CFG);  
000004de 3cf70100       1670 	ld.w	0[r28],ep
000004e2 00ed           1671 	sld.w	0[ep],r29
                        1672 --664:             reg_val |= 0x4u; 
000004e4 9dee0400       1673 	ori	4,r29,r29
000004e8 c525*          1674 	br	.L1542
                        1675 .L1540:
                        1676 --665:         }
                        1677 --666:         else if (R_XBUS_AM_BUFF == Cfg->Mode)
                        1678 --line666
                        1679 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.56::
                        1680 .LDWlin56:
000004ea 3b0f0100       1681 	ld.w	0[r27],r1
000004ee 620a           1682 	cmp	2,r1
000004f0 9a15*          1683 	bne	.L1543
                        1684 --667:         {
                        1685 --668:             reg_val = Cfg->BaseAddr; 
                        1686 --line668
                        1687 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.57::
                        1688 .LDWlin57:
000004f2 3bef0900       1689 	ld.w	8[r27],r29
                        1690 --669:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFBASE0, reg_val); 
000004f6 3cf70100       1691 	ld.w	0[r28],ep
000004fa 31ed           1692 	sst.w	r29,96[ep]
                        1693 --670:             reg_val = Cfg->AddrMask; 
000004fc 3bef0d00       1694 	ld.w	12[r27],r29
                        1695 --671:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFMASK0, reg_val); 
00000500 3cf70100       1696 	ld.w	0[r28],ep
00000504 33ed           1697 	sst.w	r29,100[ep]
                        1698 --672:             reg_val =  R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_CFG);  
00000506 3cf70100       1699 	ld.w	0[r28],ep
0000050a 00ed           1700 	sld.w	0[ep],r29
                        1701 --673:             reg_val |= 0x100u; 
0000050c 9dee0001       1702 	ori	256,r29,r29
00000510 8515*          1703 	br	.L1542
                        1704 .L1543:
                        1705 --674:         }
                        1706 --675:         else
                        1707 --676:         {
                        1708 --677:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CABASE0, 0); 
                        1709 --line677

                                                                      Page 30
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1710 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.58::
                        1711 .LDWlin58:
00000512 3cf70100       1712 	ld.w	0[r28],ep
00000516 2105           1713 	sst.w	zero,64[ep]
                        1714 --678:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CAMASK0, 0); 
00000518 3cf70100       1715 	ld.w	0[r28],ep
0000051c 2305           1716 	sst.w	zero,68[ep]
                        1717 --679:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFBASE0, 0); 
0000051e 3cf70100       1718 	ld.w	0[r28],ep
00000522 3105           1719 	sst.w	zero,96[ep]
                        1720 --680:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFMASK0, 0); 
00000524 3cf70100       1721 	ld.w	0[r28],ep
00000528 3305           1722 	sst.w	zero,100[ep]
                        1723 --681:             reg_val &= (uint32_t)(~((uint32_t)0x104u)); 
0000052a 200efbfe       1724 	movea	-261,zero,r1
0000052e 41e9           1725 	and	r1,r29
                        1726 .L1542:
                        1727 --682:         } 
                        1728 --683:         R_XBUS_WRITE_REG(32,locBaseAddr + R_XBUS_CFG, reg_val);  
00000530 3cf70100       1729 	ld.w	0[r28],ep
00000534 01ed           1730 	sst.w	r29,0[ep]
00000536 b53d*          1731 	br	.L1546
                        1732 .L1538:
                        1733 --684:     }
                        1734 --685:     else 
                        1735 --686:     {
                        1736 --687:         if (R_XBUS_AM_CACHE == Cfg->Mode)
                        1737 --line687
                        1738 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.59::
                        1739 .LDWlin59:
00000538 3b0f0100       1740 	ld.w	0[r27],r1
0000053c 610a           1741 	cmp	1,r1
0000053e 9a15*          1742 	bne	.L1547
                        1743 --688:         {
                        1744 --689:             reg_val = Cfg->BaseAddr; 
                        1745 --line689
                        1746 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.60::
                        1747 .LDWlin60:
00000540 3bef0900       1748 	ld.w	8[r27],r29
                        1749 --690:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CABASE1, reg_val); 
00000544 3cf70100       1750 	ld.w	0[r28],ep
00000548 25ed           1751 	sst.w	r29,72[ep]
                        1752 --691:             reg_val = Cfg->AddrMask; 
0000054a 3bef0d00       1753 	ld.w	12[r27],r29
                        1754 --692:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CAMASK1, reg_val); 
0000054e 3cf70100       1755 	ld.w	0[r28],ep
00000552 27ed           1756 	sst.w	r29,76[ep]
                        1757 --693:             reg_val =  R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_CFG);  
00000554 3cf70100       1758 	ld.w	0[r28],ep
00000558 00ed           1759 	sld.w	0[ep],r29
                        1760 --694:             reg_val |= 0x8u; 
0000055a 9dee0800       1761 	ori	8,r29,r29
0000055e c525*          1762 	br	.L1549
                        1763 .L1547:
                        1764 --695:         }
                        1765 --696:         else if (R_XBUS_AM_BUFF == Cfg->Mode)
                        1766 --line696
                        1767 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.61::
                        1768 .LDWlin61:
00000560 3b0f0100       1769 	ld.w	0[r27],r1
00000564 620a           1770 	cmp	2,r1

                                                                      Page 31
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
00000566 9a15*          1771 	bne	.L1550
                        1772 --697:         {
                        1773 --698:             reg_val = Cfg->BaseAddr; 
                        1774 --line698
                        1775 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.62::
                        1776 .LDWlin62:
00000568 3bef0900       1777 	ld.w	8[r27],r29
                        1778 --699:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFBASE1, reg_val); 
0000056c 3cf70100       1779 	ld.w	0[r28],ep
00000570 35ed           1780 	sst.w	r29,104[ep]
                        1781 --700:             reg_val = Cfg->AddrMask; 
00000572 3bef0d00       1782 	ld.w	12[r27],r29
                        1783 --701:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFMASK1, reg_val); 
00000576 3cf70100       1784 	ld.w	0[r28],ep
0000057a 37ed           1785 	sst.w	r29,108[ep]
                        1786 --702:             
                        1787 --703:             reg_val =  R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_CFG);  
0000057c 3cf70100       1788 	ld.w	0[r28],ep
00000580 00ed           1789 	sld.w	0[ep],r29
                        1790 --704:             reg_val |= 0x200u; 
00000582 9dee0002       1791 	ori	512,r29,r29
00000586 8515*          1792 	br	.L1549
                        1793 .L1550:
                        1794 --705:         }
                        1795 --706:         else
                        1796 --707:         {
                        1797 --708:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CABASE1, 0); 
                        1798 --line708
                        1799 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.63::
                        1800 .LDWlin63:
00000588 3cf70100       1801 	ld.w	0[r28],ep
0000058c 2505           1802 	sst.w	zero,72[ep]
                        1803 --709:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_CAMASK1, 0); 
0000058e 3cf70100       1804 	ld.w	0[r28],ep
00000592 2705           1805 	sst.w	zero,76[ep]
                        1806 --710:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFBASE1, 0); 
00000594 3cf70100       1807 	ld.w	0[r28],ep
00000598 3505           1808 	sst.w	zero,104[ep]
                        1809 --711:             R_XBUS_WRITE_REG(32, locBaseAddr + R_XBUS_BFMASK1, 0); 
0000059a 3cf70100       1810 	ld.w	0[r28],ep
0000059e 3705           1811 	sst.w	zero,108[ep]
                        1812 --712:             reg_val &= (uint32_t)(~((uint32_t)0x208u)); 
000005a0 200ef7fd       1813 	movea	-521,zero,r1
000005a4 41e9           1814 	and	r1,r29
                        1815 .L1549:
                        1816 --713:         } 
                        1817 --714:         R_XBUS_WRITE_REG(32,locBaseAddr + R_XBUS_CFG, reg_val);  
000005a6 3cf70100       1818 	ld.w	0[r28],ep
000005aa 01ed           1819 	sst.w	r29,0[ep]
                        1820 .L1546:
                        1821 --715:     }
                        1822 --716:     /* synchronise ... whatever */
                        1823 --717:     reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_REQSYNC);  
000005ac 3cf70100       1824 	ld.w	0[r28],ep
000005b0 0ced           1825 	sld.w	24[ep],r29
                        1826 --718:     return R_XBUS_ERR_OK;
000005b2 0052           1827 	mov	0,r10
                        1828 .L1533:
                        1829 --	    .ef
                        1830 .LDW14:
000005b4 4206ff70       1831 	dispose	1,{r25,r26,r27,r28,r29,r31},[lp]

                                                                      Page 32
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1832 	.type	_R_XBUS_AreaConfig,@function
                        1833 	.size	_R_XBUS_AreaConfig,.-_R_XBUS_AreaConfig
                        1834 	.align	2
                        1835 .LDW24:
                        1836 --_err	r26	local
                        1837 --_reg_val	r29	local
                        1838 
                        1839 --_Unit	0[sp]	param
                        1840 --_Area	r25	param
                        1841 --_Cfg	r27	param
                        1842 
                        1843 	.section ".bss","awb"
                        1844 .L1754:
                        1845 	.type	.L1754,@object
                        1846 	.size	.L1754,0
                        1847 	.data
                        1848 	.text
                        1849 
                        1850 --719: }
                        1851 
                        1852 --721: /*******************************************************************************
                        1853 --722:   Function: R_XBUS_Flush
                        1854 --723: */
                        1855 --725: void R_XBUS_Flush(uint32_t Unit, uint32_t FlushAddr, uint32_t FlushSize)
                        1856 	.align	2
                        1857 	.align	2
                        1858 	.global	_R_XBUS_Flush
                        1859 _R_XBUS_Flush:
000005b8 8807e170       1860 	prepare	{r25,r26,r27,r28,r29,r31},4
000005bc 63370d00       1861 	st.w	r6,12[sp]
000005c0 07c8           1862 	mov	r7,r25
000005c2 63470900       1863 	st.w	r8,8[sp]
000005c6 3d0600000000*  1864 	mov	_CacheAreas,r29
                        1865 --	    .bf
                        1866 .LDW34:
                        1867 --726: {
                        1868 --727:     volatile uint32_t reg_val   = 0;
000005cc 00e2           1869 	mov	0,r28
                        1870 --728:     uint32_t idx, way, addr; 
                        1871 --729:     
                        1872 --730:     /* make sure we flush the relevant size even when
                        1873 --731:      * the FlushAddr is no aligned to 32 bytes */
                        1874 --732:     FlushSize += 32;
000005ce 235f0900       1875 	ld.w	8[sp],r11
000005d2 0b5e2000       1876 	addi	32,r11,r11
000005d6 635f0900       1877 	st.w	r11,8[sp]
                        1878 --734:     if (0 == locBaseAddr) 
000005da 210600000000*  1879 	mov	_locBaseAddr,r1
000005e0 210f0100       1880 	ld.w	0[r1],r1
000005e4 e009           1881 	cmp	zero,r1
000005e6 fa05*          1882 	bne	.L1909
                        1883 --735:     {
                        1884 --736:         /* You need to call init first */
                        1885 --737:         R_XBUS_ErrorHandler(0, R_XBUS_ERR_NOTLOCKED); 
                        1886 --line737
                        1887 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.64::
                        1888 .LDWlin64:
000005e8 0032           1889 	mov	0,r6
000005ea 043a           1890 	mov	4,r7
                        1891 	jarl	_R_XBUS_ErrorHandler,lp
                        1891 <EXPANSION BEGIN>

                                                                      Page 33
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        1891 jarl22 _R_XBUS_ErrorHandler , lp 
000005ec bfff4afa*      1891 <EXPANSION END>
                        1892 --738:         return; 
                        1893 --line738
                        1894 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.65::
                        1895 .LDWlin65:
000005f0 80074001*      1896 	br	.L1907
                        1897 .L1909:
                        1898 --739:     }    
                        1899 --740:     #ifdef USE_ROS
                        1900 --741:     R_OS_ThreadMutexLock(&locXcLock);
                        1901 --742:     #endif
                        1902 --744:     /* Synchronise cache domain */
                        1903 --745:     reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_REQSYNC);   
                        1904 --line745
                        1905 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.66::
                        1906 .LDWlin66:
000005f4 3e0600000000*  1907 	mov	_locBaseAddr,ep
000005fa 00f5           1908 	sld.w	0[ep],ep
000005fc 0ce5           1909 	sld.w	24[ep],r28
                        1910 --746:     
                        1911 --747:     /* Flush all cache? */
                        1912 --748:     if (FlushAddr < (uint32_t)R_XBUS_AM_BUFF) 
000005fe 62ca           1913 	cmp	2,r25
00000600 c925*          1914 	bnl	.L1912
                        1915 --749:     {
                        1916 --750:         /* Flush the buffer as well  */
                        1917 --751:         if (0 == FlushAddr) 
                        1918 --line751
                        1919 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.67::
                        1920 .LDWlin67:
00000602 e0c9           1921 	cmp	zero,r25
00000604 ea05*          1922 	bne	.L1914
                        1923 --752:         {
                        1924 --753:             reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_BUFFLUSH);   
                        1925 --line753
                        1926 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.68::
                        1927 .LDWlin68:
00000606 3e0600000000*  1928 	mov	_locBaseAddr,ep
0000060c 00f5           1929 	sld.w	0[ep],ep
0000060e 0ee5           1930 	sld.w	28[ep],r28
                        1931 .L1914:
                        1932 --754:         }
                        1933 --755:         /* Flush the cache  */
                        1934 --756:         for (way = 0; way < R_XBUS_CACHE_WAY_NB; way++) 
00000610 00d2           1935 	mov	0,r26
00000612 0000           1936 	nop
                        1937 .L1918:
                        1938 --757:         {
                        1939 --758:             for (idx = 0; idx < locMaxIdx; idx++)
00000614 00da           1940 	mov	0,r27
00000616 e50d*          1941 	br	.L1922
                        1942 .L1921:
                        1943 --759:             {
                        1944 --760:                  /* Store (reset) command */
                        1945 --761:                  reg_val     =  (uint8_t)((uint8_t)IDX_WB_INV << 1u); 
                        1946 --line761
                        1947 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.69::
                        1948 .LDWlin69:
00000618 08e2           1949 	mov	8,r28
                        1950 --762:                  reg_val    |= 0x1u; /* 0100B IDX_WB_INV | VLD */

                                                                      Page 34
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
0000061a 9ce60100       1951 	ori	1,r28,r28
                        1952 --763:                 /* add way   */
                        1953 --764:                  reg_val   |= (way << 16u); 
0000061e 1a08           1954 	mov	r26,r1
00000620 d00a           1955 	shl	16,r1
00000622 01e1           1956 	or	r1,r28
                        1957 --765:                 /* add index to the command */
                        1958 --766:                 reg_val    |= (idx << 5u); 
00000624 1b08           1959 	mov	r27,r1
00000626 c50a           1960 	shl	5,r1
00000628 01e1           1961 	or	r1,r28
                        1962 --767:                
                        1963 --768:                 /* Write command */
                        1964 --769:                 loc_WriteCmd(reg_val); 
0000062a 1c30           1965 	mov	r28,r6
                        1966 	jarl	_loc_WriteCmd,lp
                        1966 <EXPANSION BEGIN>
                        1966 jarl22 _loc_WriteCmd , lp 
0000062c bfffd4f9*      1966 <EXPANSION END>
                        1967 --line758
                        1968 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.70::
                        1969 .LDWlin70:
00000630 41da           1970 	add	1,r27
                        1971 .L1922:
00000632 210600000000*  1972 	mov	_locMaxIdx,r1
00000638 210f0100       1973 	ld.w	0[r1],r1
0000063c e1d9           1974 	cmp	r1,r27
0000063e d1ed*          1975 	bl	.L1921
                        1976 --line756
                        1977 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.71::
                        1978 .LDWlin71:
00000640 41d2           1979 	add	1,r26
00000642 64d2           1980 	cmp	4,r26
00000644 81ed*          1981 	bl	.L1918
00000646 d575*          1982 	br	.L1923
                        1983 .L1912:
                        1984 --770:             }
                        1985 --771:         } 
                        1986 --772:     }
                        1987 --773:     else if ((uint32_t)R_XBUS_AM_BUFF == FlushAddr)
                        1988 --line773
                        1989 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.72::
                        1990 .LDWlin72:
00000648 62ca           1991 	cmp	2,r25
0000064a fa05*          1992 	bne	.L1924
                        1993 --774:     {
                        1994 --775:         /* Just buffer flush */
                        1995 --776:         reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_BUFFLUSH);   
                        1996 --line776
                        1997 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.73::
                        1998 .LDWlin73:
0000064c 3e0600000000*  1999 	mov	_locBaseAddr,ep
00000652 00f5           2000 	sld.w	0[ep],ep
00000654 0ee5           2001 	sld.w	28[ep],r28
00000656 d56d*          2002 	br	.L1923
                        2003 .L1924:
                        2004 --777:     }    
                        2005 --778:     else /* check the cache areas */
                        2006 --779:     {
                        2007 --780:         
                        2008 --781:         if (FlushAddr >= CacheAreas[3].Start)

                                                                      Page 35
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        2009 --line781
                        2010 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.74::
                        2011 .LDWlin74:
00000658 3d0f2500       2012 	ld.w	36[r29],r1
0000065c e1c9           2013 	cmp	r1,r25
0000065e f10d*          2014 	bl	.L1927
                        2015 --782:         {
                        2016 --783:             /* address in range and buffered mode on? */
                        2017 --784:             if ((FlushAddr < CacheAreas[3].End) && (R_XBUS_AM_BUFF == CacheAreas[3].Mode))
                        2018 --line784
                        2019 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.75::
                        2020 .LDWlin75:
00000660 3d0f2900       2021 	ld.w	40[r29],r1
00000664 e1c9           2022 	cmp	r1,r25
00000666 b90d*          2023 	bnl	.L1927
00000668 9d0f2d00       2024 	ld.bu	44[r29],r1
0000066c 620a           2025 	cmp	2,r1
0000066e fa05*          2026 	bne	.L1927
                        2027 --785:             {
                        2028 --786:                 /* Buffered area flush */
                        2029 --787:                 reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_BUFFLUSH);  
                        2030 --line787
                        2031 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.76::
                        2032 .LDWlin76:
00000670 3e0600000000*  2033 	mov	_locBaseAddr,ep
00000676 00f5           2034 	sld.w	0[ep],ep
00000678 0ee5           2035 	sld.w	28[ep],r28
                        2036 --788:                 #ifdef USE_ROS
                        2037 --789:                 R_OS_ThreadMutexUnlock(&locXcLock);
                        2038 --790:                 #endif
                        2039 --792:                 return; 
0000067a b55d*          2040 	br	.L1907
                        2041 .L1927:
                        2042 --793:             } 
                        2043 --794:         }    
                        2044 --795:         if (FlushAddr >= CacheAreas[2].Start)
                        2045 --line795
                        2046 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.77::
                        2047 .LDWlin77:
0000067c 3d0f1900       2048 	ld.w	24[r29],r1
00000680 e1c9           2049 	cmp	r1,r25
00000682 f10d*          2050 	bl	.L1933
                        2051 --796:         {
                        2052 --797:            /* address in range and buffered mode on? */
                        2053 --798:             if ((FlushAddr < CacheAreas[2].End) && (R_XBUS_AM_BUFF == CacheAreas[2].Mode))
                        2054 --line798
                        2055 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.78::
                        2056 .LDWlin78:
00000684 3d0f1d00       2057 	ld.w	28[r29],r1
00000688 e1c9           2058 	cmp	r1,r25
0000068a b90d*          2059 	bnl	.L1933
0000068c 9d0f2100       2060 	ld.bu	32[r29],r1
00000690 620a           2061 	cmp	2,r1
00000692 fa05*          2062 	bne	.L1933
                        2063 --799:             {
                        2064 --800:                 /* Buffered area flush */
                        2065 --801:                 reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_BUFFLUSH);
                        2066 --line801
                        2067 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.79::
                        2068 .LDWlin79:
00000694 3e0600000000*  2069 	mov	_locBaseAddr,ep

                                                                      Page 36
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
0000069a 00f5           2070 	sld.w	0[ep],ep
0000069c 0ee5           2071 	sld.w	28[ep],r28
                        2072 --802:                 #ifdef USE_ROS
                        2073 --803:                 R_OS_ThreadMutexUnlock(&locXcLock);
                        2074 --804:                 #endif
                        2075 --806:                 return; 
0000069e 954d*          2076 	br	.L1907
                        2077 .L1933:
                        2078 --807:   
                        2079 --808:             } 
                        2080 --809:         }    
                        2081 --810:         if (FlushAddr >= CacheAreas[1].Start)
                        2082 --line810
                        2083 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.80::
                        2084 .LDWlin80:
000006a0 3d0f0d00       2085 	ld.w	12[r29],r1
000006a4 e1c9           2086 	cmp	r1,r25
000006a6 9125*          2087 	bl	.L1939
                        2088 --811:         {
                        2089 --812:             /* address in range and cached mode on? */
                        2090 --813:             if ((FlushAddr < CacheAreas[1].End) && (R_XBUS_AM_CACHE == CacheAreas[1].Mode))
                        2091 --line813
                        2092 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.81::
                        2093 .LDWlin81:
000006a8 3d0f1100       2094 	ld.w	16[r29],r1
000006ac e1c9           2095 	cmp	r1,r25
000006ae d91d*          2096 	bnl	.L1939
000006b0 9d0f1500       2097 	ld.bu	20[r29],r1
000006b4 610a           2098 	cmp	1,r1
000006b6 9a1d*          2099 	bne	.L1939
                        2100 --814:             {
                        2101 --815:                 addr = FlushAddr; 
                        2102 --line815
                        2103 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.82::
                        2104 .LDWlin82:
000006b8 19d8           2105 	mov	r25,r27
                        2106 --816:                 while ((addr <= (FlushAddr + FlushSize)) && (addr < CacheAreas[1].End))
000006ba d50d*          2107 	br	.L1944
                        2108 .L1946:
                        2109 --817:                 {
                        2110 --818:                     /* Flush from address*/
                        2111 --819:                     reg_val   = (uint8_t)((uint8_t)HIT_WB_INV << 1u); 
                        2112 --line819
                        2113 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.83::
                        2114 .LDWlin83:
000006bc 0ce2           2115 	mov	12,r28
                        2116 --820:                     reg_val  |=  0x1u; /* 0110B HIT_WB_INV | VLD */
000006be 9ce60100       2117 	ori	1,r28,r28
                        2118 --821:                     reg_val  |= (addr & 0xFFFFFFE0u);
000006c2 200ee0ff       2119 	movea	-32,zero,r1
000006c6 5b09           2120 	and	r27,r1
000006c8 01e1           2121 	or	r1,r28
                        2122 --822:     
                        2123 --823:                     /* Write command */
                        2124 --824:                     loc_WriteCmd(reg_val); 
000006ca 1c30           2125 	mov	r28,r6
                        2126 	jarl	_loc_WriteCmd,lp
                        2126 <EXPANSION BEGIN>
                        2126 jarl22 _loc_WriteCmd , lp 
000006cc bfff34f9*      2126 <EXPANSION END>
                        2127 --825:     

                                                                      Page 37
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        2128 --826:                     /* the next 32 byte */
                        2129 --827:                     addr += 32; 
                        2130 --line827
                        2131 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.84::
                        2132 .LDWlin84:
000006d0 1bde2000       2133 	addi	32,r27,r27
                        2134 .L1944:
000006d4 230f0900       2135 	ld.w	8[sp],r1
000006d8 d909           2136 	add	r25,r1
000006da e1d9           2137 	cmp	r1,r27
000006dc db05*          2138 	bh	.L1945
000006de 3d0f1100       2139 	ld.w	16[r29],r1
000006e2 e1d9           2140 	cmp	r1,r27
000006e4 c1ed*          2141 	bl	.L1946
                        2142 .L1945:
                        2143 --828:                 }
                        2144 --829:                 #ifdef USE_ROS
                        2145 --830:                 R_OS_ThreadMutexUnlock(&locXcLock);
                        2146 --831:                 #endif
                        2147 --833:                 return; 
                        2148 --line833
                        2149 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.85::
                        2150 .LDWlin85:
000006e6 d525*          2151 	br	.L1907
                        2152 .L1939:
                        2153 --834:             }    
                        2154 --835:         }
                        2155 --836:         if (FlushAddr >= CacheAreas[0].Start)
                        2156 --line836
                        2157 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.86::
                        2158 .LDWlin86:
000006e8 3d0f0100       2159 	ld.w	0[r29],r1
000006ec e1c9           2160 	cmp	r1,r25
000006ee 9125*          2161 	bl	.L1923
                        2162 --837:         {
                        2163 --838:             /* address in range and cached mode on? */
                        2164 --839:             if ((FlushAddr < CacheAreas[0].End) && (R_XBUS_AM_CACHE == CacheAreas[0].Mode))
                        2165 --line839
                        2166 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.87::
                        2167 .LDWlin87:
000006f0 3d0f0500       2168 	ld.w	4[r29],r1
000006f4 e1c9           2169 	cmp	r1,r25
000006f6 d91d*          2170 	bnl	.L1923
000006f8 9d0f0900       2171 	ld.bu	8[r29],r1
000006fc 610a           2172 	cmp	1,r1
000006fe 9a1d*          2173 	bne	.L1923
                        2174 --840:             {
                        2175 --841:                 addr = FlushAddr; 
                        2176 --line841
                        2177 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.88::
                        2178 .LDWlin88:
00000700 19d8           2179 	mov	r25,r27
                        2180 --842:                 while ((addr <= (FlushAddr + FlushSize)) && (addr < CacheAreas[0].End))
00000702 d50d*          2181 	br	.L1954
                        2182 .L1956:
                        2183 --843:                 {
                        2184 --844:                     /* Flush from address*/
                        2185 --845:                     reg_val   = (uint8_t)((uint8_t)HIT_WB_INV << 1u); 
                        2186 --line845
                        2187 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.89::
                        2188 .LDWlin89:

                                                                      Page 38
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
00000704 0ce2           2189 	mov	12,r28
                        2190 --846:                     reg_val  |=  0x1u; /* 0110B HIT_WB_INV | VLD */
00000706 9ce60100       2191 	ori	1,r28,r28
                        2192 --847:                     reg_val |= (addr & 0xFFFFFFE0u);
0000070a 200ee0ff       2193 	movea	-32,zero,r1
0000070e 5b09           2194 	and	r27,r1
00000710 01e1           2195 	or	r1,r28
                        2196 --848:     
                        2197 --849:                     /* Write command */
                        2198 --850:                     loc_WriteCmd(reg_val); 
00000712 1c30           2199 	mov	r28,r6
                        2200 	jarl	_loc_WriteCmd,lp
                        2200 <EXPANSION BEGIN>
                        2200 jarl22 _loc_WriteCmd , lp 
00000714 bfffecf8*      2200 <EXPANSION END>
                        2201 --851:     
                        2202 --852:                     /* next 32 byte */
                        2203 --853:                     addr += 32; 
                        2204 --line853
                        2205 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.90::
                        2206 .LDWlin90:
00000718 1bde2000       2207 	addi	32,r27,r27
                        2208 .L1954:
0000071c 230f0900       2209 	ld.w	8[sp],r1
00000720 d909           2210 	add	r25,r1
00000722 e1d9           2211 	cmp	r1,r27
00000724 db05*          2212 	bh	.L1955
00000726 3d0f0500       2213 	ld.w	4[r29],r1
0000072a e1d9           2214 	cmp	r1,r27
0000072c c1ed*          2215 	bl	.L1956
                        2216 .L1955:
                        2217 --854:                 }
                        2218 --855:                 #ifdef USE_ROS
                        2219 --856:                 R_OS_ThreadMutexUnlock(&locXcLock);
                        2220 --857:                 #endif
                        2221 --859:                 return; 
                        2222 --line859
                        2223 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.91::
                        2224 .LDWlin91:
0000072e 0000           2225 	nop
                        2226 .L1923:
                        2227 --860:             }    
                        2228 --861:         }
                        2229 --862:     }
                        2230 --863:     #ifdef USE_ROS
                        2231 --864:     R_OS_ThreadMutexUnlock(&locXcLock);
                        2232 --865:     #endif
                        2233 --867:     
                        2234 --868: }
                        2235 .L1907:
                        2236 --	    .ef
                        2237 .LDW44:
00000730 4806ff70       2238 	dispose	4,{r25,r26,r27,r28,r29,r31},[lp]
                        2239 	.type	_R_XBUS_Flush,@function
                        2240 	.size	_R_XBUS_Flush,.-_R_XBUS_Flush
                        2241 	.align	2
                        2242 .LDW54:
                        2243 --_reg_val	r28	local
                        2244 --_idx	r27	local
                        2245 --_way	r26	local
                        2246 --_addr	r27	local

                                                                      Page 39
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        2247 
                        2248 --_Unit	12[sp]	param
                        2249 --_FlushAddr	r25	param
                        2250 --_FlushSize	8[sp]	param
                        2251 
                        2252 	.data
                        2253 	.text
                        2254 
                        2255 
                        2256 --870: /*******************************************************************************
                        2257 --871:   Function: R_XBUS_SetMode
                        2258 --872: */
                        2259 --873: r_xbus_Error_t R_XBUS_SetMode(uint32_t Unit, uint8_t Area, r_xbus_AreaMode_t Mode) 
                        2260 	.align	2
                        2261 	.align	2
                        2262 	.global	_R_XBUS_SetMode
                        2263 _R_XBUS_SetMode:
00000734 8207e170       2264 	prepare	{r25,r26,r27,r28,r29,r31},1
00000738 63370100       2265 	st.w	r6,0[sp]
0000073c c7ceff00       2266 	andi	255,r7,r25
00000740 08e0           2267 	mov	r8,r28
00000742 3b0600000000*  2268 	mov	_locBaseAddr,r27
                        2269 --	    .bf
                        2270 .LDW64:
                        2271 --874: {
                        2272 --875:     r_xbus_Error_t    err       = R_XBUS_ERR_OK;
00000748 00d2           2273 	mov	0,r26
                        2274 --876:     volatile uint32_t reg_val   = 0; 
0000074a 00ea           2275 	mov	0,r29
                        2276 --877:     if (0 == locBaseAddr) 
0000074c 3b0f0100       2277 	ld.w	0[r27],r1
00000750 e009           2278 	cmp	zero,r1
00000752 fa05*          2279 	bne	.L2475
                        2280 --878:     {
                        2281 --879:         /* You need to call init first */
                        2282 --880:         R_XBUS_ErrorHandler(0, R_XBUS_ERR_NOTLOCKED); 
                        2283 --line880
                        2284 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.92::
                        2285 .LDWlin92:
00000754 0032           2286 	mov	0,r6
00000756 043a           2287 	mov	4,r7
                        2288 	jarl	_R_XBUS_ErrorHandler,lp
                        2288 <EXPANSION BEGIN>
                        2288 jarl22 _R_XBUS_ErrorHandler , lp 
00000758 bfffdef8*      2288 <EXPANSION END>
                        2289 --881:         return R_XBUS_ERR_NOTLOCKED; 
                        2290 --line881
                        2291 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.93::
                        2292 .LDWlin93:
0000075c 0452           2293 	mov	4,r10
0000075e 852d*          2294 	br	.L2473
                        2295 .L2475:
                        2296 --882:     }    
                        2297 --884:     reg_val =  R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_CFG);  
                        2298 --line884
                        2299 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.94::
                        2300 .LDWlin94:
00000760 3bf70100       2301 	ld.w	0[r27],ep
00000764 00ed           2302 	sld.w	0[ep],r29
                        2303 --885:     if (0 == Area) 
00000766 e0c9           2304 	cmp	zero,r25

                                                                      Page 40
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
00000768 fa0d*          2305 	bne	.L2478
                        2306 --886:     {
                        2307 --887:         if (R_XBUS_AM_CACHE == Mode)
                        2308 --line887
                        2309 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.95::
                        2310 .LDWlin95:
0000076a 61e2           2311 	cmp	1,r28
0000076c ca05*          2312 	bne	.L2480
                        2313 --888:         {
                        2314 --889:             reg_val |= 0x4u; 
                        2315 --line889
                        2316 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.96::
                        2317 .LDWlin96:
0000076e 9dee0400       2318 	ori	4,r29,r29
00000772 f515*          2319 	br	.L2486
                        2320 .L2480:
                        2321 --890:         }
                        2322 --891:         else if (R_XBUS_AM_BUFF == Mode)
                        2323 --line891
                        2324 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.97::
                        2325 .LDWlin97:
00000774 62e2           2326 	cmp	2,r28
00000776 ca05*          2327 	bne	.L2483
                        2328 --892:         {
                        2329 --893:             reg_val |= 0x100u; 
                        2330 --line893
                        2331 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.98::
                        2332 .LDWlin98:
00000778 9dee0001       2333 	ori	256,r29,r29
0000077c a515*          2334 	br	.L2486
                        2335 .L2483:
                        2336 --894:         }
                        2337 --895:         else 
                        2338 --896:         {
                        2339 --897:             reg_val &= (uint32_t)(~((uint32_t)0x104u)); 
                        2340 --line897
                        2341 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.99::
                        2342 .LDWlin99:
0000077e 200efbfe       2343 	movea	-261,zero,r1
00000782 41e9           2344 	and	r1,r29
00000784 e50d*          2345 	br	.L2486
                        2346 .L2478:
                        2347 --898:         } 
                        2348 --899:     }
                        2349 --900:     else 
                        2350 --901:     {
                        2351 --902:         if (R_XBUS_AM_CACHE == Mode)
                        2352 --line902
                        2353 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.100::
                        2354 .LDWlin100:
00000786 61e2           2355 	cmp	1,r28
00000788 ca05*          2356 	bne	.L2487
                        2357 --903:         {
                        2358 --904:             reg_val |= 0x8u; 
                        2359 --line904
                        2360 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.101::
                        2361 .LDWlin101:
0000078a 9dee0800       2362 	ori	8,r29,r29
0000078e 950d*          2363 	br	.L2486
                        2364 .L2487:
                        2365 --905:         }

                                                                      Page 41
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        2366 --906:         else if (R_XBUS_AM_BUFF == Mode)
                        2367 --line906
                        2368 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.102::
                        2369 .LDWlin102:
00000790 62e2           2370 	cmp	2,r28
00000792 ca05*          2371 	bne	.L2490
                        2372 --907:         {
                        2373 --908:             reg_val |= 0x200u; 
                        2374 --line908
                        2375 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.103::
                        2376 .LDWlin103:
00000794 9dee0002       2377 	ori	512,r29,r29
00000798 c505*          2378 	br	.L2486
                        2379 .L2490:
                        2380 --909:         }
                        2381 --910:         else 
                        2382 --911:         {
                        2383 --912:             reg_val &= (uint32_t)(~((uint32_t)0x208u)); 
                        2384 --line912
                        2385 ..lin.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main.104::
                        2386 .LDWlin104:
0000079a 200ef7fd       2387 	movea	-521,zero,r1
0000079e 41e9           2388 	and	r1,r29
                        2389 .L2486:
                        2390 --913:         } 
                        2391 --914:     }
                        2392 --915:     R_XBUS_WRITE_REG(32,locBaseAddr + R_XBUS_CFG, reg_val);  
000007a0 3bf70100       2393 	ld.w	0[r27],ep
000007a4 01ed           2394 	sst.w	r29,0[ep]
                        2395 --916:     /* synchronise ... whatever */
                        2396 --917:     reg_val = R_XBUS_READ_REG(32,locBaseAddr + R_XBUS_REQSYNC);  
000007a6 3bf70100       2397 	ld.w	0[r27],ep
000007aa 0ced           2398 	sld.w	24[ep],r29
                        2399 --918:     return err;
000007ac 1a50           2400 	mov	r26,r10
                        2401 .L2473:
                        2402 --	    .ef
                        2403 .LDW74:
000007ae 4206ff70       2404 	dispose	1,{r25,r26,r27,r28,r29,r31},[lp]
                        2405 	.type	_R_XBUS_SetMode,@function
                        2406 	.size	_R_XBUS_SetMode,.-_R_XBUS_SetMode
                        2407 	.align	2
                        2408 .LDW84:
                        2409 --_err	r26	local
                        2410 --_reg_val	r29	local
                        2411 
                        2412 --_Unit	0[sp]	param
                        2413 --_Area	r25	param
                        2414 --_Mode	r28	param
                        2415 
                        2416 	.section ".bss","awb"
                        2417 .L2586:
                        2418 	.type	.L2586,@object
                        2419 	.size	.L2586,0
                        2420 	.data
                        2421 	.text
                        2422 
                        2423 --920: }
                        2424 
                        2425 --922: /*******************************************************************************
                        2426 --923:   Function: R_XBUS_SetErrorCallback

                                                                      Page 42
                                                              C:\Users\Frank\AppData\Local\Temp\gh_0000p1g1.si
                        2427 --924: */
                        2428 --926: void R_XBUS_SetErrorCallback(void(*ErrorCallback )(uint32_t Unit, uint32_t Error)) 
                        2429 	.align	2
                        2430 	.align	2
                        2431 	.global	_R_XBUS_SetErrorCallback
                        2432 _R_XBUS_SetErrorCallback:
000007b2 0670           2433 	mov	r6,r14
000007b4 210600000000*  2434 	mov	_loc_ErrorHandler,r1
                        2435 --	    .bf
                        2436 .LDW94:
                        2437 --927: {
                        2438 --928:     loc_ErrorHandler = ErrorCallback;
000007ba 2b0600000000*  2439 	mov	_loc_ErrorHandler,r11
000007c0 6b770100       2440 	st.w	r14,0[r11]
                        2441 --929: }
                        2442 --	    .ef
                        2443 .LDW05:
000007c4 7f00           2444 	jmp	[lp]
                        2445 	.type	_R_XBUS_SetErrorCallback,@function
                        2446 	.size	_R_XBUS_SetErrorCallback,.-_R_XBUS_SetErrorCallback
                        2447 	.align	2
                        2448 .LDW15:
                        2449 
                        2450 --_ErrorCallback	r14	param
                        2451 
                        2452 	.data
                        2453 	.text
                        2454 
                        2455 	.align	2
                        2456 --_locBaseAddr	_locBaseAddr	static
                        2457 --_loc_ErrorHandler	_loc_ErrorHandler	static
                        2458 --_CacheAreas	_CacheAreas	static
                        2459 --_locMaxIdx	_locMaxIdx	static
                        2460 
                        2461 	.data
                        2462 	.ghsnote version,15
                        2463 	.ghsnote tools,3
                        2464 	.ghsnote options,144
                        2465 	.text
                        2466 	.align	2
                        2467 ..eof.C.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs.5Cobj.5Cr_xbus_main...43.3A.5Cgit.5Crh850.5Csrc.5Capp.5Cgfx_apps.5Csimple_draw.5Ctarget.5Cd1mx_mango_ghs..5BC5D026..0::
                        2468 .rh850_flags REGMODE22,DATA_ALIGN8,GP_FIX,EP_NONFIX,TP_FIX,REG2_RESERVE,G3M
